{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/User/core/NavLeft.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/User/core/NavLeft.vue","mtime":1574504380000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { router } from '../../../../routers';\nimport { HTTP} from '../../../../http-common'\nimport {socket_bus} from '../../../../main'\n\n\nexport default {\n    data() {\n        return {\n            customer: {},\n            is_show: false,\n            avatar: '',\n            url_preview: ''\n        }\n    },\n    methods: {\n        handle_logout() {\n            localStorage.clear()\n            router.push('/')\n        },\n        handle_upload() {\n            this.is_show = true\n            this.url_preview = this.customer.avatar_path\n        },\n        handleFileUpload(e) {\n            this.url_preview = []\n            var files = e.target.files || e.dataTransfer.files;\n            // var _URL = window.URL || window.webkitURL;\n            // var image = new Image()\n            if (!files.length)\n                return;\n            this.avatar = files[0]\n            this.url_preview = URL.createObjectURL(files[0]);\n        },\n        handle_upload_image() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.customer.id)\n            data_form.append(\"avatar\", this.avatar)\n                \n            return new Promise((resolve, reject) => {\n                HTTP.post('/customers/upload-avatar/' + this.customer.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: 'Change Avatar Success'})\n                        this.handle_get_new_info(this.customer.id)\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: 'Change Avatar Fail'})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_no_accept() {\n            this.is_show = false\n        },\n        handle_accept() {\n            this.handle_upload_image()\n        },\n        handle_get_new_info(id) {\n            return new Promise((resolve, reject) => {\n                HTTP.get(`/customers/${id}`).then(result => {\n                    resolve(result)\n                    this.customer = result.data\n                    this.is_show = false\n                    localStorage.setItem('customer', JSON.stringify(this.customer))\n                    setTimeout(() => { window.location.reload()}, 1500)\n                }).catch(error => {\n                    reject(error)\n                    console.log(`Error: ${error}`);\n                })\n            })\n        }\n    },\n    created() {\n        if(JSON.parse(localStorage.getItem('customer'))) {\n            this.customer = JSON.parse(localStorage.getItem('customer'))\n        }\n    }\n}\n",{"version":3,"sources":["NavLeft.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NavLeft.vue","sourceRoot":"src/components/Pages/User/core","sourcesContent":["<template>\n   <div class=\"flex-box block-left-menu gray-bg\" style=\"z-index: 9; position: fixed; top: 80px; left: 0;\">\n        <div class=\"flex-box block-info padding-full\" style=\"padding-top: 16px;\">\n            <div class=\"flex-box circle-avatar margin-fix-right\" style=\"position: relative\">\n                <img :src=\"`${customer.avatar_path}`\" :alt=\"`${customer.id}`\">\n                <span class=\"action-edit\" v-on:click=\"handle_upload()\"><i class=\"fas fa-edit\"></i></span>\n            </div>\n            <div class=\"flex-box block-content\" >\n                <p class=\"label title-form text-uppercase bold\" style=\"font-size: 16px;\">{{customer.full_name}}</p>\n                <div class=\"form-group flex-row-center\" style=\"margin-top: 8px; background: none;\" v-on:click=\"handle_logout\">\n                    <a class=\"label-cell text-color-second sm-size\">{{$t('user_page.logout')}}</a>\n                </div>\n            </div>\n        </div>\n        <div class=\"block-model\" style=\"background: rgba(0, 0, 0, .4)\" v-if=\"is_show\">\n            <div class=\"block-alert animation-transform-scale padding-full\" style=\"width: 320px\">\n                <div class=\"form-group box-header\">\n                    <p class=\"text-center label text-uppercase\" style=\"font-size: 20px;\">Avatar Upload</p>\n                </div>\n                <div class=\"form-group.col-group margin-bottom\">\n                    <input type=\"file\" v-validate=\"`required:true`\" name=\"avatar\" ref=\"avatar\"  v-on:change=\"handleFileUpload\" multiple accept=\"image/*\">\n                    <span class=\"error-text margin-fix-top\" v-show=\"errors.has('avatar')\">{{errors.first('avatar')}}</span>\n                </div>\n                <div class=\"form-group row-group\">\n                    <div class=\"form-group margin-bottom margin-fix-right\" style=\"max-height: 120px\" >\n                        <img v-bind:src=\"url_preview\" style=\"width: 100%; height: auto; object-fit: contain;\">\n                    </div>\n                </div>\n                <div class=\"form-group row-group flex-row-center\" style=\"justify-content: center; margin-top: 16px;\">\n                    <div class=\"btn btn-sign-up margin-fix-right\" style=\"width: 25%\" v-on:click=\"handle_no_accept()\">Cancel</div>\n                    <button class=\"btn btn-sign-up primary-color\" style=\"color:#FFF; width: 25%\" @click=\"handle_accept\">OK</button>\n                </div>\n            </div>\n        </div>\n        <br>\n        <span class=\"line-separate\"></span>\n        <div class=\" flex-box block-list padding-full\" style=\"min-height: 72%;\">\n            <div class=\" flex-box block-item margin-bottom\">\n                <div class=\"flex-box block-item-header\">\n                    <span class=\"icon\"><i class=\"fas fa-user\"></i></span>\n                    <p class=\"label text-uppercase bold\">{{$t('user_page.user_center')}}</p>\n                </div>\n                <div class=\"flex-box block-list flex-left\" style=\"padding-left: 36px\">\n                    <div class=\"block-item flex-left margin-bottom-fix flex-row\">\n                        <router-link to=\"/user/info-user\" class=\"label-cell black sm-size\">{{$t('user_page.profile')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix flex-row\">\n                        <router-link to=\"/user/your-joining-demands\" class=\"label-cell black sm-size\">{{$t('user_page.your_joining_demand')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix flex-row\">\n                        <router-link to=\"/user/wish-list\" class=\"label-cell black sm-size\">{{$t('user_page.wish_list')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix flex-row\">\n                        <router-link to=\"/user/support-ticket\" class=\"label-cell black sm-size\">{{$t('user_page.support_ticket')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left flex-row\">\n                        <router-link to=\"/user/faq\" class=\"label-cell black sm-size\">{{$t('user_page.fqa')}}</router-link>\n                    </div>\n                </div>\n            </div>\n            <div class=\" flex-box block-item margin-bottom\">\n                <div class=\"flex-box block-item-header\">\n                    <span class=\"icon\"><i class=\"fas fa-crown\" style=\"color: #000;\"></i></span>\n                    <p class=\"label text-uppercase bold\">{{$t('user_page.brand_center')}}</p>\n                </div>\n                <div class=\"flex-box block-list flex-left\" style=\"padding-left: 36px\">\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/user/your-brand\" class=\"label-cell black sm-size\">{{$t('user_page.your_brand')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/user/joining-demand-suggestion\" class=\"label-cell black sm-size\">{{$t('user_page.demand_suggestion')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/user/call-back-request\" class=\"label-cell black sm-size\">{{$t('user_page.call_back')}}</router-link>\n                    </div>\n                </div>\n            </div>\n            <div class=\" flex-box block-item margin-bottom\">\n                <div class=\"flex-box block-item-header\">\n                    <span class=\"icon\"><i class=\"fas fa-bullhorn\"></i></span>\n                    <p class=\"label text-uppercase bold\">{{$t('user_page.adv_center')}}</p>\n                </div>\n                <div class=\"flex-box block-list flex-left\" style=\"padding-left: 36px\">\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/user/advertisement\" class=\"label-cell black sm-size\">{{$t('user_page.advertisement_list')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/user/advertisement-stop\" class=\"label-cell black sm-size\">{{$t('user_page.advertisement_stop')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/user/advertisement-type\" class=\"label-cell black sm-size\">{{$t('user_page.adv_type_price')}}</router-link>\n                    </div>\n                </div>\n            </div>\n            <span class=\"line-separate\"></span>\n            <div class=\"flex-box flex-row-center margin-fix-top\">\n                <router-link to=\"/\">{{$t('user_page.back_home')}}</router-link>\n            </div>\n        </div>\n        <div class=\"flex-box flex-row-center\" style=\"background: #EEE; bottom: 0; padding: 8px;\">\n            <p class=\"label-cell sm-size text-center\">2019 &copy; Franchise King <i class=\"fas fa-bolt text-color-primarry\"></i> Brave Cat</p>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { router } from '../../../../routers';\nimport { HTTP} from '../../../../http-common'\nimport {socket_bus} from '../../../../main'\n\n\nexport default {\n    data() {\n        return {\n            customer: {},\n            is_show: false,\n            avatar: '',\n            url_preview: ''\n        }\n    },\n    methods: {\n        handle_logout() {\n            localStorage.clear()\n            router.push('/')\n        },\n        handle_upload() {\n            this.is_show = true\n            this.url_preview = this.customer.avatar_path\n        },\n        handleFileUpload(e) {\n            this.url_preview = []\n            var files = e.target.files || e.dataTransfer.files;\n            // var _URL = window.URL || window.webkitURL;\n            // var image = new Image()\n            if (!files.length)\n                return;\n            this.avatar = files[0]\n            this.url_preview = URL.createObjectURL(files[0]);\n        },\n        handle_upload_image() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.customer.id)\n            data_form.append(\"avatar\", this.avatar)\n                \n            return new Promise((resolve, reject) => {\n                HTTP.post('/customers/upload-avatar/' + this.customer.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: 'Change Avatar Success'})\n                        this.handle_get_new_info(this.customer.id)\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: 'Change Avatar Fail'})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_no_accept() {\n            this.is_show = false\n        },\n        handle_accept() {\n            this.handle_upload_image()\n        },\n        handle_get_new_info(id) {\n            return new Promise((resolve, reject) => {\n                HTTP.get(`/customers/${id}`).then(result => {\n                    resolve(result)\n                    this.customer = result.data\n                    this.is_show = false\n                    localStorage.setItem('customer', JSON.stringify(this.customer))\n                    setTimeout(() => { window.location.reload()}, 1500)\n                }).catch(error => {\n                    reject(error)\n                    console.log(`Error: ${error}`);\n                })\n            })\n        }\n    },\n    created() {\n        if(JSON.parse(localStorage.getItem('customer'))) {\n            this.customer = JSON.parse(localStorage.getItem('customer'))\n        }\n    }\n}\n</script>"]}]}