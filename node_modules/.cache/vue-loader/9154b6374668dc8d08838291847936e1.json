{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/Admin/Pages/BrandList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/Admin/Pages/BrandList.vue","mtime":1574676440826},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { HTTP_ADMIN } from '../../../../http-common';\nimport { socket_bus } from '../../../../main';\nimport block_add_brand from '../../User/ui_user/FormAddBrand'\nimport block_detail_brand from '../../Admin/Pages/DetailBrand_Admin'\n\nexport default {\n    components: { block_add_brand, block_detail_brand},\n    data() {\n        return {\n            users: [],\n            brands: [],\n            user_selected: null,\n            brand_selected: null,\n            url_preview: null,\n            is_add: false,\n            brands_of_user: [],\n            tab_choose: 'All',\n            is_logo: '',\n            qr_code_image : '',\n            logo : '',\n            images : '',\n            thumbnail : '',\n            main_banner : '',\n            image_intro : '',\n            menu: '',\n            search_text: ''\n        }\n    },\n    methods: {\n        handle_change() {\n            if(this.url_preview) {\n                socket_bus.$emit('SHOW_MESSAGE_UPLOAD_IMAGE', {message: 'You want to save image ?'})\n            }\n        },\n        handle_get_users() {\n            HTTP_ADMIN.get('/customers').then(result => {\n                this.users = result.data.status == 200 ? result.data.data : []\n            }).catch(error => {\n                console.log(error)\n            })\n            \n        },\n        handle_get_brand() {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get('/brands').then(result => {\n                    resolve(result)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                }).catch(error => {\n                    reject(error)\n                    console.log(error)\n                })\n            })\n        },\n        handle_get_brand_advertisement() {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get('/brands/advertisments/get-brand').then(result => {\n                    resolve(result)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                }).catch(error => {\n                    reject(error)\n                    console.log(error)\n                })\n            })\n        },\n        handle_get_vip_brands() {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get('/brands/vip/get-brands').then(result => {\n                    resolve(result)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                }).catch(error => {\n                    reject(error)\n                    console.log(error);\n                })\n            })\n        },\n        handle_upgrade_level(brand) {\n            socket_bus.$emit('UPGRADE_VIP_BRAND', {message: brand.name, id_brand: brand.id})\n        },\n        handle_process_upgrade(id_brand) {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.patch('/brands/upgrade-level-brand/' + id_brand).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result.data.message})\n                        setTimeout(() => { window.location.reload()}, 2000)\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result.data.message})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log(error);\n                })\n            })\n        },\n        handle_edit(brand) {\n            socket_bus.$emit('EDIT_BRAND', {data: brand })\n            console.log(brand);\n        },\n        handle_choose_tab(item) {\n            switch(item) {\n                case 'All':\n                    this.tab_choose = 'All'\n                    this.handle_get_brand()\n                    break;\n                case 'Adv':\n                    this.tab_choose = 'Adv'\n                    this.handle_get_brand_advertisement()\n                    break;\n                case 'VIP':\n                    this.tab_choose = 'VIP'\n                    this.handle_get_vip_brands()\n                    break;\n            }\n        },\n        handle_update_image(brand) {\n            this.brand_selected = brand\n        },\n        handle_delete_link(index) {\n                if(this.is_logo == 'MAIN_BANNER' || this.is_logo == 'IMAGE_INTRO' || this.is_logo == 'MENU') {\n                this.url_preview = null,\n                this.main_banner = ''\n                this.image_intro = ''\n                this.$refs.logo = []\n                this.menu = ''\n            } else {\n                this.url_preview = null,\n                this.logo = ''\n                this.qr_code_image = ''\n                this.thumbnail = ''\n                this.$refs.logo = []\n            }\n        },\n        handleFileUpload(e) {\n            this.url_preview = []\n            var files = e.target.files || e.dataTransfer.files;\n            var _URL = window.URL || window.webkitURL;\n            var image = new Image()\n            if (!files.length)\n                return;\n            this.qr_code_image = files[0]\n            this.logo = files[0],\n            this.images = files[0];\n            this.thumbnail = files[0]\n            this.main_banner = files\n            this.image_intro = files\n            this.menu = files\n\n            if(this.main_banner.length > 2) {\n                socket_bus.$emit('SHOW_MESSAGE', {message: 'Main Banner Only 2 Picture'})\n                this.main_banner = []\n                e.target.value = ''\n            } else if(this.image_intro.length > 5) {\n                socket_bus.$emit('SHOW_MESSAGE', {message: 'Image Intro Only 5 Picture'})\n                this.image_intro = []\n                e.target.value = ''\n            } else if(this.menu.length > 5) {\n                socket_bus.$emit('SHOW_MESSAGE', {message: 'Menu Only 5 Picture'})\n                this.menu = []\n                e.target.value = ''\n            }\n\n            switch(this.is_logo) {\n                case 'LOGO':\n                    image.src = _URL.createObjectURL(files[0]);\n                    image.onload = () => {\n                        if(image.width != 270 || image.height != 270 ) {\n                            socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                            this.logo = null\n                            e.target.value = ''\n                        } else {\n                            this.url_preview.push(URL.createObjectURL(files[0]));\n                        }\n                    }\n                    break;\n                case 'THUMBNAIL':\n                    image.src = _URL.createObjectURL(files[0]);\n                    image.onload = () => {\n                        if(image.width != 270 || image.height != 150 ) {\n                            socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                            this.thumbnail = null\n                            e.target.value = ''\n                        } else {\n                            this.url_preview.push(URL.createObjectURL(files[0]));\n                        }\n                    }\n                    break;\n                case 'MAIN_BANNER':\n                    for(var i = 0; i < files.length; i++) {\n                        image.src = _URL.createObjectURL(files[i]);\n                        image.onload = () => {\n                            if(image.width != 870 || image.height != 270 ) {\n                                socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                                this.main_banner = null\n                                e.target.value = ''\n                                this.url_preview = null\n                            } else {\n                                for(i = 0; i < files.length; i++) {\n                                    this.url_preview.push(URL.createObjectURL(files[i]));\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case 'IMAGE_INTRO':\n                    for(i = 0; i < files.length; i++) {\n                        image.src = _URL.createObjectURL(files[i]);\n                        image.onload = () => {\n                            if(image.width != 960 || image.height != 720 ) {\n                                socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                                this.image_intro = null\n                                e.target.value = ''\n                                this.url_preview = null\n                            } else {\n                                for(i = 0; i < files.length; i++) {\n                                    this.url_preview.push(URL.createObjectURL(files[i]));\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case 'MENU':\n                    for(i = 0; i < files.length; i++) {\n                        image.src = _URL.createObjectURL(files[i]);\n                        image.onload = () => {\n                            if(image.width != 960 || image.height != 720 ) {\n                                socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                                this.image_intro = null\n                                e.target.value = ''\n                                this.url_preview = null\n                            } else {\n                                for(i = 0; i < files.length; i++) {\n                                    this.url_preview.push(URL.createObjectURL(files[i]));\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case 'QR_CODE':\n                    image.src = _URL.createObjectURL(files[0]);\n                    image.onload = () => {\n                        if(image.width != 90 || image.height != 90 ) {\n                            socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                            this.logo = null\n                            e.target.value = ''\n                        } else {\n                            this.url_preview.push(URL.createObjectURL(files[0]));\n                        }\n                    }\n                    break;\n            }\n            \n        },\n        handle_upload() {\n            switch(this.is_logo) {\n                case 'LOGO':\n                    this.handle_up_logo();\n                    break;\n                case 'THUMBNAIL':\n                    this.handle_up_thumbnail();\n                    break;\n                case 'MAIN_BANNER':\n                    this.handle_up_main_banner();\n                    break;\n                case 'IMAGE_INTRO':\n                    this.handle_up_image_intro();\n                    break;\n                case 'MENU':\n                    this.handle_up_menu();\n                    break;\n                case 'QR_CODE':\n                    this.handle_up_qr_code_image();\n                    break;\n            }\n        },\n        handle_up_logo() {\n            const data_form = new FormData()\n            data_form.append('name', this.brand_selected.name)\n            data_form.append('logo', this.logo);\n\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-logo/' + this.brand_selected.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        setTimeout(() => {window.location.reload()}, 3000) \n                        socket_bus.$emit('SHOW_MESSAGE',{message: 'Update Image Success !!!'})\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE',{message: 'Update Image Fail !!!'})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_up_thumbnail() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.brand_selected.name)\n            data_form.append(\"thumbnail\", this.thumbnail)\n            \n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-thumbnail/' + this.brand_selected.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        window.location.reload()\n                        alert('Update Image Success !!!')\n                    } else {\n                        alert('Update Image Fail !!!')\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_up_qr_code_image() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.brand_selected.name)\n            data_form.append(\"qr_code_image\", this.thumbnail)\n            \n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-qr-code/' + this.brand_selected.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        window.location.reload()\n                        alert('Update Qr Code Success !!!')\n                    } else {\n                        alert('Update Qr Code Fail !!!')\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_up_main_banner() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.brand_selected.name)\n            for(let i = 0; i < this.main_banner.length; i++) {\n                data_form.append('main_banner', this.main_banner[i])\n            }\n\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-banners/' + this.brand_selected.id, data_form, {\n                    headers: {\n                            'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        window.location.reload()\n                        alert('Update Image Success !!!')\n                    } else {\n                        alert('Update Image Fail !!!')\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_up_image_intro() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.brand_selected.name)\n            for(let i = 0; i < this.image_intro.length; i++) {\n                data_form.append('image_intro', this.image_intro[i])\n            }\n\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-intro-image/' + this.brand_selected.id, data_form, {\n                    headers: {\n                            'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        window.location.reload()\n                        alert('Update Image Success !!!')\n                    } else {\n                        alert('Update Image Fail !!!')\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_up_menu() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.brand_selected.name)\n            for(let i = 0; i < this.menu.length; i++) {\n                data_form.append('menu', this.menu[i])\n            }\n\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-menu/' + this.brand_selected.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        setTimeout(() => {window.location.reload()}, 3000) \n                        socket_bus.$emit('SHOW_MESSAGE',{message: 'Update Image Success !!!'})\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE',{message: 'Update Image Fail !!!'})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_close_form_up() {\n            this.is_logo = null\n            this.brand_selected = null\n            this.logo = null\n            this.main_banner = null\n            this.image_intro = null\n            this.thumbnail = null\n            this.url_preview = null\n        },\n        handle_lock_brand(brand) {\n            if(!brand.is_lock) {\n                socket_bus.$emit('SHOW_MESSAGE_LOCK_BRAND', {brand: brand})\n            } else {\n                socket_bus.$emit('SHOW_MESSAGE_UNLOCK_BRAND', {brand: brand})\n            }\n        }\n    },\n    computed: {\n        filter_search() {\n            return this.brands.filter(item => { return item.name.includes(this.search_text) || item.email_owner.includes(this.search_text) || item.id_category.includes(this.search_text)})\n        }\n    },\n    created() {\n        this.handle_get_users()\n        this.handle_get_brand()\n\n        socket_bus.$on('CANCEL_ADD_BRAND' , result => {\n            this.is_add = false\n        })\n\n        socket_bus.$on('UPDATE_LIST_BRAND', result => {\n            this.handle_get_brand()\n        })\n\n        socket_bus.$on('RESPONSE_UPDATE_BRAND_VIP', result => {\n            if(result.is_del) {\n                this.handle_process_upgrade(result.id_brand)\n            }\n        })\n\n        socket_bus.$on('RESULT_UPLOAD_IMAGE', result => {\n            if(result.is_save) {\n                this.handle_upload()\n            } else {\n                this.url_preview = null\n            }\n        })\n\n        socket_bus.$on('ACCEPT_LOCK_BRAND', result => {\n            const brand = result.brand\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.patch(`/brands/${brand.id}`, {is_lock : true}).then(result_1 => {\n                    resolve(result_1)\n                    if(result_1.data.status == 200) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result_1.data.message})\n                        setTimeout(() => { window.location.reload()})\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result_1.data.message})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log(`Error: ${error}`);\n                })\n            })\n        })\n\n        socket_bus.$on('ACCEPT_UNLOCK_BRAND', result => {\n            const brand = result.brand\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.patch(`/brands/${brand.id}`, {is_lock : false}).then(result_1 => {\n                    resolve(result_1)\n                    if(result_1.data.status == 200) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result_1.data.message})\n                        setTimeout(() => { window.location.reload()})\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result_1.data.message})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log(`Error: ${error}`);\n                })\n            })\n        })\n    }\n}\n",{"version":3,"sources":["BrandList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsLA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BrandList.vue","sourceRoot":"src/components/Pages/Admin/Pages","sourcesContent":["<template>\n    <div class=\"flex-box padding-full block-custom-header\">\n        <div class=\"block-custom col-12 padding-fix-lr box-shadow margin-fix-right\" style=\"max-height: 600px; background: #EDEDED; padding-bottom: 32px;\">\n            <div class=\"block-header bg-title-header padding-full header-fix\">\n                <p class=\"title-form\">Brand List</p>\n            </div>\n            <div class=\"form-group row-group\" style=\"justify-content: flex-end; align-item: center\">\n                <ul class=\"form-group row-group\" style=\"width: 100%; justify-content: flex-start; list-style: none; padding-left: 20px;\">\n                    <li class=\"item padding-right\" v-on:click=\"handle_choose_tab('All')\">\n                        <p class=\"label text-color-second\" v-bind:class=\"{'active' : tab_choose == 'All'}\">All Brand</p>\n                    </li>\n                    <li class=\"item padding-right\" v-on:click=\"handle_choose_tab('Adv')\">\n                        <p class=\"label text-color-second\" v-bind:class=\"{'active' : tab_choose == 'Adv'}\">Brand Advertisement</p>\n                    </li>\n                    <li class=\"item\" v-on:click=\"handle_choose_tab('VIP')\">\n                        <p class=\"label text-color-second\" v-bind:class=\"{'active' : tab_choose == 'VIP'}\">Brand VIP</p>\n                    </li>\n                </ul>\n                <div class=\"flex-box block-search margin-fix-right\">\n                    <input type=\"text\" placeholder=\"Search....\" class=\"border-bottom-ol\" v-model=\"search_text\">\n                </div>\n                <button class=\"btn btn-signup primary-color\" style=\"color: #FFF; \" v-on:click=\"is_add = true\">New Brand</button>\n            </div>\n            <span class=\"line-separate\"></span>\n            <div class=\"form-group row-group width-full\">\n                <div class=\"form-group row-group width-full\">\n                    <div class=\"block-list-row width-full padding-full border-bottom-ol\">\n                        <div class=\"block-item-row-header margin-fix-right\" style=\"max-width: 64px; width: 64px; justify-content: center;\">\n                            <p class=\"label text-color-second \">Logo</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 160px; margin: 0 8px;\">\n                            <p class=\"label text-color-second \">Category</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 220px;\">\n                            <p class=\"label text-color-second \">Brand Name</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 200px;\">\n                            <p class=\"label text-color-second \">Pricing</p>\n                        </div>\n                        <div class=\"block-item-row-header\">\n                            <p class=\"label text-color-second \">Location</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"width: 200px; flex: none;\">\n                            <p class=\"label text-color-second\" style=\"text-align:left;\">Email Owner</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"display: flex; justify-content: center;\">\n                            <p class=\"label text-color-second\" style=\"text-align: left\">Action</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"form-group padding-full flex-row-center\" v-if=\"filter_search.length == 0\">\n                <span class=\"label-cell\">No Data</span>\n            </div>\n            <form class=\"block-form\" style=\"padding: 0 8px 16px 8px; max-height: 600px; overflow: auto;\">\n                <div class=\"form-group border-bottom-ol padding-full row-animation\" style=\"align-items: center;\" v-for=\"(item,index) in filter_search\" :key=\"index\">\n                    <div class=\"block-item-row logo-brand margin-fix-right\" style=\"width: 64px; border: none;\">\n                        <img v-bind:src=\"`./${item.image_source.logo}`\" v-bind:alt=\"`${item.name}`\" >\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 160px; margin: 0 8px;\">\n                        <p class=\"label-cell\">{{item.id_category}}</p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 220px;\">\n                        <a class=\"label-cell width-full\" style=\"font-size: 16px;\" v-bind:href=\"`/#/brand/${item.id}`\">{{item.name}}</a>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 200px;\">\n                        <p class=\"label-cell bold\">{{item.price.toLocaleString() }} <sup>đ</sup></p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 360px; margin-right: 8px;\">\n                        <p class=\"label-cell text-overflow\" >{{item.location.toString()}}</p>\n                    </div>\n                    <div class=\"block-item-row\">\n                        <p class=\"label-cell\">{{item.email_owner}}</p>\n                    </div>\n                    <div class=\"block-item-row\" style=\"display: flex; justify-content: center; align-items: center\">\n                        <a class=\"label-cell margin-fix-right\" v-on:click=\"handle_edit(item)\"><i class=\"fas fa-edit\"></i></a>\n                        <i class=\"fas fa-upload margin-fix-right\" v-if=\"item.level == 'NORMAL'\" v-on:click=\"handle_upgrade_level(item)\"></i>\n                        <a  class=\"label-cell margin-fix-right\" v-on:click=\"handle_update_image(item)\"><i class=\"far fa-file-image\"></i></a>\n                        <a v-on:click=\"handle_lock_brand(item)\" class=\"label-cell flex-box \"><i class=\"fas\" v-bind:class=\"{ 'fa-lock' : item.is_lock, 'fa-lock-open' : !item.is_lock}\"></i></a>\n                    </div>\n                </div>\n            </form>\n        </div>\n        <block_add_brand v-if=\"is_add\"></block_add_brand>\n        <block_detail_brand ></block_detail_brand>\n        <div class=\"block-model\" style=\"background: rgba(0,0,0,.5)\" v-if=\"brand_selected\">\n            <div class=\"block-alert padding-full\" style=\"padding: 0 16px;\">\n                <div class=\"block-header bg-title-header padding-full header-fix width-full\">\n                    <p class=\"title-form\"> {{brand_selected.name}}</p>\n                </div>\n                <form class=\"block-form\" style=\"padding:16px; width: 90%;\" @submit.prevent=\"handle_upload\">\n                    <div class=\"form-group row-group\">\n                        <div class=\"form-group row-group\" style=\"justify-content: flex-start; align-items: center\">\n                            <input type=\"radio\" name=\"logo\" v-model=\"is_logo\" value=\"LOGO\" @change=\"handle_change()\">\n                            <span class=\"label-span\">Logo</span>\n                        </div>\n                        <div class=\"form-group row-group\" style=\"justify-content: flex-start; align-items: center\">\n                            <input type=\"radio\" name=\"thumbnail\" v-model=\"is_logo\" value=\"THUMBNAIL\" @change=\"handle_change()\">\n                            <span class=\"label-span\">{{$t('image_upload.thumbnail')}}</span>\n                        </div>\n                        <div class=\"form-group row-group\" style=\"justify-content: flex-start; align-items: center\" >\n                            <input type=\"radio\" name=\"main_banner\" v-model=\"is_logo\" value=\"MAIN_BANNER\" @change=\"handle_change()\">\n                            <span class=\"label-span\">{{$t('image_upload.banner')}}</span>\n                        </div>\n                        <div class=\"form-group row-group\" style=\"justify-content: flex-start; align-items: center\">\n                            <input type=\"radio\" name=\"image_intro\" v-model=\"is_logo\" value=\"IMAGE_INTRO\" @change=\"handle_change()\">\n                            <span class=\"label-span\">{{$t('image_upload.intro')}}</span>\n                        </div>\n                        <div class=\"form-group row-group\" style=\"justify-content: flex-start; align-items: center\">\n                            <input type=\"radio\" name=\"image_intro\" v-model=\"is_logo\" value=\"MENU\" @change=\"handle_change()\">\n                            <span class=\"label-span\">{{$t('image_upload.menu')}}</span>\n                        </div>\n                        <div class=\"form-group row-group\" style=\"justify-content: flex-start; align-items: center\">\n                            <input type=\"radio\" name=\"qr_code_image\" v-model=\"is_logo\" value=\"QR_CODE\" @change=\"handle_change()\">\n                            <span class=\"label-span\">QR Code</span>\n                        </div>\n                    </div>\n                    <div class=\"form-group row-group\" v-if=\"url_preview\">\n                        <div class=\"form-group margin-bottom margin-fix-right\" style=\"max-height: 200px\" v-for=\"(image, index) in url_preview\" :key=\"index\" >\n                            <span class=\"label-span\" v-on:click=\"handle_delete_link(index)\"><i class=\"fas fa-times-circle\"></i></span>\n                            <img v-bind:src=\"image\" style=\"width: 100%; height: auto; object-fit: contain;\">\n                        </div>\n                    </div>\n                    <div class=\"form-group row-group\">\n                        <div class=\"form-group col-group margin-fix-right\" v-if=\"is_logo == 'LOGO'\">\n                            <span class=\"label-span margin-bottom\">{{$t('user_page.logo')}}</span>\n                            <span class=\"label-span text-color-second\">{{$t('image_upload.size_up_load')}} 270px - 270px</span>\n                            <span class=\"label-span margin-bottom\">* {{$t('image_upload.note_upload')}}</span>\n                            <input type=\"file\" v-validate=\"`required:true`\" name=\"logo\" ref=\"logo\" v-on:change=\"handleFileUpload\" accept=\"image/*\">\n                            <span class=\"error-text margin-fix-top\" v-show=\"errors.has('logo')\">{{errors.first('logo')}}</span>\n                        </div>\n                        <div class=\"form-group col-group\" v-if=\"is_logo == 'THUMBNAIL'\">\n                            <span class=\"label-span margin-bottom\">Thumbnail</span>\n                            <span class=\"label-span text-color-second\">Size Image Upload: 270px - 150px</span>\n                            <span class=\"label-span margin-bottom\">* {{$t('image_upload.note_upload')}}</span>\n                            <input type=\"file\" v-validate=\"`required:true`\" name=\"thumbnail\" ref=\"thumbnail\" v-on:change=\"handleFileUpload\" accept=\"image/*\">\n                            <span class=\"error-text margin-fix-top\" v-show=\"errors.has('thumbnail')\">{{errors.first('thumbnail')}}</span>\n                        </div>\n                    </div>\n                    <div class=\"form-group row-group\">\n                        <div class=\"form-group col-group margin-fix-right\" v-if=\"is_logo == 'MAIN_BANNER'\">\n                            <span class=\"label-span margin-bottom\">Banner</span>\n                            <span class=\"label-span text-color-second\">{{$t('image_upload.size_up_load')}} 870px - 270px}</span>\n                            <span class=\"label-span margin-bottom\">* {{$t('image_upload.note_upload')}}</span>\n                            <input type=\"file\" v-validate=\"`required:true`\" name=\"main_banner\" ref=\"main_banner\" v-on:change=\"handleFileUpload\" multiple accept=\"image/*\">\n                            <span class=\"error-text margin-fix-top\" v-show=\"errors.has('main_banner')\">{{errors.first('main_banner')}}</span>\n                        </div>\n                        <div class=\"form-group col-group margin-fix-right\" v-if=\"is_logo == 'IMAGE_INTRO'\">\n                            <span class=\"label-span margin-bottom\">Intro</span>\n                            <span class=\"label-span text-color-second\">{{$t('image_upload.size_up_load')}} 960px - 720px}</span>\n                            <span class=\"label-span margin-bottom\">* {{$t('image_upload.note_upload')}}</span>\n                            <input type=\"file\" v-validate=\"`required:true`\" name=\"image_intro\" ref=\"image_intro\"  v-on:change=\"handleFileUpload\" multiple accept=\"image/*\">\n                            <span class=\"error-text margin-fix-top\" v-show=\"errors.has('image_intro')\">{{errors.first('image_intro')}}</span>\n                        </div>\n                        <div class=\"form-group col-group\" v-if=\"is_logo == 'MENU'\">\n                            <span class=\"label-span margin-bottom\">Menu</span>\n                            <span class=\"label-span text-color-second\">{{$t('image_upload.size_up_load')}} 960px - 720px}</span>\n                            <span class=\"label-span margin-bottom\">* {{$t('image_upload.note_upload')}}</span>\n                            <input type=\"file\" v-validate=\"`required:true`\" name=\"menu\" ref=\"menu\"  v-on:change=\"handleFileUpload\" multiple accept=\"image/*\">\n                            <span class=\"error-text margin-fix-top\" v-show=\"errors.has('menu')\">{{errors.first('menu')}}</span>\n                        </div>\n                    </div>\n                    <div class=\"form-group row-group\">\n                        <div class=\"form-group col-group\" v-if=\"is_logo == 'QR_CODE'\">\n                            <span class=\"label-span margin-bottom\">QR CODE</span>\n                            <span class=\"label-span text-color-second\">Size Image Upload: 90px - 90px}</span>\n                            <span class=\"label-span margin-bottom\">* {{$t('image_upload.note_upload')}}</span>\n                            <input type=\"file\" v-validate=\"`required:true`\" name=\"qr_code_image\" ref=\"qr_code_image\"  v-on:change=\"handleFileUpload\" >\n                            <span class=\"error-text margin-fix-top\" v-show=\"errors.has('qr_code_image')\">{{errors.first('qr_code_image')}}</span>\n                        </div>\n                    </div>\n                    <div class=\"form-group row-group\" style=\"justify-content: center; align-items: center;\">\n                        <div class=\"btn btn-cancel margin-fix-right\" style=\"color: #ED6B28; border: 1px solid #ED6B28\" v-on:click=\"handle_close_form_up()\">{{$t('cancel')}}</div>\n                        <button class=\"btn btn-signup primary-color\" style=\"color: #FFF\" >{{$t('save')}}</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { HTTP_ADMIN } from '../../../../http-common';\nimport { socket_bus } from '../../../../main';\nimport block_add_brand from '../../User/ui_user/FormAddBrand'\nimport block_detail_brand from '../../Admin/Pages/DetailBrand_Admin'\n\nexport default {\n    components: { block_add_brand, block_detail_brand},\n    data() {\n        return {\n            users: [],\n            brands: [],\n            user_selected: null,\n            brand_selected: null,\n            url_preview: null,\n            is_add: false,\n            brands_of_user: [],\n            tab_choose: 'All',\n            is_logo: '',\n            qr_code_image : '',\n            logo : '',\n            images : '',\n            thumbnail : '',\n            main_banner : '',\n            image_intro : '',\n            menu: '',\n            search_text: ''\n        }\n    },\n    methods: {\n        handle_change() {\n            if(this.url_preview) {\n                socket_bus.$emit('SHOW_MESSAGE_UPLOAD_IMAGE', {message: 'You want to save image ?'})\n            }\n        },\n        handle_get_users() {\n            HTTP_ADMIN.get('/customers').then(result => {\n                this.users = result.data.status == 200 ? result.data.data : []\n            }).catch(error => {\n                console.log(error)\n            })\n            \n        },\n        handle_get_brand() {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get('/brands').then(result => {\n                    resolve(result)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                }).catch(error => {\n                    reject(error)\n                    console.log(error)\n                })\n            })\n        },\n        handle_get_brand_advertisement() {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get('/brands/advertisments/get-brand').then(result => {\n                    resolve(result)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                }).catch(error => {\n                    reject(error)\n                    console.log(error)\n                })\n            })\n        },\n        handle_get_vip_brands() {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get('/brands/vip/get-brands').then(result => {\n                    resolve(result)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                }).catch(error => {\n                    reject(error)\n                    console.log(error);\n                })\n            })\n        },\n        handle_upgrade_level(brand) {\n            socket_bus.$emit('UPGRADE_VIP_BRAND', {message: brand.name, id_brand: brand.id})\n        },\n        handle_process_upgrade(id_brand) {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.patch('/brands/upgrade-level-brand/' + id_brand).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result.data.message})\n                        setTimeout(() => { window.location.reload()}, 2000)\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result.data.message})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log(error);\n                })\n            })\n        },\n        handle_edit(brand) {\n            socket_bus.$emit('EDIT_BRAND', {data: brand })\n            console.log(brand);\n        },\n        handle_choose_tab(item) {\n            switch(item) {\n                case 'All':\n                    this.tab_choose = 'All'\n                    this.handle_get_brand()\n                    break;\n                case 'Adv':\n                    this.tab_choose = 'Adv'\n                    this.handle_get_brand_advertisement()\n                    break;\n                case 'VIP':\n                    this.tab_choose = 'VIP'\n                    this.handle_get_vip_brands()\n                    break;\n            }\n        },\n        handle_update_image(brand) {\n            this.brand_selected = brand\n        },\n        handle_delete_link(index) {\n                if(this.is_logo == 'MAIN_BANNER' || this.is_logo == 'IMAGE_INTRO' || this.is_logo == 'MENU') {\n                this.url_preview = null,\n                this.main_banner = ''\n                this.image_intro = ''\n                this.$refs.logo = []\n                this.menu = ''\n            } else {\n                this.url_preview = null,\n                this.logo = ''\n                this.qr_code_image = ''\n                this.thumbnail = ''\n                this.$refs.logo = []\n            }\n        },\n        handleFileUpload(e) {\n            this.url_preview = []\n            var files = e.target.files || e.dataTransfer.files;\n            var _URL = window.URL || window.webkitURL;\n            var image = new Image()\n            if (!files.length)\n                return;\n            this.qr_code_image = files[0]\n            this.logo = files[0],\n            this.images = files[0];\n            this.thumbnail = files[0]\n            this.main_banner = files\n            this.image_intro = files\n            this.menu = files\n\n            if(this.main_banner.length > 2) {\n                socket_bus.$emit('SHOW_MESSAGE', {message: 'Main Banner Only 2 Picture'})\n                this.main_banner = []\n                e.target.value = ''\n            } else if(this.image_intro.length > 5) {\n                socket_bus.$emit('SHOW_MESSAGE', {message: 'Image Intro Only 5 Picture'})\n                this.image_intro = []\n                e.target.value = ''\n            } else if(this.menu.length > 5) {\n                socket_bus.$emit('SHOW_MESSAGE', {message: 'Menu Only 5 Picture'})\n                this.menu = []\n                e.target.value = ''\n            }\n\n            switch(this.is_logo) {\n                case 'LOGO':\n                    image.src = _URL.createObjectURL(files[0]);\n                    image.onload = () => {\n                        if(image.width != 270 || image.height != 270 ) {\n                            socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                            this.logo = null\n                            e.target.value = ''\n                        } else {\n                            this.url_preview.push(URL.createObjectURL(files[0]));\n                        }\n                    }\n                    break;\n                case 'THUMBNAIL':\n                    image.src = _URL.createObjectURL(files[0]);\n                    image.onload = () => {\n                        if(image.width != 270 || image.height != 150 ) {\n                            socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                            this.thumbnail = null\n                            e.target.value = ''\n                        } else {\n                            this.url_preview.push(URL.createObjectURL(files[0]));\n                        }\n                    }\n                    break;\n                case 'MAIN_BANNER':\n                    for(var i = 0; i < files.length; i++) {\n                        image.src = _URL.createObjectURL(files[i]);\n                        image.onload = () => {\n                            if(image.width != 870 || image.height != 270 ) {\n                                socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                                this.main_banner = null\n                                e.target.value = ''\n                                this.url_preview = null\n                            } else {\n                                for(i = 0; i < files.length; i++) {\n                                    this.url_preview.push(URL.createObjectURL(files[i]));\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case 'IMAGE_INTRO':\n                    for(i = 0; i < files.length; i++) {\n                        image.src = _URL.createObjectURL(files[i]);\n                        image.onload = () => {\n                            if(image.width != 960 || image.height != 720 ) {\n                                socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                                this.image_intro = null\n                                e.target.value = ''\n                                this.url_preview = null\n                            } else {\n                                for(i = 0; i < files.length; i++) {\n                                    this.url_preview.push(URL.createObjectURL(files[i]));\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case 'MENU':\n                    for(i = 0; i < files.length; i++) {\n                        image.src = _URL.createObjectURL(files[i]);\n                        image.onload = () => {\n                            if(image.width != 960 || image.height != 720 ) {\n                                socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                                this.image_intro = null\n                                e.target.value = ''\n                                this.url_preview = null\n                            } else {\n                                for(i = 0; i < files.length; i++) {\n                                    this.url_preview.push(URL.createObjectURL(files[i]));\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case 'QR_CODE':\n                    image.src = _URL.createObjectURL(files[0]);\n                    image.onload = () => {\n                        if(image.width != 90 || image.height != 90 ) {\n                            socket_bus.$emit('SHOW_MESSAGE', {message: 'Size image upload is over rules'})\n                            this.logo = null\n                            e.target.value = ''\n                        } else {\n                            this.url_preview.push(URL.createObjectURL(files[0]));\n                        }\n                    }\n                    break;\n            }\n            \n        },\n        handle_upload() {\n            switch(this.is_logo) {\n                case 'LOGO':\n                    this.handle_up_logo();\n                    break;\n                case 'THUMBNAIL':\n                    this.handle_up_thumbnail();\n                    break;\n                case 'MAIN_BANNER':\n                    this.handle_up_main_banner();\n                    break;\n                case 'IMAGE_INTRO':\n                    this.handle_up_image_intro();\n                    break;\n                case 'MENU':\n                    this.handle_up_menu();\n                    break;\n                case 'QR_CODE':\n                    this.handle_up_qr_code_image();\n                    break;\n            }\n        },\n        handle_up_logo() {\n            const data_form = new FormData()\n            data_form.append('name', this.brand_selected.name)\n            data_form.append('logo', this.logo);\n\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-logo/' + this.brand_selected.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        setTimeout(() => {window.location.reload()}, 3000) \n                        socket_bus.$emit('SHOW_MESSAGE',{message: 'Update Image Success !!!'})\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE',{message: 'Update Image Fail !!!'})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_up_thumbnail() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.brand_selected.name)\n            data_form.append(\"thumbnail\", this.thumbnail)\n            \n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-thumbnail/' + this.brand_selected.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        window.location.reload()\n                        alert('Update Image Success !!!')\n                    } else {\n                        alert('Update Image Fail !!!')\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_up_qr_code_image() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.brand_selected.name)\n            data_form.append(\"qr_code_image\", this.thumbnail)\n            \n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-qr-code/' + this.brand_selected.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        window.location.reload()\n                        alert('Update Qr Code Success !!!')\n                    } else {\n                        alert('Update Qr Code Fail !!!')\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_up_main_banner() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.brand_selected.name)\n            for(let i = 0; i < this.main_banner.length; i++) {\n                data_form.append('main_banner', this.main_banner[i])\n            }\n\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-banners/' + this.brand_selected.id, data_form, {\n                    headers: {\n                            'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        window.location.reload()\n                        alert('Update Image Success !!!')\n                    } else {\n                        alert('Update Image Fail !!!')\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_up_image_intro() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.brand_selected.name)\n            for(let i = 0; i < this.image_intro.length; i++) {\n                data_form.append('image_intro', this.image_intro[i])\n            }\n\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-intro-image/' + this.brand_selected.id, data_form, {\n                    headers: {\n                            'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        window.location.reload()\n                        alert('Update Image Success !!!')\n                    } else {\n                        alert('Update Image Fail !!!')\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_up_menu() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.brand_selected.name)\n            for(let i = 0; i < this.menu.length; i++) {\n                data_form.append('menu', this.menu[i])\n            }\n\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/brands/upload-menu/' + this.brand_selected.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        setTimeout(() => {window.location.reload()}, 3000) \n                        socket_bus.$emit('SHOW_MESSAGE',{message: 'Update Image Success !!!'})\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE',{message: 'Update Image Fail !!!'})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_close_form_up() {\n            this.is_logo = null\n            this.brand_selected = null\n            this.logo = null\n            this.main_banner = null\n            this.image_intro = null\n            this.thumbnail = null\n            this.url_preview = null\n        },\n        handle_lock_brand(brand) {\n            if(!brand.is_lock) {\n                socket_bus.$emit('SHOW_MESSAGE_LOCK_BRAND', {brand: brand})\n            } else {\n                socket_bus.$emit('SHOW_MESSAGE_UNLOCK_BRAND', {brand: brand})\n            }\n        }\n    },\n    computed: {\n        filter_search() {\n            return this.brands.filter(item => { return item.name.includes(this.search_text) || item.email_owner.includes(this.search_text) || item.id_category.includes(this.search_text)})\n        }\n    },\n    created() {\n        this.handle_get_users()\n        this.handle_get_brand()\n\n        socket_bus.$on('CANCEL_ADD_BRAND' , result => {\n            this.is_add = false\n        })\n\n        socket_bus.$on('UPDATE_LIST_BRAND', result => {\n            this.handle_get_brand()\n        })\n\n        socket_bus.$on('RESPONSE_UPDATE_BRAND_VIP', result => {\n            if(result.is_del) {\n                this.handle_process_upgrade(result.id_brand)\n            }\n        })\n\n        socket_bus.$on('RESULT_UPLOAD_IMAGE', result => {\n            if(result.is_save) {\n                this.handle_upload()\n            } else {\n                this.url_preview = null\n            }\n        })\n\n        socket_bus.$on('ACCEPT_LOCK_BRAND', result => {\n            const brand = result.brand\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.patch(`/brands/${brand.id}`, {is_lock : true}).then(result_1 => {\n                    resolve(result_1)\n                    if(result_1.data.status == 200) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result_1.data.message})\n                        setTimeout(() => { window.location.reload()})\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result_1.data.message})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log(`Error: ${error}`);\n                })\n            })\n        })\n\n        socket_bus.$on('ACCEPT_UNLOCK_BRAND', result => {\n            const brand = result.brand\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.patch(`/brands/${brand.id}`, {is_lock : false}).then(result_1 => {\n                    resolve(result_1)\n                    if(result_1.data.status == 200) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result_1.data.message})\n                        setTimeout(() => { window.location.reload()})\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result_1.data.message})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log(`Error: ${error}`);\n                })\n            })\n        })\n    }\n}\n</script>"]}]}