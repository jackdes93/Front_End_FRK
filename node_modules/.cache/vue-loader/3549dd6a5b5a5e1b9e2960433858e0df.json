{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Units/Block_Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Units/Block_Search.vue","mtime":1569136463230},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { HTTP } from '../../http-common';\nimport { router } from '../../routers';\nexport default {\n    data() {\n        return {\n            customer: {},\n            city_show: false,\n            category_show: false,\n            readonly: true,\n            list_city: [],\n            city_choose: {_id: '', name: '-- Select City --'},\n            list_category: [],\n            category_choose: {_id: '', name: 'Choose Category'},\n            key_word: '',\n            search_result:[]\n        }\n    },\n    methods: {\n        handle_choose(state) {\n            switch(state) {\n                case 'CITY':\n                    this.city_show = !this.city_show\n                    break;\n                case 'CATEGORY':\n                    if(this.city_choose.name != '-- Select City --') {\n                        this.category_show = !this.category_show\n                    }\n                    break;\n            }\n        },\n        handle_select_city(i) {\n            this.city_choose = this.list_city[i]\n            this.city_show = false;\n        },\n        handle_select_category(i) {\n            this.category_show = false;\n            this.category_choose = this.list_category[i]\n            this.readonly = false\n        },\n        handle_search() {\n            return new Promise((resolve, reject) => {\n                HTTP.get('/brands/search-brand&category=' + this.category_choose.name + '&location=' + this.city_choose.name + '&key-word=' + this.key_word).then(result => {\n                    resolve(result)\n                    this.search_result = result.data.status == 200 ? result.data.data : []\n                })\n                .catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error)\n                })\n            })\n        },\n        handle_add_wish_list(id_brand, event) {\n            if(localStorage.getItem('access_token')) {\n                this.$store.dispatch('handle_add_wish_list', {id_brand: id_brand, id_customer: this.customer.id})\n                this.$store.dispatch('handle_update_brand_into_wish_list_customer', {id_brand: id_brand, id_customer: this.customer.id})\n                const object = event.target.parentElement.classList\n                object[0] == 'wish' ? object.add('wish-hover') : object.add('')\n            } else {\n                router.push('/login')\n            }\n        },\n    },\n    created() {\n        if(JSON.parse(localStorage.getItem('customer'))) {\n            this.customer = JSON.parse(localStorage.getItem('customer'))\n        }\n        this.$store.dispatch('get_cities').then(result => {\n            this.list_city = result.data\n        })\n\n        this.$store.dispatch('get_categories').then(result => {\n            this.list_category = result.data\n        })\n    }\n}\n",{"version":3,"sources":["Block_Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Block_Search.vue","sourceRoot":"src/components/Units","sourcesContent":["<template>\n    <div>\n        <div class=\"row search-bar flex-row-center\">\n            <div class=\"search-bar-wrap\">\n                <div class=\"bar-item\">\n                  <h3>Easy to browser your <i class=\"far fa-heart\"></i> brands</h3>\n                </div>\n                <div class=\"bar-item\">\n                    <div class=\"list-joining\" v-on:click=\"handle_choose('CITY')\">\n                        <span class=\"circle bg-title-header\"><i class=\"fas fa-map-marker-alt\"></i></span>\n                        <p class=\"text-name\">{{city_choose.name}}</p>\n                        <i class=\"fas fa-sort-down\"></i>\n                    </div>\n                    <ul class=\"list-city\" v-if=\"city_show\">\n                        <li class=\"item-city\" v-for=\"(city,i) in list_city\" :key=\"i\" v-on:click=\"handle_select_city(i)\">\n                            <p>{{city.name}}</p>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"bar-item\">\n                    <div class=\"list-joining not-active\" v-on:click=\"handle_choose('CATEGORY')\">\n                        <span class=\"circle bg-title-header\"><i class=\"fas fa-bookmark\" style=\"color: #FFF\"></i></span>\n                        <p class=\"title\">{{category_choose.name}}</p>\n                        <i class=\"fas fa-sort-down\"></i>\n                    </div>\n                    <ul class=\"list-city\" v-if=\"category_show\">\n                        <li class=\"item-city\" v-for=\"(category,i) in list_category\" :key=\"i\" v-on:click=\"handle_select_category(i)\">\n                            <p>{{category.name}}</p>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"bar-item\">\n                    <div class=\"list-joining not-active\">\n                        <input type=\"text\" class=\"title\" id=\"input_keyword\" style=\"width: 85%; padding-left: 25px; border:none; background: none;\" v-model=\"key_word\"  placeholder=\"keyword\" v-bind:readonly=\"readonly\">\n                        <span class=\"circle\" style=\"background: #FFF;\" v-on:click=\"handle_search\"><i class=\"fas fa-filter text-color-primarry\"></i></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"row block-products\" v-if=\"search_result.length > 0\">\n            <div class=\"list-joining row-header-block\">\n                <span class=\"field bg-title-header text-uppercase\"><i class=\"fas fa-crown\"></i>{{category_choose.name}}</span>\n                <span class=\"circle-small bg-title-header\"><i class=\"fas fa-chevron-right\"></i></span>\n            </div>\n            <div class=\"row-content\">\n                <div class=\"col-4 brand-item\" v-for=\"(item, index) in search_result\" :key=\"index\">\n                    <router-link to=\"/brand-normal\" style=\"color:#000;\">\n                        <div class=\"header-img flex-row-center\">\n                            <img v-bind:src=\"`./${item.image_source.thumbnail}`\" v-bind:alt=\"`${item.name}`\">\n                            <!-- <img v-bind:src=\"`http://localhost:4000/${item.image_source.thumbnail}`\" v-bind:alt=\"`${item.name}`\"> -->\n                        </div>\n                        <div class=\"introduct-brand\">\n                            <div class=\"title-wish\">\n                                <span class=\"text-brand\" >{{item.name}}</span>\n                                <span class=\"wish\" v-on:click=\"handle_add_wish_list(item.id, $event)\"><i class=\"far fa-heart\"></i></span>\n                            </div>\n                            <div class=\"intro-text\">{{item.introduce}}</div>\n                            <div class=\"price-text\">{{item.price.toLocaleString()}} <sup>Ä‘</sup></div>\n                        </div>\n                    </router-link>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { HTTP } from '../../http-common';\nimport { router } from '../../routers';\nexport default {\n    data() {\n        return {\n            customer: {},\n            city_show: false,\n            category_show: false,\n            readonly: true,\n            list_city: [],\n            city_choose: {_id: '', name: '-- Select City --'},\n            list_category: [],\n            category_choose: {_id: '', name: 'Choose Category'},\n            key_word: '',\n            search_result:[]\n        }\n    },\n    methods: {\n        handle_choose(state) {\n            switch(state) {\n                case 'CITY':\n                    this.city_show = !this.city_show\n                    break;\n                case 'CATEGORY':\n                    if(this.city_choose.name != '-- Select City --') {\n                        this.category_show = !this.category_show\n                    }\n                    break;\n            }\n        },\n        handle_select_city(i) {\n            this.city_choose = this.list_city[i]\n            this.city_show = false;\n        },\n        handle_select_category(i) {\n            this.category_show = false;\n            this.category_choose = this.list_category[i]\n            this.readonly = false\n        },\n        handle_search() {\n            return new Promise((resolve, reject) => {\n                HTTP.get('/brands/search-brand&category=' + this.category_choose.name + '&location=' + this.city_choose.name + '&key-word=' + this.key_word).then(result => {\n                    resolve(result)\n                    this.search_result = result.data.status == 200 ? result.data.data : []\n                })\n                .catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error)\n                })\n            })\n        },\n        handle_add_wish_list(id_brand, event) {\n            if(localStorage.getItem('access_token')) {\n                this.$store.dispatch('handle_add_wish_list', {id_brand: id_brand, id_customer: this.customer.id})\n                this.$store.dispatch('handle_update_brand_into_wish_list_customer', {id_brand: id_brand, id_customer: this.customer.id})\n                const object = event.target.parentElement.classList\n                object[0] == 'wish' ? object.add('wish-hover') : object.add('')\n            } else {\n                router.push('/login')\n            }\n        },\n    },\n    created() {\n        if(JSON.parse(localStorage.getItem('customer'))) {\n            this.customer = JSON.parse(localStorage.getItem('customer'))\n        }\n        this.$store.dispatch('get_cities').then(result => {\n            this.list_city = result.data\n        })\n\n        this.$store.dispatch('get_categories').then(result => {\n            this.list_category = result.data\n        })\n    }\n}\n</script>"]}]}