{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/Admin/Pages/ReportViewerBrand.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/Admin/Pages/ReportViewerBrand.vue","mtime":1580833529572},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Vue from 'vue'\nimport { HTTP_ADMIN } from '../../../../http-common';\nimport JsonExcel from 'vue-json-excel'\nimport datepicker from 'vuejs-datepicker';\n\nVue.component('download-excel', JsonExcel)\n\nexport default {\n    components: {datepicker},\n    data() {\n        return {\n            format: 'dd/MM/yyyy',\n            brands: [],\n            list_brand: [],\n            titles: [],\n            name_file: '',\n            json_fields: {\n                'OWNER' : 'owner',\n                'BRAND NAME' : 'brand_name',\n                'PRICE' : 'price',\n                'CATEGORY': 'category',\n                'BRAND TYPE' : 'level',\n                'VIEW': 'amount_viewer'\n            },\n            json_data: [],\n            date_from: '',\n            date_to: '',\n            disable_date_from : {\n                from: new Date(),\n                ranges: []\n            },\n            disable_date_to : {\n                from: new Date(),\n                ranges: []\n            },\n            selected_type: null,\n            data_report_brand: null,\n            is_have_brand: false,\n            search_text: '',\n            id_brand: ''\n        }\n    },\n    methods: {\n        handle_change() {\n            if(this.selected_type == 1) { \n                this.is_have_brand = true\n            } else {\n                this.is_have_brand = false\n            }\n            this.data_report_brand = []\n            this.json_data = []\n        },\n        handle_select_brand(brand) {\n            this.id_brand = brand.id\n            this.search_text = brand.name\n            this.is_have_brand = false\n        },\n        handle_get_brand_origin() {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get('/brands').then(result => {\n                    resolve(result)\n                    result.data.data.map(brand => {\n                        this.list_brand.push(brand)\n                    })\n                    \n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        handle_get_brand() {\n            return new Promise((resolve, reject) => {\n                const current_date = new Date()\n                const date_f = new Date(this.date_from)\n                const date_t = new Date(this.date_to)\n                HTTP_ADMIN.get(`/reports/view-brand&date-from=${date_f}&date-to=${date_t}`).then(result => {\n                    resolve(result)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                    this.titles.push('Summary Amount View Of Brand')\n                    this.name_file = `SUMMARY_VIEW_OF_BRAND_${current_date.getDate()}_${current_date.getMonth() + 1}_${current_date.getFullYear()}.xls`\n                    this.brands.map(item => {\n                        this.json_data.push({\n                            owner: item.owner_brand.full_name,\n                            brand_name: item.name_brand,\n                            category: item.id_category,\n                            price: item.price.toLocaleString(),\n                            level: item.level,\n                            amount_viewer : item.amount_viewer ? item.amount_viewer : 0\n                        })\n                    })\n                }).catch(error => {\n                    reject(error)\n                    console.log(error)\n                })\n            })\n        },\n        handle_date_visit_of_brand() {\n            return new Promise((resolve, reject) => {\n                const current_date = new Date()\n                const date_f = new Date(this.date_from)\n                const date_t = new Date(this.date_to)\n                HTTP_ADMIN.get(`/reports/${this.id_brand}/date-from=${date_f}&date-to=${date_t}`).then(result => {\n                    resolve(result)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                    this.titles.push('Summary Amount View Of Brand')\n                    this.name_file = `SUMMARY_VIEW_OF_BRAND_${this.search_text}_${current_date.getDate()}_${current_date.getMonth() + 1}_${current_date.getFullYear()}.xls`\n                    this.brands.map(item => {\n                        this.json_data.push({\n                            owner: item.owner_brand.full_name,\n                            brand_name: item.name_brand,\n                            category: item.id_category,\n                            price: item.price.toLocaleString(),\n                            level: item.level,\n                            amount_viewer : item.amount_viewer ? item.amount_viewer : 0\n                        })\n                    })\n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        handle_export() {\n            if(this.selected_type == 0 && this.date_from && this.date_to) {\n                this.handle_get_brand()\n            } else if(this.selected_type == 1 && this.id_brand.length > 0 && this.date_from && this.date_to) {\n                const current_date = new Date()\n                this.titles = []\n                this.handle_date_visit_of_brand()\n                this.name_file = `Summary_Brand_${this.search_text}_${current_date.getDate()}_${current_date.getMonth() + 1}_${current_date.getFullYear()}.xls`  \n            } else {\n                alert(`${this.$t('message_alert.please_fill')}`)\n            }\n        }\n    },\n    computed: {\n        list_brand_filter() {\n            return this.list_brand.filter(item => { return item.name.includes(this.search_text.toUpperCase()) ||  item.name.includes(this.search_text.toLowerCase())})\n        }\n    },\n    created() {\n        this.handle_get_brand_origin()\n    }\n}\n",{"version":3,"sources":["ReportViewerBrand.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReportViewerBrand.vue","sourceRoot":"src/components/Pages/Admin/Pages","sourcesContent":["<template>\n    <div class=\"flex-box padding-full block-custom-header\">\n        <div class=\"block-custom col-12 padding-fix-lr box-shadow margin-fix-right\" style=\"max-height: 700px; background: #EDEDED; padding-bottom: 32px;\">\n            <div class=\"block-header bg-title-header padding-full header-fix\">\n                <p class=\"title-form\">{{$t('top_view')}}</p>\n            </div>\n            <div class=\"form-group row-group\" style=\"justify-content: flex-end; position: relative\">\n                <div class=\"form-group col-group\" >\n                    <span class=\"label-span margin-bottom-fix\">{{$t('brand')}}</span>\n                    <select v-model=\"selected_type\" class=\"selection-brand\" style=\"max-width: 180px\" @change=\"handle_change()\">\n                        <option value=null>-- {{$t('select_type')}}--</option>\n                        <option value=\"0\">{{$t('manager.all_brand')}}</option>\n                        <option value=\"1\">{{$t('brand')}}</option>\n                    </select>\n                </div>\n                <div class=\"form-group col-group margin-fix-right\" v-if=\"selected_type == 1\">\n                    <span class=\"label-span margin-bottom-fix\">{{$t('user_page.brand_name')}}</span>\n                    <input type=\"text\" placeholder=\"Search....\" class=\"border-bottom-ol\" v-model=\"search_text\" style=\"height: 48px\" v-on:click=\"is_have_brand = true\">\n                </div>\n                <div class=\"form-group col-group\" v-if=\"list_brand_filter.length > 0 && is_have_brand\" style=\"max-height: 280px; position: absolute; top: 76px; left: 380px;\">\n                    <ul class=\"list-city\" >\n                        <li class=\"item-city\" v-for=\"(brand,i) in list_brand_filter\" :key=\"i\" v-on:click=\"handle_select_brand(brand)\">\n                            <p>{{brand.name}}</p>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"form-group col-group margin-fix-right\">\n                    <span class=\"label-span margin-bottom-fix\">{{$t('date_from')}}</span>\n                    <datepicker :placeholder=\"`${this.$t('date_from')}`\" class=\"date_picker\" style=\"justify-content: flex-start\" :disabled-dates=\"disable_date_from\"  :format=\"format\"  v-model=\"date_from\"></datepicker>\n                </div>\n                <div class=\"form-group col-group margin-fix-right\">\n                    <span class=\"label-span margin-bottom-fix\">{{$t('date_to')}}</span>\n                    <datepicker :placeholder=\"`${this.$t('date_to')}`\" class=\"date_picker\" style=\"justify-content: flex-start\" :disabled-dates=\"disable_date_to\" :format=\"format\" v-model=\"date_to\"></datepicker>\n                </div>\n                <div class=\"form-group row-group\" style=\"max-width:160px; margin-top: 24px; \">\n                    <span class=\"label-span margin-bottom-fix\"></span>\n                    <button class=\"btn btn-sign-up\" v-on:click=\"handle_export()\">{{$t('export')}}</button>\n                </div>\n                \n            </div>\n            <div class=\"form-group row-group\" style=\"justify-content: flex-end\">\n                <download-excel\n                    :data= \"json_data\" \n                    :title= \"titles\"\n                    :fields = \"json_fields\"\n                    worksheet = \"all_brand\"\n                    :name = \"name_file\"\n                    class=\"btn-dwn-report text-color-primarry\" style=\"max-width:168px!important;\">\n                    {{$t('report.download_report')}}\n                    <span><i class=\"fas fa-print\"></i></span>\n                </download-excel>\n            </div>\n            <div class=\"form-group row-group width-full\">\n                <div class=\"form-group row-group width-full\">\n                    <div class=\"block-list-row width-full padding-full border-bottom-ol\">\n                        <div class=\"block-item-row-header margin-fix-right\" style=\"max-width: 64px; width: 64px; justify-content: center;\">\n                            <p class=\"label text-color-second \">{{$t('report.rank')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 160px; margin: 0 8px;\">\n                            <p class=\"label text-color-second \">{{$t('report.owner')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 220px;\">\n                            <p class=\"label text-color-second \">{{$t('user_page.brand_name')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 200px;\">\n                            <p class=\"label text-color-second \">{{$t('price')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\">\n                            <p class=\"label text-color-second \">{{$t('form_joining.category')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"width: 200px; flex: none;\">\n                            <p class=\"label text-color-second\" style=\"text-align:left;\">{{$t('report.brand_type')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"display: flex; justify-content: center;\">\n                            <p class=\"label text-color-second\" style=\"text-align: left\">{{$t('view')}}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"form-group padding-full flex-row-center\" v-if=\"brands.length == 0\">\n                <span class=\"label-cell\">{{$t('nodata')}}</span>\n            </div>\n            <div class=\"form-group col-group\" style=\"padding: 0 8px 16px 8px; max-height: 700px; overflow: auto;\">\n                <div class=\"form-group border-bottom-ol padding-full row-animation\" style=\"align-items: center;\" v-for=\"(item,index) in brands\" :key=\"index\">\n                    <div class=\"block-item-row logo-brand margin-fix-right\" style=\"width: 64px; border: none;\">\n                        <p class=\"label text-color-second\">{{index + 1}}</p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 160px; margin: 0 8px;\">\n                        <p class=\"label-cell\">{{item.owner_brand.full_name}}</p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 220px;\">\n                        <a class=\"label-cell width-full\" style=\"font-size: 16px;\" v-bind:href=\"`/#/brand/${item._id}`\">{{item.name_brand}}</a>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 200px;\">\n                        <p class=\"label-cell bold\">{{item.price.toLocaleString() }} <sup>Ä‘</sup></p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 360px; margin-right: 8px;\">\n                        <p class=\"label-cell text-overflow\" >{{item.id_category}}</p>\n                    </div>\n                    <div class=\"block-item-row\">\n                        <p class=\"label-cell\">{{item.level}}</p>\n                    </div>\n                    <div class=\"block-item-row\" style=\"display: flex; justify-content: center;\">\n                        <p class=\"label text-color-second\">{{item.amount_viewer ? item.amount_viewer : 0}}</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { HTTP_ADMIN } from '../../../../http-common';\nimport JsonExcel from 'vue-json-excel'\nimport datepicker from 'vuejs-datepicker';\n\nVue.component('download-excel', JsonExcel)\n\nexport default {\n    components: {datepicker},\n    data() {\n        return {\n            format: 'dd/MM/yyyy',\n            brands: [],\n            list_brand: [],\n            titles: [],\n            name_file: '',\n            json_fields: {\n                'OWNER' : 'owner',\n                'BRAND NAME' : 'brand_name',\n                'PRICE' : 'price',\n                'CATEGORY': 'category',\n                'BRAND TYPE' : 'level',\n                'VIEW': 'amount_viewer'\n            },\n            json_data: [],\n            date_from: '',\n            date_to: '',\n            disable_date_from : {\n                from: new Date(),\n                ranges: []\n            },\n            disable_date_to : {\n                from: new Date(),\n                ranges: []\n            },\n            selected_type: null,\n            data_report_brand: null,\n            is_have_brand: false,\n            search_text: '',\n            id_brand: ''\n        }\n    },\n    methods: {\n        handle_change() {\n            if(this.selected_type == 1) { \n                this.is_have_brand = true\n            } else {\n                this.is_have_brand = false\n            }\n            this.data_report_brand = []\n            this.json_data = []\n        },\n        handle_select_brand(brand) {\n            this.id_brand = brand.id\n            this.search_text = brand.name\n            this.is_have_brand = false\n        },\n        handle_get_brand_origin() {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get('/brands').then(result => {\n                    resolve(result)\n                    result.data.data.map(brand => {\n                        this.list_brand.push(brand)\n                    })\n                    \n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        handle_get_brand() {\n            return new Promise((resolve, reject) => {\n                const current_date = new Date()\n                const date_f = new Date(this.date_from)\n                const date_t = new Date(this.date_to)\n                HTTP_ADMIN.get(`/reports/view-brand&date-from=${date_f}&date-to=${date_t}`).then(result => {\n                    resolve(result)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                    this.titles.push('Summary Amount View Of Brand')\n                    this.name_file = `SUMMARY_VIEW_OF_BRAND_${current_date.getDate()}_${current_date.getMonth() + 1}_${current_date.getFullYear()}.xls`\n                    this.brands.map(item => {\n                        this.json_data.push({\n                            owner: item.owner_brand.full_name,\n                            brand_name: item.name_brand,\n                            category: item.id_category,\n                            price: item.price.toLocaleString(),\n                            level: item.level,\n                            amount_viewer : item.amount_viewer ? item.amount_viewer : 0\n                        })\n                    })\n                }).catch(error => {\n                    reject(error)\n                    console.log(error)\n                })\n            })\n        },\n        handle_date_visit_of_brand() {\n            return new Promise((resolve, reject) => {\n                const current_date = new Date()\n                const date_f = new Date(this.date_from)\n                const date_t = new Date(this.date_to)\n                HTTP_ADMIN.get(`/reports/${this.id_brand}/date-from=${date_f}&date-to=${date_t}`).then(result => {\n                    resolve(result)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                    this.titles.push('Summary Amount View Of Brand')\n                    this.name_file = `SUMMARY_VIEW_OF_BRAND_${this.search_text}_${current_date.getDate()}_${current_date.getMonth() + 1}_${current_date.getFullYear()}.xls`\n                    this.brands.map(item => {\n                        this.json_data.push({\n                            owner: item.owner_brand.full_name,\n                            brand_name: item.name_brand,\n                            category: item.id_category,\n                            price: item.price.toLocaleString(),\n                            level: item.level,\n                            amount_viewer : item.amount_viewer ? item.amount_viewer : 0\n                        })\n                    })\n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        handle_export() {\n            if(this.selected_type == 0 && this.date_from && this.date_to) {\n                this.handle_get_brand()\n            } else if(this.selected_type == 1 && this.id_brand.length > 0 && this.date_from && this.date_to) {\n                const current_date = new Date()\n                this.titles = []\n                this.handle_date_visit_of_brand()\n                this.name_file = `Summary_Brand_${this.search_text}_${current_date.getDate()}_${current_date.getMonth() + 1}_${current_date.getFullYear()}.xls`  \n            } else {\n                alert(`${this.$t('message_alert.please_fill')}`)\n            }\n        }\n    },\n    computed: {\n        list_brand_filter() {\n            return this.list_brand.filter(item => { return item.name.includes(this.search_text.toUpperCase()) ||  item.name.includes(this.search_text.toLowerCase())})\n        }\n    },\n    created() {\n        this.handle_get_brand_origin()\n    }\n}\n</script>"]}]}