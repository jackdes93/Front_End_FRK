{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/Admin/Units/NavLeft.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/Admin/Units/NavLeft.vue","mtime":1583910567657},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { router } from '../../../../routers';\nimport { HTTP_ADMIN} from '../../../../http-common'\nimport { socket_bus } from '../../../../main'\n\nexport default {\n    data() {\n        return {\n            manager: {},\n            avatar: '',\n            is_show: false,\n            url_preview: ''\n        }\n    },\n    methods: {\n        handle_logout() {\n            localStorage.removeItem('token_manager')\n            router.push('/manager-login')\n        },\n        handle_upload() {\n            this.is_show = true\n            this.url_preview = this.manager.avatar\n        },\n        handleFileUpload(e) {\n            this.url_preview = []\n            var files = e.target.files || e.dataTransfer.files;\n            if (!files.length)\n                return;\n            this.avatar = files[0]\n            this.url_preview = URL.createObjectURL(files[0]);\n        },\n        handle_upload_image() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.manager.id)\n            data_form.append(\"avatar\", this.avatar)\n                \n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/admin/upload-avatar/' + this.manager.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: 'Change Avatar Success'})\n                        this.handle_get_new_info(this.manager.id)\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: 'Change Avatar Fail'})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_no_accept() {\n            this.is_show = false\n        },\n        handle_accept() {\n            this.handle_upload_image()\n        },\n        handle_get_new_info(id) {\n            console.log(id)\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get(`/admin/${this.manager.id}`).then(result => {\n                    resolve(result)\n                    this.manager = result.data.data\n                    this.is_show = false\n                    localStorage.setItem('manager', JSON.stringify(this.manager))\n                    setTimeout(() => { window.location.reload()}, 1500)\n                }).catch(error => {\n                    reject(error)\n                    console.log(`Error: ${error}`);\n                })\n            })\n        }\n    },\n    created() {\n        if(JSON.parse(localStorage.getItem('manager'))) {\n            this.manager = JSON.parse(localStorage.getItem('manager'))\n        }\n    }\n\n}\n",{"version":3,"sources":["NavLeft.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"NavLeft.vue","sourceRoot":"src/components/Pages/Admin/Units","sourcesContent":["<template>\n   <div class=\"flex-box block-left-menu gray-bg\" style=\"z-index: 9; position: fixed; top: 80px; left: 0; height:0;\">\n        <div class=\"flex-box block-info padding-full\" style=\"padding-top: 16px;\">\n            <div class=\"flex-box circle-avatar margin-fix-right\" style=\"position: relative\">\n                <img :src=\"`http://franchiseking.vn/${manager.avatar}`\" :alt=\"`${manager.id}`\">\n                <span class=\"action-edit\" v-on:click=\"handle_upload()\"><i class=\"fas fa-edit\"></i></span>\n            </div>\n            <div class=\"flex-box block-content\" >\n                <p class=\"label title-form text-uppercase bold margin-bottom-fix\" style=\"font-size: 18px;\">{{manager.full_name}}</p>\n                <div class=\"form-group flex-row-center\" style=\"margin-top: 8px; background: none;\" v-on:click=\"handle_logout\">\n                    <a class=\"label-cell text-color-second sm-size\">{{$t('user_page.logout')}}</a>\n                </div>\n            </div>\n        </div>\n        <div class=\"block-model\" style=\"background: rgba(0, 0, 0, .4)\" v-if=\"is_show\">\n            <div class=\"block-alert animation-transform-scale padding-full\" style=\"width: 320px\">\n                <div class=\"form-group box-header\">\n                    <p class=\"text-center label text-uppercase\" style=\"font-size: 20px;\">{{$t('avatar_upload')}}</p>\n                </div>\n                <div class=\"form-group.col-group margin-bottom\">\n                    <ValidationProvider name=\"avatar\" rules=\"required\" v-slot=\"{ errors }\" style=\"width: 100%;\">\n                        <input type=\"file\" name=\"avatar\" ref=\"avatar\"  v-on:change=\"handleFileUpload\" accept=\"image/jpeg, image/x-png\">\n                        <span class=\"error-text margin-fix-top\" >{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class=\"form-group row-group\">\n                    <div class=\"form-group margin-bottom margin-fix-right\" style=\"max-height: 120px\" >\n                        <img v-bind:src=\"url_preview\" style=\"width: 100%; height: auto; object-fit: contain;\">\n                    </div>\n                </div>\n                <div class=\"form-group row-group flex-row-center\" style=\"justify-content: center; margin-top: 16px;\">\n                    <div class=\"btn btn-sign-up margin-fix-right\" style=\"width: 25%\" v-on:click=\"handle_no_accept()\">Cancel</div>\n                    <button class=\"btn btn-sign-up primary-color\" style=\"color:#FFF; width: 25%\" @click=\"handle_accept\">OK</button>\n                </div>\n            </div>\n        </div>\n        <br>\n        <span class=\"line-separate\"></span>\n        <div class=\" flex-box block-list padding-full\" style=\"min-height: 72%;\">\n            <div class=\" flex-box block-item margin-bottom\">\n                <div class=\"flex-box block-item-header\">\n                    <span class=\"icon\"><i class=\"fas fa-cogs\"></i></span>\n                    <p class=\"label text-uppercase bold\">{{$t('manager.systems')}}</p>\n                </div>\n                <div class=\"flex-box block-list flex-left\" style=\"padding-left: 36px\">\n                    <div class=\"block-item flex-left margin-bottom-fix flex-row\">\n                        <router-link to=\"/manager/admin-list\" class=\"label-cell black sm-size\">{{$t('manager.ad_ma')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix flex-row\">\n                        <router-link to=\"/manager/menu-editor\" class=\"label-cell black sm-size\">{{$t('form_joining.category')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix flex-row\">\n                        <router-link to=\"/manager/fqa-management\" class=\"label-cell black sm-size\">{{$t('manager.fqa_manager')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix flex-row\">\n                        <router-link to=\"/manager/support-center\" class=\"label-cell black sm-size\">{{$t('manager.support_center')}}</router-link>\n                    </div>\n                     <div class=\"block-item flex-left margin-bottom-fix flex-row\">\n                        <router-link to=\"/manager/settings\" class=\"label-cell black sm-size\">{{$t('manager.support_code_setting')}}</router-link>\n                    </div>\n                </div>\n            </div>\n            <div class=\" flex-box block-item margin-bottom\">\n                <div class=\"flex-box block-item-header\">\n                    <span class=\"icon\"><i class=\"fas fa-user-cog\"></i></span>\n                    <p class=\"label text-uppercase bold\">{{$t('manager.user')}}</p>\n                </div>\n                <div class=\"flex-box block-list flex-left\" style=\"padding-left: 36px\">\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/manager/user-list\" class=\"label-cell black sm-size\">{{$t('manager.user_list')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/manager/brand-list\" class=\"label-cell black sm-size\">{{$t('manager.brand_list')}}</router-link>\n                    </div>\n                </div>\n            </div>\n            <div class=\" flex-box block-item margin-bottom\">\n                <div class=\"flex-box block-item-header\">\n                    <span class=\"icon\"><i class=\"fas fa-bullhorn\"></i></span>\n                    <p class=\"label text-uppercase bold\">{{$t('manager.adv')}} </p>\n                </div>\n                <div class=\"flex-box block-list flex-left\" style=\"padding-left: 36px\">\n                     <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/manager/advertisement-type\" class=\"label-cell black sm-size\">{{$t('manager.adv_type')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/manager/advertising-wait-list\" class=\"label-cell black sm-size\">{{$t('manager.adv_wait')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/manager/advertising-stop-list\" class=\"label-cell black sm-size\">{{$t('manager.advertisement_stop')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/manager/advertising-list\" class=\"label-cell black sm-size\">{{$t('user_page.advertisement_list')}}</router-link>\n                    </div>\n                </div>\n            </div>\n            <div class=\" flex-box block-item margin-bottom\">\n                <div class=\"flex-box block-item-header\">\n                    <span class=\"icon\"><i class=\"fas fa-chart-area\"></i></span>\n                    <p class=\"label text-uppercase bold\">{{$t('manager.report')}} </p>\n                </div>\n                <div class=\"flex-box block-list flex-left\" style=\"padding-left: 36px\">\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/manager/report-view-brand\" class=\"label-cell black sm-size\">{{$t('manager.visit')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/manager/report-call-back\" class=\"label-cell black sm-size\">{{$t('manager.request_call')}}</router-link>\n                    </div>\n                    <div class=\"block-item flex-left margin-bottom-fix\">\n                        <router-link to=\"/manager/report-wish-brand\" class=\"label-cell black sm-size\">{{$t('manager.wish')}}</router-link>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <div class=\"flex-box flex-col-center padding-full\" style=\"background: #EEE; bottom: 0;\">\n            <p class=\"label-cell sm-size text-center\">2019 &copy; Franchise King <i class=\"fas fa-bolt text-color-primarry\"></i> Brave Cat</p>\n        </div>\n    </div>\n</template>\n<style> \n.action-edit { display: block; position: absolute; bottom: 8px; right: 0;}\n.action-edit .fa-edit { display: none}\n.circle-avatar:hover .action-edit .fa-edit { display: block; color: #2A2A2A;}\n</style>\n<script>\nimport { router } from '../../../../routers';\nimport { HTTP_ADMIN} from '../../../../http-common'\nimport { socket_bus } from '../../../../main'\n\nexport default {\n    data() {\n        return {\n            manager: {},\n            avatar: '',\n            is_show: false,\n            url_preview: ''\n        }\n    },\n    methods: {\n        handle_logout() {\n            localStorage.removeItem('token_manager')\n            router.push('/manager-login')\n        },\n        handle_upload() {\n            this.is_show = true\n            this.url_preview = this.manager.avatar\n        },\n        handleFileUpload(e) {\n            this.url_preview = []\n            var files = e.target.files || e.dataTransfer.files;\n            if (!files.length)\n                return;\n            this.avatar = files[0]\n            this.url_preview = URL.createObjectURL(files[0]);\n        },\n        handle_upload_image() {\n            const data_form = new FormData();\n            data_form.append(\"name\", this.manager.id)\n            data_form.append(\"avatar\", this.avatar)\n                \n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.post('/admin/upload-avatar/' + this.manager.id, data_form, {\n                    headers: {\n                        'Content-Type' : 'multipart/form-data'\n                    }\n                }).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: 'Change Avatar Success'})\n                        this.handle_get_new_info(this.manager.id)\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: 'Change Avatar Fail'})\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_no_accept() {\n            this.is_show = false\n        },\n        handle_accept() {\n            this.handle_upload_image()\n        },\n        handle_get_new_info(id) {\n            console.log(id)\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get(`/admin/${this.manager.id}`).then(result => {\n                    resolve(result)\n                    this.manager = result.data.data\n                    this.is_show = false\n                    localStorage.setItem('manager', JSON.stringify(this.manager))\n                    setTimeout(() => { window.location.reload()}, 1500)\n                }).catch(error => {\n                    reject(error)\n                    console.log(`Error: ${error}`);\n                })\n            })\n        }\n    },\n    created() {\n        if(JSON.parse(localStorage.getItem('manager'))) {\n            this.manager = JSON.parse(localStorage.getItem('manager'))\n        }\n    }\n\n}\n</script>"]}]}