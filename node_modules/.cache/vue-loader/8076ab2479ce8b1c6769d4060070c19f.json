{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Units/Block_Brand.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Units/Block_Brand.vue","mtime":1577438134460},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { HTTP } from '../../http-common';\nimport { router } from '../../routers';\nexport default {\n    data() {\n        return {\n            brands: [],\n            wish_list_current: [],\n            customer: {}\n        }\n    },\n    methods: {\n        handle_translate(name) {\n            var result = ''\n            switch(name) {\n                case 'Drink':\n                    result = this.$t('drink')\n                    break;\n                case 'Dessert':\n                    result = this.$t('dessert')\n                    break;\n                case 'Vietnamese Foods':\n                    result = this.$t('vn_food')\n                    break;\n                case 'Foriegn Foods':\n                    result = this.$t('foriegn_fd')\n                    break;\n                case 'BBQ':\n                    result = this.$t('bbq')\n                    break;\n                case 'Brunch':\n                    result = this.$t('brunch')\n                    break;\n                case 'Hot Pot':\n                    result = this.$t('hotpot')\n                    break;\n            }\n            return result;\n        },\n        handle_get_brand_by_category() {\n            return new Promise((resolve, reject) => {\n                HTTP.get('/brands/brand-by-category').then(result => {\n                    resolve(result.data)\n                    this.brands = result.data.data\n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        handle_return_string_money(text) {\n            const length = text.length\n            if(length > 6) {\n                return text.substr(0, text.length - 6) \n            } else if(length == 6) {\n                return '0.' + text.substr(0, 1)\n            }\n        },\n        handle_check_wish_list(id_brand) {\n            return this.wish_list_current.indexOf(id_brand) == -1 ? false : true\n        },\n        handle_add_wish_list(brand) {\n            var brand_wish = document.getElementById(brand._id)\n            var element_first = brand_wish.children[0]\n            if(localStorage.getItem('access_token')) {\n                if(element_first.checked) {\n                    HTTP.patch(`/wish/remove-user/brand=${brand._id}&customer=${this.customer.id}`).then(result => {\n                        alert(result.data.message)\n                        if(result.data.status == 200) {\n                            window.location.reload()\n                            element_first.checked = false\n                            brand_wish.children[1].style.color = '#F3A8B7'\n                        }                       \n                    }).catch(error => {\n                        console.log('Error: ' + error);\n                    })\n                } else if(!element_first.checked){\n                    HTTP.patch('/wish/' + brand._id, {id_customer: this.customer.id}).then(result => {\n                        setTimeout(() => { alert(result.data.message)}, 100)\n                        if(result.data.status == 200) {\n                            window.location.reload()\n                            element_first.checked = true\n                            this.brand = brand\n                        }\n                    })\n                    .catch(error => {\n                        console.log('Error: ' + error);\n                    })\n                }\n            } else {\n                router.push('/login')\n            }\n        },\n        handle_get_wish_list(id_customer) {\n            HTTP.get('/customers/' + id_customer).then(result => {\n                localStorage.removeItem('customer')\n                localStorage.setItem('customer', JSON.stringify(result.data))\n                this.customer = result.data\n                this.wish_list_current = result.data.wish_list\n                this.wish_list_current.map(item => { this.is_wish_list = item == this.id_brand ? true : false })  \n            }).catch(error => {\n                console.log(error)\n            }) \n        }\n    },\n    created() {\n        this.handle_get_brand_by_category()\n         if(JSON.parse(localStorage.getItem('customer'))) {\n            this.customer = JSON.parse(localStorage.getItem('customer'))\n            this.handle_get_wish_list(this.customer.id)\n        }\n    }\n}\n",{"version":3,"sources":["Block_Brand.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Block_Brand.vue","sourceRoot":"src/components/Units","sourcesContent":["<template>\n    <div>\n        <div class=\"row\" v-for=\"(category, index) in brands\" :key=\"index\">\n            <div class=\"block-products\" v-if=\"category.brands.length > 0\">\n                <div class=\"list-joining row-header-block\" >\n                    <span class=\"field bg-title-header text-uppercase\"><i class=\"fas fa-crown\"></i>{{handle_translate(category.category)}}</span>\n                    <span class=\"circle-small bg-title-header\"><i class=\"fas fa-chevron-right\"></i></span>\n                </div>\n                <div class=\"row-content row-brands\">\n                    <div class=\"col-4 \" v-for=\"(brand, i) in category.brands\" :key=\"i\"  >\n                        <div class=\"brand-item\">\n                            <router-link :to=\"{path: `/brand/${brand._id}`}\" class=\"logo-brand-home\" style=\"color:#000; width: 100%;\">\n                                <div class=\"header-img flex-row-center\">\n                                    <img  v-bind:src=\"`${brand.image_source.logo}`\" v-bind:alt=\"brand.name\">\n                                    <div class=\"label-circle-front\" v-if=\"brand.hotlabel\">\n                                        <i class=\"fas fa-fire-alt\" style=\"margin: 0\"></i>\n                                        <span class=\"text-uppercase\" style=\"font-weight: bold;\">Hot</span>\n                                    </div>\n                                </div>\n                            </router-link>\n                            <div class=\"introduct-brand\">\n                                <div class=\"form-group row-group\">\n                                    <h4 class=\"name-brand text-uppercase\">{{brand.name}}</h4>\n                                    <span class=\"box-shadow wish \" :id=\"`${brand._id}`\" v-on:click=\"handle_add_wish_list(brand)\"> \n                                        <input class=\"toogle-heart\" type=\"checkbox\"  :checked=\"handle_check_wish_list(brand._id)\" />\n                                        <label class=\"label-toogle-heart\" >❤</label>\n                                    </span>\n                                </div>\n                                <div class=\"price-text\" v-if=\"brand.price != 0\">{{brand.price.toLocaleString()}} <sup>đ</sup></div>\n                                <div class=\"price-text\" v-else>Contact Us</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-4\" style=\"padding-top: 10px; flex: 1; max-width: 360px;\" v-if=\"category.joiningdemands.length > 0\">\n                        <div class=\"list-joining header-block-product row-header\">\n                            <span class=\"circle\"><i class=\"fas fa-bolt text-color-primarry\"></i></span>\n                            <p class=\"title-header text-uppercase\" style=\"padding-right: 5px; font-size: .82em;\">{{$t('last_joining')}}</p>\n                        </div>\n                        <div class=\"list-item\" style=\"overflow: hidden\">\n                            <div class=\"list-joining\" v-for=\"(joining, a) in category.joiningdemands\" :key=\"a\">\n                                <p class=\"text-overflow text-description padding-left\">{{joining.sex}}:{{joining.name}} | {{$t('ask')}}: {{handle_translate(joining.category)}} | {{$t('brand_info.budget')}}: {{handle_return_string_money(joining.budget.from.toString())}} {{$t('million')}} -> {{handle_return_string_money(joining.budget.to.toString())}} {{$t('million')}}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { HTTP } from '../../http-common';\nimport { router } from '../../routers';\nexport default {\n    data() {\n        return {\n            brands: [],\n            wish_list_current: [],\n            customer: {}\n        }\n    },\n    methods: {\n        handle_translate(name) {\n            var result = ''\n            switch(name) {\n                case 'Drink':\n                    result = this.$t('drink')\n                    break;\n                case 'Dessert':\n                    result = this.$t('dessert')\n                    break;\n                case 'Vietnamese Foods':\n                    result = this.$t('vn_food')\n                    break;\n                case 'Foriegn Foods':\n                    result = this.$t('foriegn_fd')\n                    break;\n                case 'BBQ':\n                    result = this.$t('bbq')\n                    break;\n                case 'Brunch':\n                    result = this.$t('brunch')\n                    break;\n                case 'Hot Pot':\n                    result = this.$t('hotpot')\n                    break;\n            }\n            return result;\n        },\n        handle_get_brand_by_category() {\n            return new Promise((resolve, reject) => {\n                HTTP.get('/brands/brand-by-category').then(result => {\n                    resolve(result.data)\n                    this.brands = result.data.data\n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        handle_return_string_money(text) {\n            const length = text.length\n            if(length > 6) {\n                return text.substr(0, text.length - 6) \n            } else if(length == 6) {\n                return '0.' + text.substr(0, 1)\n            }\n        },\n        handle_check_wish_list(id_brand) {\n            return this.wish_list_current.indexOf(id_brand) == -1 ? false : true\n        },\n        handle_add_wish_list(brand) {\n            var brand_wish = document.getElementById(brand._id)\n            var element_first = brand_wish.children[0]\n            if(localStorage.getItem('access_token')) {\n                if(element_first.checked) {\n                    HTTP.patch(`/wish/remove-user/brand=${brand._id}&customer=${this.customer.id}`).then(result => {\n                        alert(result.data.message)\n                        if(result.data.status == 200) {\n                            window.location.reload()\n                            element_first.checked = false\n                            brand_wish.children[1].style.color = '#F3A8B7'\n                        }                       \n                    }).catch(error => {\n                        console.log('Error: ' + error);\n                    })\n                } else if(!element_first.checked){\n                    HTTP.patch('/wish/' + brand._id, {id_customer: this.customer.id}).then(result => {\n                        setTimeout(() => { alert(result.data.message)}, 100)\n                        if(result.data.status == 200) {\n                            window.location.reload()\n                            element_first.checked = true\n                            this.brand = brand\n                        }\n                    })\n                    .catch(error => {\n                        console.log('Error: ' + error);\n                    })\n                }\n            } else {\n                router.push('/login')\n            }\n        },\n        handle_get_wish_list(id_customer) {\n            HTTP.get('/customers/' + id_customer).then(result => {\n                localStorage.removeItem('customer')\n                localStorage.setItem('customer', JSON.stringify(result.data))\n                this.customer = result.data\n                this.wish_list_current = result.data.wish_list\n                this.wish_list_current.map(item => { this.is_wish_list = item == this.id_brand ? true : false })  \n            }).catch(error => {\n                console.log(error)\n            }) \n        }\n    },\n    created() {\n        this.handle_get_brand_by_category()\n         if(JSON.parse(localStorage.getItem('customer'))) {\n            this.customer = JSON.parse(localStorage.getItem('customer'))\n            this.handle_get_wish_list(this.customer.id)\n        }\n    }\n}\n</script>"]}]}