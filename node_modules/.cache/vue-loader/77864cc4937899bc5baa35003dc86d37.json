{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/User/ui_user/CreateNewAdvertisement.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/User/ui_user/CreateNewAdvertisement.vue","mtime":1578166530907},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.date_picker { display: flex; flex-direction: column; justify-content: flex-end; width: 100%; height: 36px !important;}\n.date_picker input { height: 38px;}\n.date_picker > .header { height: 20px !important;}\n",{"version":3,"sources":["CreateNewAdvertisement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA","file":"CreateNewAdvertisement.vue","sourceRoot":"src/components/Pages/User/ui_user","sourcesContent":["<template>\n    <div class=\"block-model\" style=\"background: rgba(0,0,0,.5)\" v-if=\"is_add\">\n        <div class=\"block-alert padding-full\" style=\"max-height: 600px\">\n            <div class=\"block-header bg-title-header padding-full header-fix width-full\">\n                <p class=\"title-form\">{{$t('user_page.adv_brand')}}</p>\n            </div>\n            <form class=\"block-form\" style=\"padding: 8px 16px!important; width: 85%; overflow: auto;\" @submit.prevent=\"handle_create_advertisement\">\n                <div class=\"form-group row-group\" style=\"align-items: center;\">\n                    <div class=\"form-group col-group margin-fix-right\">\n                        <span class=\"label-span margin-bottom\">{{$t('brand')}}</span>\n                        <select name=\"category\"  class=\"list-joining\" v-model=\"new_adv.id_brand\">\n                            <option value=\"\" selected>-- {{$t('brand')}} --</option>\n                            <option v-bind:value=\"item.id\" v-for=\"(item, index) in brands\" :key=\"index\">{{item.name}}</option>\n                        </select>\n                    </div>\n                    <div class=\"form-group col-group margin-fix-right\">\n                        <span class=\"label-span margin-bottom\">{{$t('manager.adv_type')}} (1)</span>\n                        <select name=\"category\"  class=\"list-joining\" v-model=\"selected_advertising_type\" true-value=\"item\" false-value=\"null\" @change=\"handle_choose_type\">\n                            <option value=null selected>-- {{$t('manager.adv_type')}} --</option>\n                            <option v-bind:value=\"item\" v-for=\"(item, index) in adver_type\" :key=\"index\">{{item.name}}</option>\n                        </select>\n                    </div>\n                    <div class=\"form-group col-group\" v-if=\"!is_hotlabel\" >\n                        <span class=\"label-span margin-bottom\">{{$t('page')}}</span>\n                        <select name=\"page\"  class=\"list-joining\" v-model=\"selected_page\" true-value=\"item\" false-value=\"null\" :disabled=\"selected_advertising_type == null\" @change=\"handle_choose_page\">\n                            <option value=null selected>-- {{$t('select_page')}} --</option>\n                            <option v-bind:value=\"item\" v-for=\"(item, index) in pages\" :key=\"index\">{{item}}</option>\n                        </select>\n                    </div>\n                    <span class=\"label-span\" v-on:click=\"handle_preview('')\" v-if=\"is_preview_hotlabel\"><i class=\"far fa-eye\" style=\"color:#000\"></i></span>\n                </div>\n                <div class=\"form-group col-group\" v-if=\"options.length != 0 && !is_hotlabel\">\n                    <span class=\"label-span\">Options: (2)</span>\n                    <div class=\"form-group col-group padding-full\" style=\"max-height: 200px; overflow: scroll;\">\n                        <div class=\"form-group col-group\" v-for=\"(item, index) in options\" :key=\"index\">\n                            <div class=\"form-group row-group\">\n                                <input style=\"width: 40px;\" type=\"radio\" name=\"option\" v-model=\"option\" :value=\"item\" @change=\"handle_check\">\n                                <span class=\"label-span margin-fix-right text-overflow\">{{item.position}}</span>\n                                <p class=\"label-span\" style=\"width: 120px;\"> + {{item.bonus.toLocaleString()}} <sup>đ</sup> </p>\n                                <span class=\"label-span margin-fix-left\" v-on:click=\"handle_preview(item)\" ><i class=\"far fa-eye\" style=\"color:#000\"></i></span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"block-model\" style=\"background: rgba(0,0,0,.5)\" v-if=\"is_preview\">\n                    <div class=\"block-alert padding-full\" style=\"max-width: 840px;\">\n                        <div class=\"block-header bg-title-header padding-full header-fix width-full\">\n                            <p class=\"title-form\">{{$t('preview_adv')}}</p>\n                        </div>\n                        <div class=\"form-group col-group\">\n                            <img :src=\"`${image_preview}`\" style=\"border-radius: 4px;\">\n                        </div>\n                        <div class=\"form-group row-group margin-bottom\" style=\"margin-top: 16px; justify-content: center\">\n                            <div class=\"btn btn-cancel margin-fix-right\" style=\"color: #ED6B28; border: 1px solid #ED6B28\" v-on:click=\"is_preview = false\">{{$t('cancel')}}</div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"form-group row-group\">\n                    <div class=\"form-group col-group margin-fix-right\">\n                        <span class=\"label-span margin-bottom\">{{$t('user_page.adver_time')}} (3)</span>\n                        <select name=\"category\"  class=\"list-joining\" v-model=\"new_adv.adversiting_time\" @change=\"handle_cal_price\">\n                            <option value=\"0\" selected>-- {{$t('select_time')}}  --</option>\n                            <option v-bind:value=\"item.value\" v-for=\"(item, index) in times\" :key=\"index\">{{item.name}}</option>\n                        </select>\n                    </div>\n                    <div class=\"form-group col-group margin-fix-right \">\n                        <span class=\"label-span margin-bottom\">{{$t('date_start')}}</span>\n                        <datepicker :placeholder=\"`${$t('date_start')}`\" class=\"date_picker\" :disabled-dates=\"disable_date\" :highlighted=\"highlighted\" :format=\"format\"  @closed=\"handle_process_choose_date\" v-model=\"new_adv.start_time\"></datepicker>\n                    </div>\n                </div>\n                <div class=\"form-group row-group\">\n                    <div class=\"form-group col-group margin-fix-right\">\n                        <span class=\"label-span margin-bottom\">{{$t('price')}} [ 1 + 2 ] * 3 </span>\n                        <p class=\"label\" style=\"color: #f34343\">{{new_adv.price.toLocaleString()}} <sup>đ</sup> </p>\n                    </div>\n                </div>\n                <div class=\"form-group col-group margin-fix-right\" v-if=\"new_adv.advertising_type == 'BANNER'\">\n                    <span class=\"label-span margin-bottom\">Banner</span>\n                    <div class=\"form-group margin-bottom\" v-if=\"image_upload_preview.length > 0\">\n                        <img v-bind:src=\"image_upload_preview\" :alt=\"banner.name\" style=\"width: 100%; max-height: 320px; object-fit: contain;\">\n                    </div>\n                    <span class=\"label-span margin-bottom\" >Size uploads: {{size_accept}}</span>\n                    <input type=\"file\" v-validate=\"`required:true`\" name=\"banner\" ref=\"banner\" v-on:change=\"handleFileUpload\" accept=\"image/jpeg, image/x-png\">\n                    <span class=\"error-text margin-fix-top\" v-show=\"errors.has('banner')\">{{errors.first('banner')}}</span>\n                </div>\n                <div class=\"form-group row-group\" style=\"justify-content: center; margin-top: 16px;\">\n                    <div class=\"btn btn-cancel margin-fix-right\" style=\"color: #ED6B28; border: 1px solid #ED6B28\" v-on:click=\"handle_close()\">{{$t('cancel')}}</div>\n                    <button class=\"btn btn-signup primary-color\" style=\"color: #FFF\">{{$t('save')}}</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n<style>\n.date_picker { display: flex; flex-direction: column; justify-content: flex-end; width: 100%; height: 36px !important;}\n.date_picker input { height: 38px;}\n.date_picker > .header { height: 20px !important;}\n</style>\n<script>\nimport { socket_bus } from '../../../../main'\nimport datepicker from 'vuejs-datepicker';\nimport { HTTP } from '../../../../http-common';\nexport default {\n    components: {datepicker},\n    data() {\n        return {\n            new_adv: {id_brand: '', price: 0, adversiting_time: 0, start_time:null, page: '', position: ''},\n            format: 'dd/MM/yyyy',\n            brands: [],\n            adver_type:[],\n            pages: [],\n            options: [],\n            option: {},\n            times:[],\n            times_all:{\n                en: [{name: '3 days', value: 3}, {name: '1 weeks', value: 7}, {name:'2 weeks', value: 14}, {name:'1 months', value: 30}, {name:'2 months', value: 60}, {name: '3 months', value: 90}, {name: '4 months', value: 120}],\n                vi: [{name: '3 ngày', value: 3}, {name: '1 tuần', value: 7}, {name:'2 tuần', value: 14}, {name:'1 tháng', value: 30}, {name:'2 tháng', value: 60}, {name: '3 tháng', value: 90}, {name: '4 tháng', value: 120}],\n                tw: [{name: '3 天', value: 3}, {name: '1 周', value: 7}, {name:'2 周', value: 14}, {name:'1 月', value: 30}, {name:'2 月', value: 60}, {name: '3 月', value: 90}, {name: '4 月', value: 120}]\n            },\n            brand_selected: null,\n            selected_advertising_type: null,\n            selected_page: null,\n            is_hotlabel: false,\n            is_preview_hotlabel: false,\n            banner: '',\n            image_preview: '',\n            final_price: 0,\n            is_add: false,\n            is_preview: false,\n            disable_date : {\n                to: new Date(),\n                ranges: []\n            },\n            highlighted: {\n                to: null,\n                from: new Date(Date.now() + 24 * 60 * 60 * 1000)\n            },\n            image_upload_preview: '',\n            size_accept: '',\n            url_preview_upload: false,\n            current_lang: ''\n        }\n    },\n    methods : {\n        handle_preview(item) {\n            this.is_preview = true\n            this.image_preview = ''\n            switch(this.selected_advertising_type.name) {\n                case 'BANNER':\n                    this.handle_preview_banner(item)\n                    break;\n                case 'RECOMMEND':\n                    if(item.page == 'Home') {\n                        this.image_preview = 'uploads/Location_preview/Recommended/CategoryPage-Recommended.jpg' \n                    } else if (item.page == 'Category') {\n                        this.image_preview = 'uploads/Location_preview/Recommended/CategoryPage-Recommended.jpg' \n                    } else {\n                        this.image_preview = 'uploads/Location_preview/Recommended/Exhibition-Recommended.jpg' \n                    }\n                    break;\n                case 'HOTLABEL':\n                    this.image_preview = 'uploads/Location_preview/HOTLABEL/Hot-label.jpg' \n                    break;\n            }\n        },\n        handle_preview_banner(item) {\n            switch(item.page) {\n                case 'All':\n                    this.image_preview = item.position == 'Header' ? 'uploads/Location_preview/BANNER/Header.jpg' : 'uploads/Location_preview/BANNER/Footer.jpg'\n                    break;\n                case 'Home':\n                    this.image_preview = item.position == 'Slider' ? 'uploads/Location_preview/BANNER/HomePage-Slider.jpg' : 'uploads/Location_preview/BANNER/HomePage-Right.jpg'\n                    break;\n                case 'Category':\n                    this.export_link_category(item.position)\n                    break;\n                case 'Exhibition':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Exhibition-Banner.jpg' \n                    break;\n\n            }\n        },\n        export_link_category(position) {\n            switch(position) {\n                case 'Left':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Category-Left.jpg' \n                    break;\n                case 'Right - Top':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Category-Right-Top.jpg'\n                    break;\n                case 'Right - Bottom':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Category-Right-Bottom.jpg'\n                    break;\n                case 'Big Center':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Category-Center.jpg'\n                    break;\n                case 'SideBar':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Category-SideBar.jpg'\n                    break;\n            }\n        },\n        export_link_exhibition(position) {\n            switch(position) {\n                case 'Left':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Exhibition-Left.jpg' \n                    break;\n                case 'Right - Top':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Exhibition-Right-Top.jpg'\n                    break;\n                case 'Right - Bottom':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Exhibition-Right-Bottom.jpg'\n                    break;\n                case 'Center':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Exhibition-Center.jpg'\n                    break;\n                case 'Wide':\n                    this.image_preview = 'uploads/Location_preview/BANNER/Exhibition-Wide.jpg'\n                    break;\n            }\n        },\n        handle_close() {\n            this.is_add =  this.is_preview = false;\n            this.new_adv = {id_brand: '', price: 0, adversiting_time: 0, start_time:null, page: '', position: ''},\n            setTimeout(() => {\n                window.location.reload()\n            }, 3000)\n        },\n        handleFileUpload(e) {\n            var files = e.target.files || e.dataTransfer.files;\n            if (!files.length)\n                return;\n            const type_file = e.target.files[0].name.split('.')[1]\n            if(type_file == 'png' || type_file == 'jpg') {\n                switch(this.selected_page) {\n                    case 'All':\n                        this.handle_detect_size_banner_all(e, files)\n                        break;\n                    case 'Home':\n                        this.handle_detect_size_home(e, this.option.position, files)\n                        break;\n                    case 'Category':\n                        this.handle_detect_size_category(e, this.option.position, files)\n                        break;\n                    case 'Exhibition':\n                        this.handle_detect_size_exhibition(e, this.option.position, files)\n                        break;\n                }\n            } else {\n                socket_bus.$emit('SHOW_MESSAGE', {message: this.$t('message_alert.type_not_accept')})\n                e.target.value = ''\n            }\n        },\n        handle_get_place_holder_upload() {\n            switch(this.selected_page) {\n                case 'All':\n                    this.size_accept = `${this.$t('message_alert.width')}: 1170px, ${this.$t('message_alert.height')}: 120px`\n                    break;\n                case 'Home':\n                    this.size_accept = this.option.position  == 'Right' ? `${this.$t('message_alert.width')}: 370px, ${this.$t('message_alert.height')}: 200px` : `${this.$t('message_alert.width')}: 770px, ${this.$t('message_alert.height')}: 420px`\n                    break;\n                case 'Category':\n                    if(this.option.position== 'Left') {\n                        this.size_accept = `${this.$t('message_alert.width')}: 270px, ${this.$t('message_alert.height')}: 390px`\n                    } else if(this.option.position == 'Big Center') {\n                        this.size_accept = `${this.$t('message_alert.width')}: 570px, ${this.$t('message_alert.height')}: 390px`\n                    } else if(this.option.position == 'Right - Top' || this.option.position == 'Right - Bottom') {\n                        this.size_accept = `${this.$t('message_alert.width')}: 270px, ${this.$t('message_alert.height')}: 180px`\n                    } else {\n                        this.size_accept = `${this.$t('message_alert.width')}: 1170px, ${this.$t('message_alert.height')}: 150px`\n                    }\n                    break;\n                case 'Exhibition':\n                    if(this.option.position== 'Left' || this.option.position == 'Center') {\n                        this.size_accept = `${this.$t('message_alert.width')}: 370px, ${this.$t('message_alert.height')}: 460px`\n                    } else if(this.option.position == 'Right - Top' || this.option.position == 'Right - Bottom') {\n                        this.size_accept = `${this.$t('message_alert.width')}: 370px, ${this.$t('message_alert.height')}: 215px`\n                    } else {\n                        this.size_accept = `${this.$t('message_alert.width')}: 1170px, ${this.$t('message_alert.height')}: 120px`\n                    }\n                    break;\n            }\n        },\n        handle_detect_size_banner_all(e,files) {\n            var _URL = window.URL || window.webkitURL;\n            var image = new Image()\n            image.src = _URL.createObjectURL(files[0]);\n            image.onload = () => {\n                if(image.width != 1170 || image.height != 120 ) {\n                    socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.size_error')} ${this.size_accept}`})\n                } else {\n                    this.image_upload_preview = URL.createObjectURL(files[0]);\n                    this.banner = this.$refs.banner.files[0]\n                }\n            }\n        },\n        handle_detect_size_home(e, position, files) {\n            var _URL = window.URL || window.webkitURL;\n            var image = new Image()\n            image.src = _URL.createObjectURL(files[0]);\n            if(position == 'Right') {\n                image.onload = () => {\n                    if(image.width != 370 || image.height != 200 ) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.size_error')} ${this.size_accept}`})\n                    } else {\n                        this.banner = this.$refs.banner.files[0]\n                        this.image_upload_preview = URL.createObjectURL(files[0]);\n                    }\n                }\n            } else if(position == 'Slider') {\n                image.onload = () => {\n                    if(image.width != 770 || image.height != 420 ) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.size_error')} ${this.size_accept}`})\n                    } else {\n                        this.banner = this.$refs.banner.files[0]\n                        this.image_upload_preview = URL.createObjectURL(files[0]);\n                    }\n                }\n            } \n        },\n        handle_detect_size_category(e, position, files) {\n            var _URL = window.URL || window.webkitURL;\n            var image = new Image()\n            image.src = _URL.createObjectURL(files[0]);\n            if(position == 'Left') {\n                image.onload = () => {\n                    if(image.width != 270 || image.height != 390 ) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.size_error')} ${this.size_accept}`})\n                    } else {\n                        this.banner = this.$refs.banner.files[0]\n                        this.image_upload_preview = URL.createObjectURL(files[0]);\n                    }\n                }\n            } else if(position == 'Big Center') {\n                image.onload = () => {\n                    if(image.width != 570 || image.height != 390 ) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.size_error')} ${this.size_accept}`})\n                    } else {\n                        this.banner = this.$refs.banner.files[0]\n                        this.image_upload_preview = URL.createObjectURL(files[0]);\n                    }\n                }\n            } else if(position == 'Right - Top' || position == 'Right - Bottom') {\n                image.onload = () => {\n                    if(image.width != 270 || image.height != 180 ) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.size_error')} ${this.size_accept}`})\n                    } else {\n                        this.banner = this.$refs.banner.files[0]\n                        this.image_upload_preview = URL.createObjectURL(files[0]);\n                    }\n                }\n            } else if(position == 'SideBar') {\n                image.onload = () => {\n                    if(image.width != 1170 || image.height != 150 ) {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.size_error')} ${this.size_accept}`})\n                    } else {\n                        this.banner = this.$refs.banner.files[0]\n                        this.image_upload_preview = URL.createObjectURL(files[0]);\n                    }\n                }\n            }\n        },\n        handle_detect_size_exhibition(e, position, files) {\n            var _URL = window.URL || window.webkitURL;\n            var image = new Image()\n            image.src = _URL.createObjectURL(files[0]);\n             if(position == 'Left' || position == 'Center') {\n                image.onload = () => {\n                    if(image.width != 370 || image.height != 460 ) {\n                        this.size_accept = `${this.$t('message_alert.width')}: 370px, ${this.$t('message_alert.height')}: 460px`\n                        socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.size_error')} ${this.size_accept}`})\n                    } else {\n                        this.banner = this.$refs.banner.files[0]\n                        this.image_upload_preview = URL.createObjectURL(files[0]);\n                    }\n                }\n            } else if(position == 'Right - Top' || position == 'Right - Bottom') {\n                image.onload = () => {\n                    if(image.width != 370 || image.height != 215 ) {\n                        this.size_accept = `${this.$t('message_alert.width')}: 370px, ${this.$t('message_alert.height')}: 215px`\n                        socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.size_error')} ${this.size_accept}`})\n                    } else {\n                        this.banner = this.$refs.banner.files[0]\n                        this.image_upload_preview = URL.createObjectURL(files[0]);\n                    }\n                }\n            } else if(position == 'Wide') {\n                image.onload = () => {\n                    if(image.width != 1170 || image.height != 120 ) {\n                        this.size_accept = `${this.$t('message_alert.width')}: 1170px, ${this.$t('message_alert.height')}: 120px`\n                        socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.size_error')} ${this.size_accept}`})\n                    } else {\n                        this.banner = this.$refs.banner.files[0]\n                        this.image_upload_preview = URL.createObjectURL(files[0]);\n                    }\n                }\n            }\n        },\n        handle_choose_type() {\n            this.options = []\n            this.new_adv.advertising_type = this.selected_advertising_type.name    \n            switch(this.selected_advertising_type.name) {\n                case 'BANNER':\n                    this.is_hotlabel = this.is_preview_hotlabel = false\n                    this.pages = ['All', 'Home', 'Category', 'Exhibition']\n                    break;\n                case 'RECOMMEND':\n                    this.is_hotlabel = this.is_preview_hotlabel = false\n                    this.selected_page = null\n                    this.pages = ['Home', 'Category', 'Exhibition']\n                    break;\n                case 'HOTLABEL':\n                    this.is_hotlabel = true\n                    this.is_preview_hotlabel = true\n                    this.final_price = this.selected_advertising_type.price\n                    this.selected_page = null\n                    this.handle_cal_price()\n                    break\n            }\n            this.new_adv.start_time = null\n            this.new_adv.adversiting_time = 0\n        },\n        handle_choose_page() {\n            this.options = []\n            this.selected_advertising_type.option.map(item => {\n                if(item.page == this.selected_page) {\n                    this.options.push(item)\n                }\n            })\n            this.final_price = this.selected_advertising_type.price\n            this.options.map(item => {\n                return item.bonus == 0 ? this.option = item : null;\n            })\n        },\n        handle_check() {\n            this.final_price = this.selected_advertising_type.price + this.option.bonus\n            this.handle_cal_price()\n            this.handle_get_place_holder_upload()\n        },\n        handle_cal_price() {\n            this.new_adv.price = this.final_price * this.new_adv.adversiting_time\n            const info = JSON.parse(JSON.stringify(this.option))\n            this.handle_get_current_advertisement(info.page, info.position, this.new_adv.adversiting_time)\n            this.handle_process_choose_date()\n        },\n        handle_process_choose_date() {\n            var start_date = Date.parse(this.new_adv.start_time)\n            var stop_date = start_date + (this.new_adv.adversiting_time - 1) * 24 * 60 * 60 * 1000\n            this.highlighted = {from:start_date, to: stop_date} \n            this.new_adv.start_time = start_date\n        },\n        handle_create_advertisement() {\n            this.new_adv.position = this.option.position\n            this.new_adv.page = this.selected_page\n            this.$validator.validateAll()\n            if(!this.errors.any()) {\n                var data_form = new FormData()\n                data_form.append('id_brand', this.new_adv.id_brand)\n                data_form.append('advertising_type', this.new_adv.advertising_type)\n                data_form.append('adversiting_time', this.new_adv.adversiting_time)\n                data_form.append('price', this.new_adv.price)\n                data_form.append('position', this.new_adv.position)\n                data_form.append('start_time', this.new_adv.start_time)\n                data_form.append('page', this.selected_page)\n                if(this.new_adv.advertising_type == 'BANNER') {\n                    data_form.append('banner', this.banner)\n                }\n                \n                return new Promise((resolve, reject) => {\n                    HTTP.post('/advertisements/', data_form).then(result => {\n                        if(result.data.status == 201) {\n                            socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.create_adv_success')}`})\n                            this.is_add = false\n                            setTimeout(() => { window.location.reload()}, 3000)\n                        } else {\n                            socket_bus.$emit('SHOW_MESSAGE', {message: `${this.$t('message_alert.create_adv_success')}`})\n                        }\n                    }).catch(error => {\n                        reject(error)\n                        console.log('Error: ' + error);\n                    })\n                })\n            }\n        },\n        handle_get_brands() {\n            const customer = JSON.parse(localStorage.getItem('customer'))\n            return new Promise((resolve, reject) => {\n                HTTP.get('/brands/brand-customer/' + customer.id).then(result => {\n                    resolve(result.data)\n                    this.brands = result.data.status == 200 ? result.data.data : []\n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        handle_get_current_advertisement(page, position, range) {\n            return new Promise((resolve, reject) => {\n                HTTP.get(`/advertisements/advertisement-run&page=${page}&position=${position}&range=${range}`).then(result => {\n                    resolve(result.data)\n                    if(result.data.status == 200) {\n                        this.disable_date.to = new Date()\n                        console.log(result.data.data);\n                        result.data.data.map(item => {\n                            var start_time = new Date(item.start_time)\n                            start_time.setUTCDate(start_time.getUTCDate() - 1)\n                            this.disable_date.ranges.push({from: start_time, to: new Date(item.stop_time)})\n                        })\n                    } else {\n                        this.disable_date.to = new Date()\n                        this.disable_date.ranges.length = 0\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error:' + error);\n                })\n            })\n        }\n    },\n    created() {\n        socket_bus.$on('ADV', (brand_choose) => {\n            this.is_add = true\n            this.new_adv.id_brand = brand_choose.id_brand\n        })\n        this.handle_get_brands()\n        this.$store.dispatch('get_advertisement_type').then(result => {\n            this.adver_type = result.status == 200 ? result.data : []\n        })  \n        this.current_lang = localStorage.getItem('lang') ? localStorage.getItem('lang') : 'vn'\n        this.times = this.current_lang == 'vn' ? this.times_all.vi : (this.current_lang == 'en' ? this.times_all.en : this.times_all.tw)\n    }\n}\n</script>"]}]}