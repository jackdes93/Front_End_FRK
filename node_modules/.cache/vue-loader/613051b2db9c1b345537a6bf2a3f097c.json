{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/JoinningDemanPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/JoinningDemanPage.vue","mtime":1577869813173},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport block_nav from '../Units/BlockNav';\nimport block_alert from '../Units/Block_Notification';\nimport Block_Banner_Bottom from '../Units/Block_Banner_Bottom';\nimport block_footer from '../Units/Block_Footer';\nimport datepicker from 'vuejs-datepicker';\nimport { HTTP } from '../../http-common';\nimport { router } from '../../routers';\nimport { socket_bus } from '../../main';\nimport VueRecaptcha from 'vue-recaptcha'\nimport VueNumeric from 'vue-numeric'\n\nexport default {\n    components : {\n        block_nav, block_footer, Block_Banner_Bottom, datepicker, VueNumeric, VueRecaptcha,block_alert\n    },\n    data() {\n        return {\n            page: 1,\n            format: 'dd/MM/yyyy',\n            category_show : false,\n            is_Input_Active: false,\n            city_show: false,\n            current_tab: 'ALL',\n            is_login: false,\n            list_joining_demand: [],\n            list_category: [],\n            category_choose: {_id: '', name: 'Choose Category'},\n            list_city: [],\n            city_choose: {_id: '', name: '-- Select City --'},\n            new_joining_post : {\n                category: '',\n                budget: { from: 0, to: 0},\n                location: [],\n                store_front: false,\n                time_open: new Date(Date.now() + 7 * 60 * 60 * 1000),\n                name: '',\n                email: '',\n                phone_number: '',\n                zalo: '',\n                time_call: '0',\n                id_customer: '',\n                message: '',\n                created_on: new Date(Date.now() + 7 * 60 * 60 * 1000)\n            },\n            disable_date : {\n                to: new Date(),\n                ranges: []\n            },\n            token_recaptcha: null,\n            email: '',\n            password: '',\n            image_banner:'',\n            name_picture: '',\n            category_popular: [],\n            category_vn: ['BBQ-vi.jpg', 'Brunch-vi.jpg','Dessert-vi.jpg', 'Drink-vi.jpg', 'Foriegn-vi.jpg', 'Hotpot-vi.jpg', 'Vietnamese-vi.jpg'],\n            category_en: ['BBQ-eng.jpg', 'Brunch-eng.jpg','Dessert-eng.jpg', 'Drink-eng.jpg', 'Foriegn-eng.jpg', 'Hotpot-eng.jpg', 'Vietnamese-eng.jpg']\n        }\n    },\n    methods: {\n        handle_translate(name) {\n            var result = ''\n            switch(name) {\n                case 'Drink':\n                    result = this.$t('drink')\n                    break;\n                case 'Dessert':\n                    result = this.$t('dessert')\n                    break;\n                case 'Vietnamese Foods':\n                    result = this.$t('vn_food')\n                    break;\n                case 'Foriegn Foods':\n                    result = this.$t('foriegn_fd')\n                    break;\n                case 'BBQ':\n                    result = this.$t('bbq')\n                    break;\n                case 'Brunch':\n                    result = this.$t('brunch')\n                    break;\n                case 'Hot Pot':\n                    result = this.$t('hotpot')\n                    break;\n            }\n            return result;\n        },\n        handle_route(index) {\n            var route = ''\n            switch(index) {\n                case 0:\n                    route = 'BBQ'\n                    break;\n                case 1:\n                    route = 'Brunch'\n                    break;\n                case 2:\n                    route = 'Dessert'\n                    break;\n                case 3:\n                    route = 'Drink'\n                    break;\n                case 4:\n                    route = 'Foriegn Foods'\n                    break;\n                case 5:\n                    route = 'Hot Pot'\n                    break;\n                case 6:\n                    route = 'Vietnamese Foods'\n                    break;\n            }\n            router.push(`/category=${route}`)\n            window.location.reload()\n        },\n        handle_verify: function(response) {\n           this.token_recaptcha = response\n        },\n        handle_expired: function () {\n            this.$refs.recaptcha.reset()\n        },\n        handle_replace_phone(text, start, length) {\n            var length_cut = (text.length - length) / 2\n           return text.substr(start, length_cut) + '*'.repeat(length) + text.substr(length + length_cut, length_cut)\n        },\n        handle_replace_string(text, start, length) {\n            return text.substr(start, length) + '*'.repeat(7)\n        },\n        handle_return_string_money(text) {\n            const length = text.length\n           if(length > 6) {\n               return text.substr(0, text.length - 6) \n           } else if(length == 6) {\n               return '0.' + text.substr(0, 1)\n           }\n        },\n        handle_get_joining(event) {\n            switch(event) {\n                case 'OLD':\n                    this.page = this.list_joining_demand .length < 1 ? 1 : this.page +=1\n                    break;\n                case 'NEW':\n                    this.page = this.page == 1 ? 1 : this.page -= 1\n                    break;\n            }\n            this.handle_get_joining_budget(this.page)\n        },\n        handle_select_category(i) {\n            this.category_show = false;\n            this.category_choose = this.list_category[i]\n            this.new_joining_post.category = this.category_choose.name\n        },\n        handle_select_city(i) {\n            this.city_choose = this.list_city[i]\n            this.city_show = false;\n            this.new_joining_post.location = this.new_joining_post.location.length == 0 ? this.new_joining_post.location += this.city_choose.name : this.new_joining_post.location += ', ' + this.city_choose.name\n        },\n        handle_toogle($event) {\n            this.city_show = !this.city_show\n            $event.stopPropagation();\n        },\n        handle_toogle_category($event) {\n            this.category_show = !this.category_show\n            $event.stopPropagation()\n        },\n        handle_login() {\n            if(this.token_recaptcha != null) {\n                this.$validator.validateAll()\n                if(!this.errors.any()) {\n                    const info_login = {email: this.email, password: this.password}\n                    this.$store.dispatch('handle_sign_in', info_login).then(result => {\n                        if(result.data.status == 200) {\n                            socket_bus.$emit('SHOW_ALERT', {is_show: true, message: 'Login Account Success', is_redirect: false, brand: {name: 'LOGIN SUCCESS'}})\n                        } else if(result.data.status == 403) {\n                            socket_bus.$emit('SHOW_ALERT', {is_show: true, message: 'Login Account NOT ACTIVE', is_redirect: false, brand: {name: 'LOGIN FAIL'}})\n                        } else if(result.data.status == 503) {\n                            socket_bus.$emit('SHOW_ALERT', {is_show: true, message: 'Login Account LOCK', is_redirect: false, brand: {name: 'LOGIN FAIL'}})\n                        } else if(result.data.status == 401) {\n                            socket_bus.$emit('SHOW_ALERT', {is_show: true, message: result.data.error, is_redirect: false, brand: {name: 'LOGIN FAIL'}})\n                        } else {\n                            socket_bus.$emit('SHOW_ALERT', {is_show: true, message: result.data.error, is_redirect: false, brand: {name: 'LOGIN FAIL'}})\n                        }\n                    })\n                }\n            }    \n        },\n        handle_post_request() {\n            if(JSON.parse(localStorage.getItem('customer'))) {\n                var customer = JSON.parse(localStorage.getItem('customer'))\n                this.new_joining_post.id_customer = customer.id\n                this.$validator.validateAll()\n                if(!this.errors.any()) {\n                    return new Promise((resolve, reject) => {\n                        HTTP.post('/joining-demand/', this.new_joining_post).then(result => {\n                            resolve(result)\n                            if(result.data.status == 201) {\n                                socket_bus.$emit('SHOW_MESSAGE', {message: 'Post Your Demand Success!!!'})\n                                setTimeout(() => {window.location.reload()}, 2000)\n                            } else {\n                                socket_bus.$emit('SHOW_MESSAGE', {message: 'Post Your Demand Success!!!'})\n                            }\n                        }).catch(error => {\n                            reject(error)\n                            console.log('Error: ' + error)\n                        })\n                    })\n                }\n            } else {\n                this.is_login = true\n            }\n            \n        },\n        handle_get_joining_budget(page) {\n            return new Promise((resolve, reject) => {\n                HTTP.get('/joining-demand/page=' + page).then(result => {\n                    resolve(result)\n                    this.list_joining_demand = result.data.status == 200 ? result.data.data : [];\n                }).catch(error => {\n                    reject(error)\n                    console.log(error)\n                })\n            })\n        },\n        handle_get_name_image(link) {\n            return String(link).split('/')[2].split('.')[0]\n        },\n        handle_get_image_advertisement() {\n            this.$store.dispatch('handle_get_link_image').then(result => {\n                this.image_banner = result.data[0].header\n                this.name_picture = this.handle_get_name_image(this.image_banner)\n            })\n        },\n        handle_choose_tab(tab) {\n            switch(tab) {\n                case 'ALL':\n                    this.handle_get_joining_budget(this.page)\n                    this.current_tab = 'ALL'\n                    break;\n\n                case 'DOMESTIC':\n                    this.current_tab = 'DOMESTIC'\n                    this.list_joining_demand.length = 0;\n                    this.handle_get_joining_budget(this.page)\n                    this.list_joining_demand = this.list_joining_demand.filter(item => {\n                       return item.location.indexOf('Kh치c') == -1\n                    })\n                    break;\n\n                case 'OVERSEA':\n                    this.current_tab = 'OVERSEA'\n                    this.list_joining_demand = this.list_joining_demand.filter(item => {\n                       return item.location.indexOf('Kh치c') != -1\n                    })\n                    break;\n            }\n        }\n    },\n    mounted() {\n        this.$nextTick(() => {\n            window.addEventListener('click', () => {\n                if(this.city_show) {\n                    this.city_show = false\n                }\n\n                if(this.category_show) {\n                    this.category_show = false\n                }\n            })\n        })\n    },\n    created() {\n        this.city_show = false\n        this.$store.dispatch('get_cities').then(result => {\n            this.list_city = result.data\n        })\n\n        this.$store.dispatch('get_categories').then(result => {\n            this.list_category = result.data\n        })\n\n        this.handle_get_joining_budget(this.page)\n        this.category_popular = localStorage.getItem('lang') == 'vn' ? this.category_vn : this.category_en   \n        \n        socket_bus.$on('CHANGE_LANG', () => {\n            window.location.reload()\n        })\n\n         socket_bus.$on('CLOSE_BOX', result => {\n           this.is_login = false\n        })\n    }\n}\n",{"version":3,"sources":["JoinningDemanPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"JoinningDemanPage.vue","sourceRoot":"src/components/Pages","sourcesContent":["<template>\n    <div>\n        <block_nav></block_nav>\n        <div class=\"wrap-container\">\n            <div class=\"banner joining-banner\">\n                <img src=\"/img/ally_buy.62672bc5.jpg\" alt=\"\">\n            </div>\n            <div class=\"block-joinning-demand\">\n                <div class=\"block-form post-joinning-demand\">\n                    <form class=\"form-box\" @submit.prevent=\"handle_post_request()\">\n                        <div class=\"form-header bg-title-header\">\n                            <span class=\"flex-row-center\" style=\"display: flex; justify-content: flex-start; width: 100%\">\n                                <i class=\"fas fa-bolt icon-joining-demand\"></i>\n                                <h6 class=\"text-uppercase title-form\">{{$t('form_joining.title_joining_demand')}}</h6>\n                            </span>\n                        </div>\n                        <div class=\"form-content\">\n                            <div class=\"form-group col-group\">\n                                <div class=\"form-group margin-10 col-group-mobile\" style=\"position: relative\">\n                                    <div class=\"form-group col-group padding-right col-1-3\" style=\"justify-content: flex-start\">\n                                        <span class=\"label text-uppercase padding-span margin-bottom\">{{$t('form_joining.category')}}</span>\n                                        <input type=\"text\" :placeholder=\"`${this.$t('filter.choose_category')}`\" name=\"category\" v-model=\"new_joining_post.category\" readonly v-on:click=\"handle_toogle_category($event)\" v-validate=\"'required:true'\">\n                                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('category')\">{{errors.first('category')}}</span>\n                                    </div>\n                                    <div class=\"form-group col-group\" v-if=\"category_show\" style=\"max-height: 280px; position: absolute; top: 80px; left: 30px;\">\n                                        <ul class=\"list-city\" >\n                                            <li class=\"item-city\" v-for=\"(category,i) in list_category\" :key=\"i\" v-on:click=\"handle_select_category(i)\">\n                                                <p>{{handle_translate(category.name)}}</p>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                    <div class=\"form-group col-group col-2-3\">\n                                        <span class=\"label text-uppercase padding-span margin-bottom\">{{$t('form_joining.your_budget')}}</span>\n                                        <div class=\"form-group row-group col-group-mobile\" >\n                                            <div class=\"form-group col-group\" style=\"margin-right: 30px;\">\n                                                <vue-numeric  separator=\",\" v-model=\"new_joining_post.budget.from\"></vue-numeric>\n                                                <span class=\"error-text margin-fix-top\" v-show=\"errors.has('from')\">{{errors.first('from')}}</span>\n                                            </div>\n                                            <div class=\"form-group col-group\">\n                                                <vue-numeric  separator=\",\" v-model=\"new_joining_post.budget.to\"></vue-numeric>\n                                                <span class=\"error-text margin-fix-top\" v-show=\"errors.has('to')\">{{errors.first('to')}}</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"form-group col-group-mobile\" style=\"position: relative\">\n                                    <div class=\"form-group col-group padding-right\" style=\"justify-content: flex-start\">\n                                        <span class=\"label text-uppercase padding-span margin-bottom\">{{$t('form_joining.location')}}</span>\n                                        <input type=\"text\" :placeholder=\"`${this.$t('filter.select_city')}`\" v-model=\"new_joining_post.location\" name=\"location\" readonly v-on:click=\"handle_toogle($event)\" v-validate=\"'required: true'\" style=\"max-width: 260px;\">\n                                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('location')\">{{errors.first('location')}}</span>\n                                    </div>\n                                    <div class=\"form-group col-group\" v-if=\"city_show\" style=\"max-height: 280px; position: absolute; top: 80px; left: 30px;\">\n                                        <ul class=\"list-city\" >\n                                            <li class=\"item-city\" v-for=\"(city,i) in list_city\" :key=\"i\" v-on:click=\"handle_select_city(i)\">\n                                                <p>{{city.name}}</p>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                    <div class=\"form-group col-group\" style=\"align-items: normal\">\n                                        <span class=\"label text-uppercase padding-span margin-bottom\">{{$t('form_joining.store_front')}}</span>\n                                        <div class=\"form-group row-group-radio-btn\">\n                                            <div class=\"form-group radio-btn\">\n                                                <input type=\"radio\" name=\"check\" :value=\"true\" v-model=\"new_joining_post.store_front\" style=\"width: 40px;\">\n                                                <p class=\"label-option\">{{$t('form_joining.found')}}</p>\n                                            </div>\n                                            <div class=\"form-group radio-btn row-group\">\n                                                <input type=\"radio\" name=\"check\" :value=\"false\" v-model=\"new_joining_post.store_front\" style=\"width: 40px;\">\n                                                <p class=\"label-option\">{{$t('form_joining.still')}}</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class=\"form-group col-group padding-left\" style=\"justify-content: flex-start\">\n                                        <span class=\"label text-uppercase padding-span margin-bottom\">{{$t('form_joining.time_open')}}</span>\n                                        <datepicker placeholder=\"When will you ready to launch ?\" class=\"date_picker\" :disabled-dates=\"disable_date\" :format=\"format\" v-model=\"new_joining_post.time_open\"></datepicker>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"form-group col-group\" style=\"padding-top: 15px;\">\n                                <span class=\"label text-uppercase padding-span\">{{$t('form_joining.contact_info')}}</span>\n                                <div class=\"form-group col-group\" style=\"align-items: flex-start; justify-content: flex-start; max-width: 200px; padding-left: 16px;\">\n                                    <div class=\"form-group row-group-radio-btn\">\n                                        <div class=\"form-group radio-btn\">\n                                            <input type=\"radio\" name=\"gender\" value=\"Mr\" v-model=\"new_joining_post.sex\" style=\"width: 40px; margin-right: 5px;\">\n                                            <p class=\"label-option \"> {{$t('mr')}}</p>\n                                        </div>\n                                        <div class=\"form-group radio-btn row-group\">\n                                            <input type=\"radio\" name=\"gender\" value=\"Mrs\" v-model=\"new_joining_post.sex\" style=\"width: 40px; margin-right: 5px;\">\n                                            <p class=\"label-option \">{{$t('mrs')}}</p>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"form-group col-group-mobile\" >\n                                    <div class=\"form-group col-group col-2-3\" style=\"padding-right: 15px;\">\n                                        <div class=\"form-group row-group col-group-mobile\" style=\"margin-bottom: 10px;\">\n                                            <div class=\"form-group col-group padding-right\">\n                                                <input type=\"text\" :placeholder=\"`${this.$t('form_joining.your_name')} (*)`\" name=\"name\" v-model=\"new_joining_post.name\" v-validate=\"'required:true'\">\n                                                <span class=\"error-text margin-fix-top\" v-show=\"errors.has('name')\">{{errors.first('name')}}</span>\n                                            </div>\n                                            <div class=\"form-group col-group\">\n                                                <input type=\"text\" :placeholder=\"`${this.$t('form_joining.your_email')} (*)`\" name=\"email\" v-model=\"new_joining_post.email\"  v-validate=\"'required:true|email'\">  \n                                                <span class=\"error-text margin-fix-top\" v-show=\"errors.has('email')\">{{errors.first('email')}}</span>\n                                            </div>\n                                        </div>\n                                        <div class=\"form-group col-group\">\n                                            <span class=\"label text-uppercase padding-span\" style=\"font-size: 14px; margin-bottom: 8px;\">{{$t('form_joining.leave_message')}}</span>\n                                            <textarea name=\"message\" v-model=\"new_joining_post.message\" cols=\"30\" rows=\"10\" style=\"padding: 10px;\" :placeholder=\"`${this.$t('form_joining.leave_message')}`\" v-validate=\"'required:true'\"></textarea>\n                                            <span class=\"error-text margin-fix-top\" v-show=\"errors.has('message')\">{{errors.first('message')}}</span>\n                                        </div>\n                                    </div>\n                                    <div class=\"form-group col-group col-1-3 padding-left\">\n                                        <input type=\"text\" name=\"phone_number\" :placeholder=\"`${this.$t('form_joining.phone_number')} (*)`\" v-model=\"new_joining_post.phone_number\" style=\"margin-bottom : 10px;\" v-validate=\"'required: true'\">\n                                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('phone_number')\">{{errors.first('phone_number')}}</span>\n                                        <input type=\"text\" name=\"zalo\" :placeholder=\"`${this.$t('form_joining.zalo_number')}`\" v-model=\"new_joining_post.zalo\" style=\"margin: 10px 0;\" v-validate=\"'required: true'\">\n                                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('zalo')\">{{errors.first('zalo')}}</span>\n                                        <div class=\"form-group col-group\" style=\"justify-content: flex-start\">\n                                            <span class=\"label text-uppercase\" style=\"font-size: 14px; margin-bottom: 8px;\">{{$t('form_joining.time_free')}}</span>\n                                            <select class=\"block_selected\" v-model=\"new_joining_post.time_call\">\n                                                <option value=\"0\">{{$t('form_joining.mo')}}</option>\n                                                <option value=\"1\">{{$t('form_joining.af')}}</option>\n                                                <option value=\"2\">{{$t('form_joining.eve')}}</option>\n                                            </select>\n                                        </div>\n                                        <button type=\"submit\" class=\"btn-submit-joining\"  style=\"min-width: 140px !important;\" :disabled=\"errors.length > 0\">{{$t('form_joining.submit_demand')}}</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                    <div class=\"block-table\">\n                        <div class=\"form-header\" style=\"align-items: center; justify-content: space-between; background: #171717;\">\n                            <span class=\"flex-row-center\" style=\"display: flex; justify-content: space-between;\">\n                                <i class=\"fas fa-crown icon-mobile\" style=\" color: #FFF;\"></i>\n                                <h6 class=\"text-uppercase title-block-normal\" style=\"color: #FFF;\">{{$t('last_joining')}}</h6>\n                            </span>\n                            <!-- <span style=\"font-family: 'Cabin'; font-style: italic; font-size: 16px; opacity: .6;\">Last demand 20:10 - 28/06/19 <i class=\"fas fa-time\"></i></span> -->\n                        </div>\n                      \n                        <div class=\"tab-table\">\n                            <ul class=\"list\">\n                                <li class=\"item border-right\" v-on:click=\"handle_choose_tab('ALL')\">\n                                    <p class=\"text-uppercase title-tab-table\" :class=\"{ 'show': current_tab == 'ALL' }\">{{$t('joining_page.tab_1')}}</p>\n                                </li>\n                                <li class=\"item border-right\" v-on:click=\"handle_choose_tab('DOMESTIC')\">\n                                    <p class=\"text-uppercase title-tab-table\" :class=\"{ 'show': current_tab == 'DOMESTIC' }\">{{$t('joining_page.tab_2')}}</p>\n                                </li>\n                                <li class=\"item margin-fix-left\" v-on:click=\"handle_choose_tab('OVERSEA')\">\n                                    <p class=\"text-uppercase title-tab-table\" :class=\"{ 'show': current_tab == 'OVERSEA' }\">{{$t('joining_page.tab_3')}}</p>\n                                </li>\n                            </ul>\n                        </div>\n                        <div class=\"content-table\">\n                            <div class=\"form-group row-group flex-row-center\" v-if=\"list_joining_demand.length == 0\">\n                                <span class=\"label-cell flex-row-center\" style=\"width: 100%; display: flex;\">No Data</span>\n                            </div>\n                            <ul class=\"list\" v-else>\n                                <li class=\"item-row\" v-for=\"(item, index) in list_joining_demand\" :key=\"index\">\n                                    <div class=\"form-group col-group block-row\">\n                                        <span class=\"label-cell-bold\"><i class=\"fas fa-user-circle\"></i> {{handle_replace_string(item.name, 0, 4)}}</span>\n                                        <span class=\"label-cell\"><i class=\"fas fa-map-marked-alt\"></i>{{item.location.toString()}}</span>\n                                    </div>\n                                    <div class=\"form-group col-group block-row\">\n                                        <span class=\"label-cell-bold\"><i class=\"fas fa-phone-volume\"></i>{{handle_replace_phone(item.phone_number, 0, 6)}}</span>\n                                        <span class=\"label-cell\"><i class=\"fas fa-store\"></i>{{item.store_front == true ? $t('form_joining.found') : $t('form_joining.still')}}</span>\n                                    </div>\n                                    <div class=\"form-group block-row block-budget\">\n                                        <p class=\"text-uppercase joining-budget\" >\n                                            {{$t('joining_page.budget_from' )}} \n                                            <span class=\"text-color-budget\"> <br>~ {{handle_return_string_money(item.budget.from.toString())}} M </span>\n                                        </p>\n                                    </div>\n                                </li>\n                            </ul>\n                            <div class=\"block-pagging\">\n                                <span class=\"btn-newer\"  v-on:click=\"handle_get_joining('NEW')\"> <i class=\"fas fa-chevron-left\" style=\"font-size: 12px; padding: 0 5px;\"></i> {{$t('newer')}}</span>\n                                <span class=\"title-total-joining\">{{$t('total')}} {{list_joining_demand.length}} {{$t('demands_sub')}}</span>\n                                <span class=\"btn-older\" v-on:click=\"handle_get_joining('OLD')\" > {{$t('older')}}<i class=\"fas fa-chevron-right\" style=\"font-size: 12px; padding: 0 5px;\"></i></span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"block-ads\">\n                    <div class=\"block-bottom\">\n                        <div class=\"block-header\">\n                           <span class=\"flex-row-center\" style=\"display: flex; justify-content: flex-start;\">\n                               <i class=\"fas fa-crown\" style=\"color: #333; margin-right: 10px;\"></i>\n                               <h6 class=\"text-uppercase title-form\">{{$t('popular_category')}}</h6>\n                            </span>\n                        </div>\n                        <div class=\"block-content\">\n                            <ul class=\"list-category\">\n                                <a href=\"#\" v-on:click=\"handle_route(index)\" v-for=\"(item, index) in category_popular\" :key=\"index\"  class=\"item-category\">\n                                    <img :src=\"`/img/${item}`\" :alt=\"`${item}`\" style=\"object-fit:cover; object-position: center;\">\n                                </a>\n                            </ul>\n                        </div> \n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"block-model\" style=\"background: rgba(0,0,0,.5)\" v-if=\"is_login\">\n            <div class=\"block-alert animation-tranform-scale\" style=\"padding: 8px; background: transparent; box-shadow: none;\">\n                <div class=\"form-group col-group\" style=\"align-items: flex-end; width: 430px;\" v-on:click=\"is_login = false\"><span class=\"label btn-close\"><i class=\"far fa-times-circle text-color-primarry\"></i></span></div>\n                <form class=\"form-login\" @submit.prevent=\"handle_login\" style=\"background: #FFF\">\n                    <div class=\"form-header\">\n                        <p class=\"title-form\">{{$t('form_login.login')}}</p>\n                    </div>\n                    <div class=\"form-content\" style=\"height: auto; flex: 1; padding: 0;  margin-top: 20px;\">\n                        <div class=\"form-group margin-bottom col-group\">\n                            <div class=\"form-group\">\n                                <input type=\"text\" name=\"email\" placeholder=\"Email\" v-model=\"email\" v-validate=\"'required:true|email'\">\n                            </div>\n                            <span class=\"error-text margin-fix-top\" v-show=\"errors.has('email')\">{{errors.first('email')}}</span>\n                        </div>\n                         <div class=\"form-group margin-bottom col-group\">\n                            <div class=\"form-group \">\n                                <input type=\"password\" :placeholder=\"`${this.$t('form_login.password')}`\" name=\"password\" v-model=\"password\" v-validate=\"'required:true|min:9'\">\n                            </div>\n                            <span class=\"error-text margin-fix-top\" v-show=\"errors.has('password')\">{{errors.first('password')}}</span>\n                        </div>\n                        <div class=\"form-group col-group margin-bottom\" style=\"align-items: center;\">\n                            <div class=\"form-group margin-bottom\" >\n                                <button type=\"submit\" class=\"btn btn-login bg-title-header\" :disabled=\"errors.length > 0\"   style=\"width: 100%; border: none;\">{{$t('form_login.login')}}</button>\n                            </div>\n                            <div class=\"form-group margin-bottom\">\n                                <router-link to=\"/signup\" class=\"btn btn-sign-up\">{{$t('form_login.sign_up')}}</router-link>\n                            </div>\n                        </div>\n                        <vue-recaptcha id=\"capcah\" sitekey=\"6LeeM74UAAAAAJ71ru17H2h-hReSNO_07eNNm7Is\" :loadRecaptchaScript=\"true\" @verify=\"handle_verify\" @expired=\"handle_expired\" ref=\"recaptcha\" ></vue-recaptcha >\n                    </div>\n                </form>\n            </div>\n        </div>\n        <Block_Banner_Bottom></Block_Banner_Bottom>\n        <block_footer></block_footer>\n        <block_alert></block_alert>\n    </div>\n</template>\n\n<script>\nimport block_nav from '../Units/BlockNav';\nimport block_alert from '../Units/Block_Notification';\nimport Block_Banner_Bottom from '../Units/Block_Banner_Bottom';\nimport block_footer from '../Units/Block_Footer';\nimport datepicker from 'vuejs-datepicker';\nimport { HTTP } from '../../http-common';\nimport { router } from '../../routers';\nimport { socket_bus } from '../../main';\nimport VueRecaptcha from 'vue-recaptcha'\nimport VueNumeric from 'vue-numeric'\n\nexport default {\n    components : {\n        block_nav, block_footer, Block_Banner_Bottom, datepicker, VueNumeric, VueRecaptcha,block_alert\n    },\n    data() {\n        return {\n            page: 1,\n            format: 'dd/MM/yyyy',\n            category_show : false,\n            is_Input_Active: false,\n            city_show: false,\n            current_tab: 'ALL',\n            is_login: false,\n            list_joining_demand: [],\n            list_category: [],\n            category_choose: {_id: '', name: 'Choose Category'},\n            list_city: [],\n            city_choose: {_id: '', name: '-- Select City --'},\n            new_joining_post : {\n                category: '',\n                budget: { from: 0, to: 0},\n                location: [],\n                store_front: false,\n                time_open: new Date(Date.now() + 7 * 60 * 60 * 1000),\n                name: '',\n                email: '',\n                phone_number: '',\n                zalo: '',\n                time_call: '0',\n                id_customer: '',\n                message: '',\n                created_on: new Date(Date.now() + 7 * 60 * 60 * 1000)\n            },\n            disable_date : {\n                to: new Date(),\n                ranges: []\n            },\n            token_recaptcha: null,\n            email: '',\n            password: '',\n            image_banner:'',\n            name_picture: '',\n            category_popular: [],\n            category_vn: ['BBQ-vi.jpg', 'Brunch-vi.jpg','Dessert-vi.jpg', 'Drink-vi.jpg', 'Foriegn-vi.jpg', 'Hotpot-vi.jpg', 'Vietnamese-vi.jpg'],\n            category_en: ['BBQ-eng.jpg', 'Brunch-eng.jpg','Dessert-eng.jpg', 'Drink-eng.jpg', 'Foriegn-eng.jpg', 'Hotpot-eng.jpg', 'Vietnamese-eng.jpg']\n        }\n    },\n    methods: {\n        handle_translate(name) {\n            var result = ''\n            switch(name) {\n                case 'Drink':\n                    result = this.$t('drink')\n                    break;\n                case 'Dessert':\n                    result = this.$t('dessert')\n                    break;\n                case 'Vietnamese Foods':\n                    result = this.$t('vn_food')\n                    break;\n                case 'Foriegn Foods':\n                    result = this.$t('foriegn_fd')\n                    break;\n                case 'BBQ':\n                    result = this.$t('bbq')\n                    break;\n                case 'Brunch':\n                    result = this.$t('brunch')\n                    break;\n                case 'Hot Pot':\n                    result = this.$t('hotpot')\n                    break;\n            }\n            return result;\n        },\n        handle_route(index) {\n            var route = ''\n            switch(index) {\n                case 0:\n                    route = 'BBQ'\n                    break;\n                case 1:\n                    route = 'Brunch'\n                    break;\n                case 2:\n                    route = 'Dessert'\n                    break;\n                case 3:\n                    route = 'Drink'\n                    break;\n                case 4:\n                    route = 'Foriegn Foods'\n                    break;\n                case 5:\n                    route = 'Hot Pot'\n                    break;\n                case 6:\n                    route = 'Vietnamese Foods'\n                    break;\n            }\n            router.push(`/category=${route}`)\n            window.location.reload()\n        },\n        handle_verify: function(response) {\n           this.token_recaptcha = response\n        },\n        handle_expired: function () {\n            this.$refs.recaptcha.reset()\n        },\n        handle_replace_phone(text, start, length) {\n            var length_cut = (text.length - length) / 2\n           return text.substr(start, length_cut) + '*'.repeat(length) + text.substr(length + length_cut, length_cut)\n        },\n        handle_replace_string(text, start, length) {\n            return text.substr(start, length) + '*'.repeat(7)\n        },\n        handle_return_string_money(text) {\n            const length = text.length\n           if(length > 6) {\n               return text.substr(0, text.length - 6) \n           } else if(length == 6) {\n               return '0.' + text.substr(0, 1)\n           }\n        },\n        handle_get_joining(event) {\n            switch(event) {\n                case 'OLD':\n                    this.page = this.list_joining_demand .length < 1 ? 1 : this.page +=1\n                    break;\n                case 'NEW':\n                    this.page = this.page == 1 ? 1 : this.page -= 1\n                    break;\n            }\n            this.handle_get_joining_budget(this.page)\n        },\n        handle_select_category(i) {\n            this.category_show = false;\n            this.category_choose = this.list_category[i]\n            this.new_joining_post.category = this.category_choose.name\n        },\n        handle_select_city(i) {\n            this.city_choose = this.list_city[i]\n            this.city_show = false;\n            this.new_joining_post.location = this.new_joining_post.location.length == 0 ? this.new_joining_post.location += this.city_choose.name : this.new_joining_post.location += ', ' + this.city_choose.name\n        },\n        handle_toogle($event) {\n            this.city_show = !this.city_show\n            $event.stopPropagation();\n        },\n        handle_toogle_category($event) {\n            this.category_show = !this.category_show\n            $event.stopPropagation()\n        },\n        handle_login() {\n            if(this.token_recaptcha != null) {\n                this.$validator.validateAll()\n                if(!this.errors.any()) {\n                    const info_login = {email: this.email, password: this.password}\n                    this.$store.dispatch('handle_sign_in', info_login).then(result => {\n                        if(result.data.status == 200) {\n                            socket_bus.$emit('SHOW_ALERT', {is_show: true, message: 'Login Account Success', is_redirect: false, brand: {name: 'LOGIN SUCCESS'}})\n                        } else if(result.data.status == 403) {\n                            socket_bus.$emit('SHOW_ALERT', {is_show: true, message: 'Login Account NOT ACTIVE', is_redirect: false, brand: {name: 'LOGIN FAIL'}})\n                        } else if(result.data.status == 503) {\n                            socket_bus.$emit('SHOW_ALERT', {is_show: true, message: 'Login Account LOCK', is_redirect: false, brand: {name: 'LOGIN FAIL'}})\n                        } else if(result.data.status == 401) {\n                            socket_bus.$emit('SHOW_ALERT', {is_show: true, message: result.data.error, is_redirect: false, brand: {name: 'LOGIN FAIL'}})\n                        } else {\n                            socket_bus.$emit('SHOW_ALERT', {is_show: true, message: result.data.error, is_redirect: false, brand: {name: 'LOGIN FAIL'}})\n                        }\n                    })\n                }\n            }    \n        },\n        handle_post_request() {\n            if(JSON.parse(localStorage.getItem('customer'))) {\n                var customer = JSON.parse(localStorage.getItem('customer'))\n                this.new_joining_post.id_customer = customer.id\n                this.$validator.validateAll()\n                if(!this.errors.any()) {\n                    return new Promise((resolve, reject) => {\n                        HTTP.post('/joining-demand/', this.new_joining_post).then(result => {\n                            resolve(result)\n                            if(result.data.status == 201) {\n                                socket_bus.$emit('SHOW_MESSAGE', {message: 'Post Your Demand Success!!!'})\n                                setTimeout(() => {window.location.reload()}, 2000)\n                            } else {\n                                socket_bus.$emit('SHOW_MESSAGE', {message: 'Post Your Demand Success!!!'})\n                            }\n                        }).catch(error => {\n                            reject(error)\n                            console.log('Error: ' + error)\n                        })\n                    })\n                }\n            } else {\n                this.is_login = true\n            }\n            \n        },\n        handle_get_joining_budget(page) {\n            return new Promise((resolve, reject) => {\n                HTTP.get('/joining-demand/page=' + page).then(result => {\n                    resolve(result)\n                    this.list_joining_demand = result.data.status == 200 ? result.data.data : [];\n                }).catch(error => {\n                    reject(error)\n                    console.log(error)\n                })\n            })\n        },\n        handle_get_name_image(link) {\n            return String(link).split('/')[2].split('.')[0]\n        },\n        handle_get_image_advertisement() {\n            this.$store.dispatch('handle_get_link_image').then(result => {\n                this.image_banner = result.data[0].header\n                this.name_picture = this.handle_get_name_image(this.image_banner)\n            })\n        },\n        handle_choose_tab(tab) {\n            switch(tab) {\n                case 'ALL':\n                    this.handle_get_joining_budget(this.page)\n                    this.current_tab = 'ALL'\n                    break;\n\n                case 'DOMESTIC':\n                    this.current_tab = 'DOMESTIC'\n                    this.list_joining_demand.length = 0;\n                    this.handle_get_joining_budget(this.page)\n                    this.list_joining_demand = this.list_joining_demand.filter(item => {\n                       return item.location.indexOf('Kh치c') == -1\n                    })\n                    break;\n\n                case 'OVERSEA':\n                    this.current_tab = 'OVERSEA'\n                    this.list_joining_demand = this.list_joining_demand.filter(item => {\n                       return item.location.indexOf('Kh치c') != -1\n                    })\n                    break;\n            }\n        }\n    },\n    mounted() {\n        this.$nextTick(() => {\n            window.addEventListener('click', () => {\n                if(this.city_show) {\n                    this.city_show = false\n                }\n\n                if(this.category_show) {\n                    this.category_show = false\n                }\n            })\n        })\n    },\n    created() {\n        this.city_show = false\n        this.$store.dispatch('get_cities').then(result => {\n            this.list_city = result.data\n        })\n\n        this.$store.dispatch('get_categories').then(result => {\n            this.list_category = result.data\n        })\n\n        this.handle_get_joining_budget(this.page)\n        this.category_popular = localStorage.getItem('lang') == 'vn' ? this.category_vn : this.category_en   \n        \n        socket_bus.$on('CHANGE_LANG', () => {\n            window.location.reload()\n        })\n\n         socket_bus.$on('CLOSE_BOX', result => {\n           this.is_login = false\n        })\n    }\n}\n</script>"]}]}