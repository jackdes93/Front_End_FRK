{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/User/ui_user/InfoUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/User/ui_user/InfoUser.vue","mtime":1577553483653},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { HTTP } from '../../../../http-common'\nimport { socket_bus } from '../../../../main'\nimport block_alert from '../../../Units/Block_Alert'\n\nexport default {\n    components: {\n        block_alert\n    },\n    data() {\n        return {\n            is_edit: true,\n            is_change_password: false,\n            readonly: true,\n            customer: {},\n            password: ''\n        }\n    },\n    methods: {\n        handle_edit() {\n            this.is_edit = false;\n            this.readonly = false;\n        },\n        handle_cancel() {\n            this.is_edit = true;\n            this.readonly = true;\n        },\n        handle_save() {\n            const data = {id: this.customer.id, updateOps: this.customer}\n            this.$validator.validateAll()\n            if(!this.errors.any()) {\n                HTTP.patch('/customers/' + data.id, data.updateOps).then(result => {\n                    if(result.status == 200) {\n                        this.is_edit = true;\n                        this.readonly = true;\n                        localStorage.removeItem('customer')\n                        localStorage.setItem('customer', JSON.stringify(this.customer))\n                        socket_bus.$emit('SHOW_ALERT', {is_show: true, message: 'Update Account Success', is_redirect: true})\n                    } else {\n                        socket_bus.$emit('SHOW_ALERT', {is_show: true, message: 'Update Account Fail!', is_redirect: false})\n                    }\n                }).catch(error => {\n                    console.log(error);\n                })\n            }\n        },\n        handle_change_password() {\n            const id_customer = this.customer.id\n            return new Promise((resolve, reject) => {\n                HTTP.patch('/customers/update-password/' + id_customer, {password: this.password}).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        this.is_change_password = false\n                        alert('Change Password Success!!!')\n                    } else {\n                        alert('Change Password Fail!!')\n                    }\n                })\n                .catch(error => {\n                    reject(error)\n                    this.password = ''\n                    console.log('Error: ' + error)\n                })\n            })\n        }\n    },\n    created() {\n        if(JSON.parse(localStorage.getItem('customer'))) {\n            this.customer = JSON.parse(localStorage.getItem('customer'))\n        }\n        \n    }\n}\n",{"version":3,"sources":["InfoUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"InfoUser.vue","sourceRoot":"src/components/Pages/User/ui_user","sourcesContent":["<template>\n    <div class=\"flex-box block-info-user padding-full\">\n        <div class=\"block-custom width-full padding-fix-lr box-shadow margin-fix-right\" style=\"max-height: 600px;\">\n            <div class=\"block-header bg-title-header padding-full header-fix\">\n                <p class=\"title-form\">{{$t('user_page.edit_profile')}}</p>\n                <p class=\"label-cell white\">{{$t('user_page.comple_profile')}}</p>\n            </div>\n            <form class=\"block-form\">\n                <div class=\"form-group row-group\">\n                    <div class=\"form-group col-group margin-fix-right \">\n                        <span class=\"label-span margin-bottom\">{{$t('user_page.full_name')}}</span>\n                        <input type=\"text\" name=\"full_name\" class=\"border-bottom-ol\" v-model=\"customer.full_name\" :readonly=\"readonly\" v-validate=\"`required: true`\">\n                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('full_name')\">{{errors.first('full_name')}}</span>\n                    </div>\n                    <div class=\"form-group col-group\">\n                        <span class=\"label-span margin-bottom\">{{$t('form_joining.your_email')}}</span>\n                        <input type=\"text\" name=\"email\" v-model=\"customer.email\" class=\"border-bottom-ol\" :readonly=\"readonly\" v-validate=\"`required: true|email`\">\n                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('email')\">{{errors.first('email')}}</span>\n                    </div>\n                </div>\n                <div class=\"form-group row-group\">\n                    <div class=\"form-group col-group margin-fix-right\">\n                        <span class=\"label-span margin-bottom\">{{$t('user_page.address')}} </span>\n                        <input type=\"text\" name=\"address\" class=\"border-bottom-ol\" v-model=\"customer.address\" :readonly=\"readonly\" v-validate=\"`required: true`\">\n                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('address')\">{{errors.first('address')}}</span>\n                    </div>\n                    <div class=\"form-group col-group margin-fix-right\">\n                        <span class=\"label-span margin-bottom\">{{$t('user_page.birthday')}} </span>\n                        <input type=\"text\" class=\"border-bottom-ol margin-bottom\" name=\"birthday\" v-model=\"customer.birthday\" :readonly=\"readonly\" v-validate=\"`required: true`\">\n                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('birthday')\">{{errors.first('birthday')}}</span>\n                    </div>\n                </div>\n                <div class=\"form-group row-group\">\n                    <div class=\"form-group col-group margin-fix-right\">\n                        <span class=\"label-span margin-bottom\">{{$t('form_joining.phone_number')}}</span>\n                        <input type=\"text\" name=\"phone_number\" v-model=\"customer.phone_number\" class=\"border-bottom-ol\" :readonly=\"readonly\" v-validate=\"`required: true|regex:^([0-9]+)$|max:10`\">\n                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('phone_number')\">{{errors.first('phone_number')}}</span>\n                    </div>\n                    <div class=\"form-group col-group\">\n                        <span class=\"label-span margin-bottom\">{{$t('user_page.account_type')}}</span>\n                        <input type=\"text\" v-model=\"customer.level\" class=\"border-bottom-ol\" readonly>\n                        </div>\n                </div>\n\n                <div class=\"form-group row-group\" >\n                    <div class=\"form-group\" style=\"align-items: center; justify-content: center;\" v-show=\"!is_edit\">\n                        <div class=\"btn btn-sign-up \" style=\"border:1px solid #ED6B28; width: 160px;\" v-on:click=\"handle_cancel\">{{$t('cancel')}}</div>\n                    </div>\n                    <div class=\"form-group\" v-if=\"is_edit\" style=\"align-items: center; justify-content: center;\">\n                        <div class=\"btn btn-login bg-title-header\" style=\"border:none;\" v-on:click=\"handle_edit\">{{$t('edit')}}</div>\n                    </div>\n                    <div class=\"form-group\" v-else style=\"align-items: center; justify-content: center;\">\n                        <div class=\"btn btn-login bg-title-header\" style=\"border:none;\" v-on:click=\"handle_save\">{{$t('save')}}</div>\n                    </div>\n                    <div class=\"form-group\" style=\"align-items: center; justify-content: center\" v-if=\"is_edit\">\n                        <div class=\"btn btn-login bg-title-header\" style=\"border:none;\" v-on:click=\"is_change_password = true\">{{$t('change_pass')}}</div>\n                    </div>\n                </div>\n            </form>\n        </div>\n        <block_alert></block_alert>\n        <div class=\"block-model\" style=\"background: rgba(0,0,0,.5); \" v-if=\"is_change_password\">\n            <div class=\"block-alert padding-full animation-tranform-scale\" style=\"max-width: 360px;\">\n                <div class=\"block-header bg-title-header padding-full header-fix width-full\">\n                    <p class=\"title-form\">Change Password</p>\n                </div>\n                <form class=\"block-form\" style=\"padding: 8px 16px!important; width: 85%;\" @submit.prevent=\"handle_change_password\">\n                    <div class=\"form-group margin-bottom col-group\">\n                        <span class=\"label-span margin-bottom-fix\">New Password</span>\n                        <input type=\"password\" class=\"border-bottom-ol\" placeholder=\"Type your password\" name=\"password\" v-model=\"password\" v-validate=\"'required:true|min:9'\" ref=\"password\">\n                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('password')\">{{errors.first('password')}}</span>\n                    </div>\n                    <div class=\"form-group margin-bottom col-group\" style=\"margin-top: 16px;\">\n                        <span class=\"label-span margin-bottom-fix\">Confirm Password</span>\n                        <input type=\"password\" class=\"border-bottom-ol\" placeholder=\"Type your password\" name=\"re_password\" v-validate=\"'required:true|confirmed:password'\">\n                        <span class=\"error-text margin-fix-top\" v-show=\"errors.has('re_password')\">{{errors.first('re_password')}}</span>\n                    </div>\n                    <div class=\"form-group row-group\" style=\"justify-content: center; margin-top: 16px;\">\n                        <div class=\"btn btn-cancel margin-fix-right\" style=\"color: #ED6B28; border: 1px solid #ED6B28\" v-on:click=\"is_change_password = false\">CANCEL</div>\n                        <button class=\"btn btn-signup primary-color\" style=\"color: #FFF\">CHANGE</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div> \n</template>\n\n<script>\nimport { HTTP } from '../../../../http-common'\nimport { socket_bus } from '../../../../main'\nimport block_alert from '../../../Units/Block_Alert'\n\nexport default {\n    components: {\n        block_alert\n    },\n    data() {\n        return {\n            is_edit: true,\n            is_change_password: false,\n            readonly: true,\n            customer: {},\n            password: ''\n        }\n    },\n    methods: {\n        handle_edit() {\n            this.is_edit = false;\n            this.readonly = false;\n        },\n        handle_cancel() {\n            this.is_edit = true;\n            this.readonly = true;\n        },\n        handle_save() {\n            const data = {id: this.customer.id, updateOps: this.customer}\n            this.$validator.validateAll()\n            if(!this.errors.any()) {\n                HTTP.patch('/customers/' + data.id, data.updateOps).then(result => {\n                    if(result.status == 200) {\n                        this.is_edit = true;\n                        this.readonly = true;\n                        localStorage.removeItem('customer')\n                        localStorage.setItem('customer', JSON.stringify(this.customer))\n                        socket_bus.$emit('SHOW_ALERT', {is_show: true, message: 'Update Account Success', is_redirect: true})\n                    } else {\n                        socket_bus.$emit('SHOW_ALERT', {is_show: true, message: 'Update Account Fail!', is_redirect: false})\n                    }\n                }).catch(error => {\n                    console.log(error);\n                })\n            }\n        },\n        handle_change_password() {\n            const id_customer = this.customer.id\n            return new Promise((resolve, reject) => {\n                HTTP.patch('/customers/update-password/' + id_customer, {password: this.password}).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        this.is_change_password = false\n                        alert('Change Password Success!!!')\n                    } else {\n                        alert('Change Password Fail!!')\n                    }\n                })\n                .catch(error => {\n                    reject(error)\n                    this.password = ''\n                    console.log('Error: ' + error)\n                })\n            })\n        }\n    },\n    created() {\n        if(JSON.parse(localStorage.getItem('customer'))) {\n            this.customer = JSON.parse(localStorage.getItem('customer'))\n        }\n        \n    }\n}\n</script>"]}]}