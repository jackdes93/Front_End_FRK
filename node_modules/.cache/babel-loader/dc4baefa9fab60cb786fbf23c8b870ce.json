{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/thread-loader/dist/cjs.js!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/Admin/Pages/ReportCallBack.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/Admin/Pages/ReportCallBack.vue","mtime":1583048787782},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nimport { HTTP_ADMIN } from \"../../../../http-common\";\nimport datepicker from 'vuejs-datepicker';\nimport JsonExcel from 'vue-json-excel';\nimport { socket_bus } from \"../../../../main\";\nVue.component('download-excel', JsonExcel);\nexport default {\n  components: {\n    datepicker: datepicker\n  },\n  data: function data() {\n    return {\n      format: 'dd/MM/yyyy',\n      id_brand: null,\n      selected_type: null,\n      is_have_brand: false,\n      search_text: '',\n      date_from: '',\n      titles: [],\n      date_to: '',\n      name_file: '',\n      json_fields: {\n        'NAME BRAND': 'name_brand',\n        'OWNER': 'owner',\n        'BRAND TYPE': 'level',\n        'CATEGORY': 'category',\n        'PRICE': 'price',\n        'AMOUNT CALL BACK': 'amount_call_back'\n      },\n      json_data: [],\n      brands: [],\n      disable_date_from: {\n        from: new Date(),\n        ranges: []\n      },\n      disable_date_to: {\n        from: new Date(),\n        ranges: []\n      },\n      data_report_brand: null,\n      data_report_summary: null\n    };\n  },\n  methods: {\n    handle_change: function handle_change() {\n      if (this.selected_type == 1) {\n        this.is_have_brand = true;\n      } else {\n        this.id_brand = 'all_brand';\n        this.is_have_brand = false;\n      }\n\n      this.data_report_brand = null;\n      this.data_report_summary = null;\n    },\n    handle_return_string_money: function handle_return_string_money(text) {\n      var length = text.length;\n\n      if (length > 6) {\n        return text.substr(0, text.length - 6);\n      } else if (length == 6) {\n        return '0.' + text.substr(0, 1);\n      }\n    },\n    handle_get_brand: function handle_get_brand() {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        HTTP_ADMIN.get('/brands').then(function (result) {\n          resolve(result);\n          result.data.data.map(function (brand) {\n            _this.brands.push(brand);\n          });\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    handle_select_brand: function handle_select_brand(brand) {\n      this.id_brand = brand.id;\n      this.search_text = brand.name;\n      this.is_have_brand = false;\n    },\n    handle_get_all: function handle_get_all(date_from, date_to) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        HTTP_ADMIN.get(\"/reports/call-back-all/date-from=\".concat(date_from, \"&date-to=\").concat(date_to)).then(function (result) {\n          resolve(result);\n\n          if (result.data.status == 200) {\n            _this2.data_report_summary = result.data.data;\n          } else {\n            socket_bus.$emit('SHOW_MESSAGE', {\n              message: result.message\n            });\n          }\n\n          _this2.titles.push('Summary All Call Back Of Brand');\n\n          _this2.data_report_summary.map(function (item) {\n            _this2.json_data.push({\n              name_brand: item.name_brand,\n              owner: item.owner[0],\n              level: item.level,\n              category: item.category,\n              price: item.price,\n              amount_call_back: item.sum_call_back\n            });\n          });\n        }).catch(function (error) {\n          reject(error);\n          console.log('Error: ' + error);\n        });\n      });\n    },\n    handle_get_data_brand: function handle_get_data_brand(id_brand, date_from, date_to) {\n      var _this3 = this;\n\n      this.json_data = [];\n      this.data_report_brand = [];\n      var current_date = new Date();\n      return new Promise(function (resolve, reject) {\n        HTTP_ADMIN.get(\"/reports/call-back-brand=\".concat(id_brand, \"&date-from=\").concat(date_from, \"&date-to=\").concat(date_to)).then(function (result) {\n          resolve(result);\n          _this3.data_report_brand = result.data.status == 200 ? result.data.data[0] : null;\n\n          if (_this3.data_report_brand) {\n            _this3.json_fields = {\n              'DATE CREATE': 'date_created',\n              'NAME': 'name',\n              'EMAIL': 'email',\n              'LOCATIONS': 'location',\n              'BUDGET': 'budget'\n            };\n\n            _this3.titles.push(_this3.data_report_brand.name_brand);\n\n            _this3.titles.push(_this3.data_report_brand.owner_brand.full_name);\n\n            _this3.titles.push(_this3.data_report_brand.owner_brand.email);\n\n            _this3.titles.push(_this3.data_report_brand.owner_brand.phone_number);\n\n            _this3.name_file = \"\".concat(_this3.data_report_brand.name_brand, \"_\").concat(current_date.getDate(), \"_\").concat(current_date.getMonth() + 1, \"_\").concat(current_date.getFullYear(), \".xls\");\n\n            _this3.data_report_brand.data_call_back.map(function (item) {\n              _this3.json_data.push({\n                date_created: item.created_on,\n                name: item.name,\n                email: item.email,\n                location: item.location,\n                budget: item.budget ? item.budget.from + '-' + item.budget.to : 0\n              });\n            });\n          }\n        }).catch(function (error) {\n          reject(error);\n          console.log(error);\n        });\n      });\n    },\n    handle_export: function handle_export() {\n      if (this.date_from <= this.date_to) {\n        var current_date = new Date();\n        var date_f = new Date(this.date_from);\n        var date_t = new Date(this.date_to);\n        this.titles = [];\n\n        if (this.selected_type == 0) {\n          this.handle_get_all(date_f, date_t);\n          this.name_file = \"Summary_All_Brand_\".concat(current_date.getDate(), \"_\").concat(current_date.getMonth() + 1, \"_\").concat(current_date.getFullYear(), \".xls\");\n        } else if (this.selected_type == 1) {\n          this.handle_get_data_brand(this.id_brand, date_f, date_t);\n        }\n      } else {\n        alert('Please choose full conditions');\n      }\n    }\n  },\n  computed: {\n    list_brand: function list_brand() {\n      var _this4 = this;\n\n      return this.brands.filter(function (item) {\n        return item.name.includes(_this4.search_text.toUpperCase()) || item.name.includes(_this4.search_text.toLowerCase());\n      });\n    }\n  },\n  created: function created() {\n    this.handle_get_brand();\n  }\n};",{"version":3,"sources":["ReportCallBack.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"flex-box padding-full block-custom-header col-group\">\n        <div class=\"block-custom col-12 padding-fix-lr box-shadow margin-fix-right\" style=\"max-height: 600px; background: #EDEDED;\">\n            <div class=\"block-header bg-title-header padding-full header-fix\">\n                <p class=\"title-form\">{{$t('report.call_back_title')}}</p>\n            </div>\n            <div class=\"form-group row-group width-full\">\n                <div class=\"form-group col-group\" >\n                    <span class=\"label-span margin-bottom-fix\">{{$t('brand')}}</span>\n                    <select v-model=\"selected_type\" class=\"selection-brand\" style=\"max-width: 180px\" @change=\"handle_change()\">\n                        <option value=null>--{{$t('select_type')}} --</option>\n                        <option value=\"0\">{{$t('manager.all_brand')}}</option>\n                        <option value=\"1\">{{$t('brand')}}</option>\n                    </select>\n                </div>\n                <div class=\"form-group col-group margin-fix-right\" v-if=\"selected_type == 1\">\n                    <span class=\"label-span margin-bottom-fix\">{{$t('user_page.brand_name')}}</span>\n                    <input type=\"text\" placeholder=\"Search....\" class=\"border-bottom-ol\" v-model=\"search_text\" style=\"height: 48px\" v-on:click=\"is_have_brand = true\">\n                </div>\n                <div class=\"form-group col-group\" v-if=\"list_brand.length > 0 && is_have_brand\" style=\"max-height: 280px; position: absolute; top: 152px; left: 280px;\">\n                    <ul class=\"list-city\" >\n                        <li class=\"item-city\" v-for=\"(brand,i) in list_brand\" :key=\"i\" v-on:click=\"handle_select_brand(brand)\">\n                            <p>{{brand.name}}</p>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"form-group col-group margin-fix-right\">\n                    <span class=\"label-span margin-bottom-fix\">{{$t('date_from')}}</span>\n                    <datepicker :placeholder=\"`${this.$t('date_from')}`\" class=\"date_picker\" style=\"justify-content: flex-start\" :disabled-dates=\"disable_date_from\"  :format=\"format\"  v-model=\"date_from\"></datepicker>\n                </div>\n                <div class=\"form-group col-group margin-fix-right\">\n                    <span class=\"label-span margin-bottom-fix\">{{$t('date_to')}}</span>\n                    <datepicker :placeholder=\"`${this.$t('date_to')}`\" class=\"date_picker\" style=\"justify-content: flex-start\" :disabled-dates=\"disable_date_to\" :format=\"format\" v-model=\"date_to\"></datepicker>\n                </div>\n                <div class=\"form-group row-group\" style=\"max-width:160px; margin-top: 24px; \">\n                    <span class=\"label-span margin-bottom-fix\"></span>\n                    <button class=\"btn btn-sign-up\" v-on:click=\"handle_export()\">{{$t('export')}}</button>\n                </div>\n            </div>\n        </div>\n        <div class=\"form-group col-group width-full padding-top\" v-if=\"data_report_brand\">\n            <div class=\"form-group row-group\"><span class=\"label\" style=\"font-size: 1.2em\">Report of brand {{data_report_brand.name_brand}}</span></div>\n            <div class=\"form-group row-group\" style=\"max-width: 400px; align-items: flex-end\">\n                <span class=\"label-span\" style=\"width: 120px;\">{{$t('user_page.brand_name')}}</span>\n                <input type=\"text\" class=\"border-bottom-ol\" :value=\"data_report_brand.name_brand\">\n            </div>\n            <div class=\"form-group row-group\" style=\"max-width: 600px; align-items: flex-end\">\n                <span class=\"label-span\" style=\"width: 120px;\">Brand Owner</span>\n                <input type=\"text\" class=\"border-bottom-ol\" :value=\"data_report_brand.owner_brand.full_name\">\n            </div>\n            <div class=\"form-group col-group\" style=\"max-width: 600px;\">\n                <div class=\"form-group row-group\">\n                    <div class=\"form-group row-group margin-fix-right\" style=\"max-width: 400px; align-items: flex-end\">\n                        <span class=\"label-span\" style=\"width: 120px;\">Email:</span>\n                        <input type=\"text\" class=\"border-bottom-ol\" :value=\"data_report_brand.owner_brand.email\">\n                    </div>\n                    <div class=\"form-group row-group\" style=\"max-width: 400px; align-items: flex-end\">\n                        <span class=\"label-span\" style=\"width: 160px;\">{{$t('form_joining.phone_number')}}</span>\n                        <input type=\"text\" class=\"border-bottom-ol\" :value=\"data_report_brand.owner_brand.phone_number\">\n                    </div>\n                </div>\n            </div>\n            <span class=\"label-span\" style=\"font-size: 1.3em\">{{$t('list_call_back')}}</span>\n            <div class=\"form-group row-group padding-top border-bottom-ol padding-bottom\" style=\"justify-content: flex-start\">\n                <span class=\"flex-box label text-color-second \" style=\"width: 80px; min-width: 100px;\">{{$t('user_page.nodot')}}</span>\n                <span class=\"flex-box label text-color-second margin-fix-right\">{{$t('user_page.date_created')}}</span>\n                <span class=\"flex-box label text-color-second margin-fix-right\">{{$t('name')}}</span>\n                <span class=\"flex-box label text-color-second margin-fix-right\">EMAIL</span>\n                <span class=\"flex-box label text-color-second margin-fix-right\">{{$t('form_joining.location')}}</span>\n                <span class=\"flex-box label text-color-second \">{{$t('brand_info.budget')}}</span>\n            </div>\n            <div class=\"form-group col-group\" style=\"max-height: 300px; height: 240px;\">\n                <div class=\"form-group row-group padding-top\"  v-for=\"(item, index) in data_report_brand.data_call_back\" :key=\"index\">\n                    <span class=\"label flex-box\" style=\"width: 80px; min-width: 100px;\">{{index + 1}}</span>\n                    <span class=\"label flex-box\">{{new Date(item.created_on).toLocaleDateString()}}</span>\n                    <span class=\"label flex-box\">{{item.name}}</span>\n                    <span class=\"label flex-box text-overflow\">{{item.email}}</span>\n                    <span class=\"label flex-box\">{{item.location}}</span>\n                    <span class=\"label flex-box\">{{item.budget ? handle_return_string_money(item.budget.from.toString()) : 0}}M -> {{item.budget ? handle_return_string_money(item.budget.to.toString()):0}}M</span>\n                </div>\n            </div>\n        </div>\n        <div class=\"form-group row-group\" v-else><span class=\"label-span\" v-if=\"id_brand != 'all_brand'\" style=\"display: flex; width: 100%; padding: 8px 0; justify-content: center; font-size: 1.6em\">{{$t('nodata')}}</span></div>\n        <div class=\"form-group row-group\" style=\"justify-content: center\">\n            <download-excel v-if=\"data_report_brand\"\n                :data= \"json_data\" \n                :title= \"titles\"\n                :fields = \"json_fields\"\n                :worksheet = \"id_brand\"\n                :name = \"name_file\"\n                class=\"btn-dwn-report text-color-primarry\">\n                {{$t('report.download_report')}}\n                <span><i class=\"fas fa-print\"></i></span>\n            </download-excel>\n        </div>\n        <div class=\"form-group col-group width-full padding-top\" v-if=\"data_report_summary\">\n            <div class=\"form-group row-group width-full\">\n                <div class=\"form-group row-group width-full\">\n                    <div class=\"block-list-row width-full padding-full border-bottom-ol\">\n                        <div class=\"block-item-row-header margin-fix-right\" style=\"max-width: 64px; width: 64px; justify-content: center;\">\n                            <p class=\"label text-color-second \">{{$t('report.rank')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 160px; margin: 0 8px;\">\n                            <p class=\"label text-color-second \">{{$t('report.owner')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 220px;\">\n                            <p class=\"label text-color-second \">{{$t('user_page.brand_name')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 200px;\">\n                            <p class=\"label text-color-second \">{{$t('price')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\">\n                            <p class=\"label text-color-second \">{{$t('form_joining.category')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"width: 200px; flex: none;\">\n                            <p class=\"label text-color-second\" style=\"text-align:left;\">{{$t('report.brand_type')}}</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"display: flex; justify-content: center;\">\n                            <p class=\"label text-color-second\" style=\"text-align: left\">{{$t('report.amount_call_back')}}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"form-group col-group\" style=\"padding: 0 8px 16px 8px; max-height: 400px; overflow: auto;\">\n                <div class=\"form-group border-bottom-ol padding-full row-animation\" style=\"align-items: center;\" v-for=\"(item,index) in data_report_summary\" :key=\"index\">\n                    <div class=\"block-item-row logo-brand margin-fix-right\" style=\"width: 64px; border: none;\">\n                        <p class=\"label text-color-second\">{{index + 1}}</p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 160px; margin: 0 8px;\">\n                        <p class=\"label-cell\">{{item.owner[0]}}</p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 220px;\">\n                        <a class=\"label-cell width-full\" style=\"font-size: 16px;\" v-bind:href=\"`/#/${item.category}/${item.name_vietnamese}`\">{{item.name_brand}}</a>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 200px;\">\n                        <p class=\"label-cell bold\">{{item.price.toLocaleString() }} <sup>đ</sup></p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 360px; margin-right: 8px;\">\n                        <p class=\"label-cell text-overflow\" >{{item.category}}</p>\n                    </div>\n                    <div class=\"block-item-row\">\n                        <p class=\"label-cell\">{{item.level}}</p>\n                    </div>\n                    <div class=\"block-item-row\" style=\"display: flex; justify-content: center;\">\n                        <p class=\"label text-color-second\">{{item.sum_call_back ? item.sum_call_back : 0}}</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"form-group row-group\" style=\"justify-content: center\">\n                <download-excel v-if=\"data_report_summary\"\n                    :data= \"json_data\" \n                    :title= \"titles\"\n                    :fields = \"json_fields\"\n                    :worksheet = \"id_brand\"\n                    :name = \"name_file\"\n                    class=\"btn-dwn-report text-color-primarry\">\n                    {{$t('report.download_report')}}\n                    <span><i class=\"fas fa-print\"></i></span>\n                </download-excel>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { HTTP_ADMIN } from '../../../../http-common'\nimport datepicker from 'vuejs-datepicker';\nimport JsonExcel from 'vue-json-excel'\nimport { socket_bus } from '../../../../main'\n\nVue.component('download-excel', JsonExcel)\nexport default {\n    components: { datepicker},\n    data() {\n        return {\n            format: 'dd/MM/yyyy',\n            id_brand: null,\n            selected_type: null,\n            is_have_brand: false,\n            search_text: '',\n            date_from: '',\n            titles: [],\n            date_to: '',\n            name_file: '',\n            json_fields: {\n                'NAME BRAND' : 'name_brand',\n                'OWNER':'owner',\n                'BRAND TYPE' : 'level',\n                'CATEGORY': 'category',\n                'PRICE' : 'price',\n                'AMOUNT CALL BACK':'amount_call_back'\n            },\n            json_data: [],\n            brands: [],\n            disable_date_from : {\n                from: new Date(),\n                ranges: []\n            },\n            disable_date_to : {\n                from: new Date(),\n                ranges: []\n            },\n            data_report_brand: null,\n            data_report_summary:null\n        }\n    },\n    methods: {\n        handle_change() {\n            if(this.selected_type == 1) {\n                this.is_have_brand = true\n            } else {\n                this.id_brand = 'all_brand'\n                this.is_have_brand = false\n            }\n            this.data_report_brand = null\n            this.data_report_summary = null\n        },\n        handle_return_string_money(text) {\n            const length = text.length\n           if(length > 6) {\n               return text.substr(0, text.length - 6) \n           } else if(length == 6) {\n               return '0.' + text.substr(0, 1)\n           }\n        },\n        handle_get_brand() {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get('/brands').then(result => {\n                    resolve(result)\n                    result.data.data.map(brand => {\n                        this.brands.push(brand)\n                    })\n                    \n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        handle_select_brand(brand) {\n            this.id_brand = brand.id\n            this.search_text = brand.name\n            this.is_have_brand = false\n        },\n        handle_get_all(date_from, date_to) {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get(`/reports/call-back-all/date-from=${date_from}&date-to=${date_to}`).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200 ) {\n                        this.data_report_summary = result.data.data\n                    } else {\n                        socket_bus.$emit('SHOW_MESSAGE', {message: result.message})\n                    }\n                    this.titles.push('Summary All Call Back Of Brand')\n                    this.data_report_summary.map(item => {\n                        this.json_data.push({\n                            name_brand: item.name_brand,\n                            owner: item.owner[0],\n                            level: item.level,\n                            category: item.category,\n                            price: item.price,\n                            amount_call_back: item.sum_call_back\n                        })\n                    })\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_get_data_brand(id_brand, date_from, date_to) {\n            this.json_data = []\n            this.data_report_brand = []\n            const current_date = new Date()\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get(`/reports/call-back-brand=${id_brand}&date-from=${date_from}&date-to=${date_to}`).then(result => {\n                    resolve(result)\n                    this.data_report_brand = result.data.status == 200 ? result.data.data[0] : null\n                    if(this.data_report_brand) {\n                        this.json_fields = {\n                            'DATE CREATE' : 'date_created',\n                            'NAME':'name',\n                            'EMAIL' : 'email',\n                            'LOCATIONS': 'location',\n                            'BUDGET' : 'budget'\n                        }\n                        this.titles.push(this.data_report_brand.name_brand)\n                        this.titles.push(this.data_report_brand.owner_brand.full_name)\n                        this.titles.push(this.data_report_brand.owner_brand.email)\n                        this.titles.push(this.data_report_brand.owner_brand.phone_number)\n                        this.name_file = `${this.data_report_brand.name_brand}_${current_date.getDate()}_${current_date.getMonth() + 1}_${current_date.getFullYear()}.xls`\n                        this.data_report_brand.data_call_back.map(item => {\n                            this.json_data.push({\n                                date_created: item.created_on,\n                                name: item.name,\n                                email: item.email,\n                                location: item.location,\n                                budget: item.budget ? item.budget.from + '-' + item.budget.to : 0\n                            })\n                        })\n                    }\n                }).catch(error => {\n                    reject(error)\n                    console.log(error);\n                })\n            })\n        },\n        handle_export() {\n           if(this.date_from <= this.date_to) {\n                const current_date = new Date()\n                const date_f = new Date(this.date_from)\n                const date_t = new Date(this.date_to)\n                this.titles = []\n                if(this.selected_type == 0) {\n                    this.handle_get_all(date_f, date_t)\n                    this.name_file = `Summary_All_Brand_${current_date.getDate()}_${current_date.getMonth() + 1}_${current_date.getFullYear()}.xls`\n                } else if(this.selected_type == 1) {\n                    this.handle_get_data_brand(this.id_brand, date_f, date_t)\n                }\n                \n            } else {\n                alert('Please choose full conditions')\n            }\n        }\n    },\n    computed: {\n        list_brand() {\n            return this.brands.filter(item => { return item.name.includes(this.search_text.toUpperCase()) ||  item.name.includes(this.search_text.toLowerCase())})\n        }\n    },\n    created() {\n        this.handle_get_brand()\n    }\n}\n</script>"],"sourceRoot":"src/components/Pages/Admin/Pages"}]}