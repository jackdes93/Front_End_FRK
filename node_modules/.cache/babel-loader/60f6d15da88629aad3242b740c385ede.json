{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/User/ui_user/InfoUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/User/ui_user/InfoUser.vue","mtime":1584120088110},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { HTTP } from \"../../../../http-common\";\nimport { socket_bus } from \"../../../../main\";\nimport block_alert from \"../../../Units/Block_Alert\";\nexport default {\n  components: {\n    block_alert: block_alert\n  },\n  data: function data() {\n    return {\n      is_edit: true,\n      is_change_password: false,\n      readonly: true,\n      customer: {},\n      password: '',\n      confirmation: ''\n    };\n  },\n  methods: {\n    handle_edit: function handle_edit() {\n      this.is_edit = false;\n      this.readonly = false;\n    },\n    handle_cancel: function handle_cancel() {\n      this.is_edit = true;\n      this.readonly = true;\n      this.customer = JSON.parse(localStorage.getItem('customer'));\n    },\n    handle_save: function handle_save() {\n      var _this = this;\n\n      var data = {\n        id: this.customer.id,\n        updateOps: this.customer\n      };\n      HTTP.patch('/customers/' + data.id, data.updateOps).then(function (result) {\n        if (result.status == 200) {\n          _this.is_edit = true;\n          _this.readonly = true;\n          localStorage.removeItem('customer');\n          localStorage.setItem('customer', JSON.stringify(_this.customer));\n          socket_bus.$emit('SHOW_ALERT', {\n            is_show: true,\n            message: \"\".concat(_this.$t('message_alert.update_account_success')),\n            is_redirect: true\n          });\n        } else {\n          socket_bus.$emit('SHOW_ALERT', {\n            is_show: true,\n            message: \"\".concat(_this.$t('message_alert.update_account_fail')),\n            is_redirect: false\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    handle_change_password: function handle_change_password() {\n      var _this2 = this;\n\n      var id_customer = this.customer.id;\n      return new Promise(function (resolve, reject) {\n        HTTP.patch('/customers/update-password/' + id_customer, {\n          password: _this2.password\n        }).then(function (result) {\n          resolve(result);\n\n          if (result.data.status == 200) {\n            _this2.is_change_password = false;\n            socket_bus.$emit('SHOW_ALERT', {\n              is_show: true,\n              message: \"\".concat(_this2.$t('message_alert.change_pass_success')),\n              is_redirect: true\n            });\n          } else {\n            socket_bus.$emit('SHOW_ALERT', {\n              is_show: true,\n              message: \"\".concat(_this2.$t('message_alert.change_pass_fail')),\n              is_redirect: true\n            });\n          }\n        }).catch(function (error) {\n          reject(error);\n          _this2.password = '';\n          console.log('Error: ' + error);\n        });\n      });\n    }\n  },\n  created: function created() {\n    if (JSON.parse(localStorage.getItem('customer'))) {\n      this.customer = JSON.parse(localStorage.getItem('customer'));\n    }\n  }\n};",{"version":3,"sources":["InfoUser.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"flex-box block-info-user padding-full\">\n        <div class=\"block-custom width-full padding-fix-lr box-shadow margin-fix-right\" style=\"max-height: 600px;\">\n            <div class=\"block-header bg-title-header padding-full header-fix\">\n                <p class=\"title-form\">{{$t('user_page.edit_profile')}}</p>\n                <p class=\"label-cell white\">{{$t('user_page.comple_profile')}}</p>\n            </div>\n            <ValidationObserver v-slot=\"{ invalid }\">\n                <form class=\"block-form\">\n                    <div class=\"form-group row-group\">\n                        <div class=\"form-group col-group margin-fix-right \">\n                            <span class=\"label-span margin-bottom\">{{$t('user_page.full_name')}}</span>\n                            <ValidationProvider name=\"name_full\" rules=\"required\" v-slot=\"{ errors }\" style=\"width: 100%;\">\n                                <input type=\"text\" name=\"name_full\" class=\"border-bottom-ol\" v-model=\"customer.full_name\" :readonly=\"readonly\">\n                                <span class=\"error-text margin-fix-top\" >{{ errors[0] }}</span>\n                            </ValidationProvider>\n                        </div>\n                        <div class=\"form-group col-group\">\n                            <span class=\"label-span margin-bottom\">{{$t('form_joining.your_email')}}</span>\n                            <input type=\"text\" name=\"email\" v-model=\"customer.email\" class=\"border-bottom-ol\" readonly>\n                        </div>\n                    </div>\n                    <div class=\"form-group row-group\">\n                        <div class=\"form-group col-group margin-fix-right\">\n                            <span class=\"label-span margin-bottom\">{{$t('user_page.address')}} </span>\n                            <ValidationProvider name=\"name_full\" rules=\"required\" v-slot=\"{ errors }\" style=\"width: 100%;\">\n                                <input type=\"text\" name=\"address\" class=\"border-bottom-ol\" v-model=\"customer.address\" :readonly=\"readonly\">\n                                <span class=\"error-text margin-fix-top\" >{{ errors[0] }}</span>\n                            </ValidationProvider>\n                        </div>\n                        <div class=\"form-group col-group margin-fix-right\">\n                            <span class=\"label-span margin-bottom\">{{$t('user_page.birthday')}} </span>\n                            <input type=\"text\" class=\"border-bottom-ol margin-bottom\" name=\"birthday\" v-model=\"customer.birthday\" readonly >\n                        </div>\n                    </div>\n                    <div class=\"form-group row-group\">\n                        <div class=\"form-group col-group margin-fix-right\">\n                            <span class=\"label-span margin-bottom\">{{$t('form_joining.phone_number')}}</span>\n                            <ValidationProvider name=\"phone_number\" rules=\"required|regex:^([0-9]+)$\" v-slot=\"{ errors }\" style=\"width: 100%;\">\n                                <input type=\"text\" name=\"phone_number\" v-model=\"customer.phone_number\" class=\"border-bottom-ol\" :readonly=\"readonly\">\n                                <span class=\"error-text margin-fix-top\" >{{ errors[0] }}</span>\n                            </ValidationProvider>\n                        </div>\n                        <div class=\"form-group col-group\">\n                            <span class=\"label-span margin-bottom\">{{$t('user_page.account_type')}}</span>\n                            <input type=\"text\" v-model=\"customer.level\" class=\"border-bottom-ol\" readonly>\n                        </div>\n                    </div>\n\n                    <div class=\"form-group row-group\" >\n                        <div class=\"form-group\" style=\"align-items: center; justify-content: center;\" v-show=\"!is_edit\">\n                            <div class=\"btn btn-sign-up \" style=\"border:1px solid #ED6B28; width: 160px;\" v-on:click=\"handle_cancel\">{{$t('cancel')}}</div>\n                        </div>\n                        <div class=\"form-group\" v-if=\"is_edit\" style=\"align-items: center; justify-content: center;\">\n                            <div class=\"btn btn-login bg-title-header\" style=\"border:none;\" v-on:click=\"handle_edit\">{{$t('edit')}}</div>\n                        </div>\n                        <div class=\"form-group\" v-else style=\"align-items: center; justify-content: center;\">\n                            <button class=\"btn btn-login\" :class=\"{'bg-title-header': !invalid, 'disable-button' : invalid}\" style=\"border:none;\" :disabled=\"invalid\" v-on:click=\"handle_save\">{{$t('save')}}</button>\n                        </div>\n                        <div class=\"form-group\" style=\"align-items: center; justify-content: center\" v-if=\"is_edit\">\n                            <div class=\"btn btn-login bg-title-header\" style=\"border:none;\" v-on:click=\"is_change_password = true\">{{$t('change_pass')}}</div>\n                        </div>\n                    </div>\n                </form>\n            </ValidationObserver>\n        </div>\n        <block_alert></block_alert>\n        <div class=\"block-model\" style=\"background: rgba(0,0,0,.5); \" v-if=\"is_change_password\">\n            <div class=\"block-alert padding-full animation-tranform-scale\" style=\"max-width: 360px;\">\n                <div class=\"block-header bg-title-header padding-full header-fix width-full\">\n                    <p class=\"title-form\">{{$t('change_pass')}}</p>\n                </div>\n                <ValidationObserver v-slot=\"{ invalid }\" style=\"display: flex; align-items: center;\">\n                    <form class=\"block-form\" style=\"width: 100%;\" @submit.prevent=\"handle_change_password\">\n                        <div class=\"form-group margin-bottom col-group\">\n                            <span class=\"label-span margin-bottom-fix\">{{$t('form_login.password')}}</span>\n                            <ValidationProvider name=\"password\" rules=\"required|min:9\" v-slot=\"{errors}\" style=\"width: 100%\">\n                                <input type=\"password\" :placeholder=\"`${$t('form_login.password')}`\" name=\"password\" v-model=\"password\">\n                                <span class=\"error-text margin-fix-top\" >{{ errors[0] }}</span>\n                            </ValidationProvider>\n                        </div>\n                        <div class=\"form-group margin-bottom col-group\" style=\"margin-top: 16px;\">\n                            <span class=\"label-span margin-bottom-fix\">{{$t('form_login.re_password')}}</span>\n                            <ValidationProvider name=\"re_password\" rules=\"required|password:@password\" v-slot=\"{errors}\" style=\"width: 100%\">\n                                <input type=\"password\" :placeholder=\"`${$t('form_login.re_password')}`\" name=\"re_password\" v-model=\"confirmation\">\n                                <span class=\"error-text margin-fix-top\" >{{ errors[0] }}</span>\n                            </ValidationProvider>\n                        </div>\n                        <div class=\"form-group row-group\" style=\"justify-content: center; margin-top: 16px;\">\n                            <div class=\"btn btn-cancel margin-fix-right\" style=\"color: #ED6B28; border: 1px solid #ED6B28\" v-on:click=\"is_change_password = false\">{{$t('cancel')}}</div>\n                            <button class=\"btn btn-signup primary-color\" style=\"color: #FFF\" :disabled=\"invalid\">{{$t('save')}}</button>\n                        </div>\n                    </form>\n                </ValidationObserver>\n            </div>\n        </div>\n    </div> \n</template>\n\n<script>\nimport { HTTP } from '../../../../http-common'\nimport { socket_bus } from '../../../../main'\nimport block_alert from '../../../Units/Block_Alert'\n\nexport default {\n    components: {\n        block_alert\n    },\n    data() {\n        return {\n            is_edit: true,\n            is_change_password: false,\n            readonly: true,\n            customer: {},\n            password: '',\n            confirmation: ''\n        }\n    },\n    methods: {\n        handle_edit() {\n            this.is_edit = false;\n            this.readonly = false;\n        },\n        handle_cancel() {\n            this.is_edit = true;\n            this.readonly = true;\n            this.customer = JSON.parse(localStorage.getItem('customer'))\n        },\n        handle_save() {\n            const data = {id: this.customer.id, updateOps: this.customer}\n            HTTP.patch('/customers/' + data.id, data.updateOps).then(result => {\n                if(result.status == 200) {\n                    this.is_edit = true;\n                    this.readonly = true;\n                    localStorage.removeItem('customer')\n                    localStorage.setItem('customer', JSON.stringify(this.customer))\n                    socket_bus.$emit('SHOW_ALERT', {is_show: true, message: `${this.$t('message_alert.update_account_success')}`, is_redirect: true})\n                } else {\n                    socket_bus.$emit('SHOW_ALERT', {is_show: true, message: `${this.$t('message_alert.update_account_fail')}`, is_redirect: false})\n                }\n            }).catch(error => {\n                console.log(error);\n            })\n        },\n        handle_change_password() {\n            const id_customer = this.customer.id\n            return new Promise((resolve, reject) => {\n                HTTP.patch('/customers/update-password/' + id_customer, {password: this.password}).then(result => {\n                    resolve(result)\n                    if(result.data.status == 200) {\n                        this.is_change_password = false\n                         socket_bus.$emit('SHOW_ALERT', {is_show: true, message: `${this.$t('message_alert.change_pass_success')}`, is_redirect: true})\n                    } else {\n                         socket_bus.$emit('SHOW_ALERT', {is_show: true, message: `${this.$t('message_alert.change_pass_fail')}`, is_redirect: true})\n                    }\n                })\n                .catch(error => {\n                    reject(error)\n                    this.password = ''\n                    console.log('Error: ' + error)\n                })\n            })\n        }\n    },\n    created() {\n        if(JSON.parse(localStorage.getItem('customer'))) {\n            this.customer = JSON.parse(localStorage.getItem('customer'))\n        }\n        \n    }\n}\n</script>"],"sourceRoot":"src/components/Pages/User/ui_user"}]}