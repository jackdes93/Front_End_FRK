{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/Admin/Pages/ReportCallBack.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/Admin/Pages/ReportCallBack.vue","mtime":1573058378493},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nimport { HTTP_ADMIN } from \"../../../../http-common\";\nimport datepicker from 'vuejs-datepicker';\nimport JsonExcel from 'vue-json-excel';\nVue.component('download-excel', JsonExcel);\nexport default {\n  components: {\n    datepicker: datepicker\n  },\n  data: function data() {\n    return {\n      format: 'dd/MM/yyyy',\n      id_brand: null,\n      date_from: '',\n      titles: [],\n      date_to: '',\n      name_file: '',\n      json_fields: {\n        'NAME BRAND': 'name_brand',\n        'OWNER': 'owner',\n        'BRAND TYPE': 'level',\n        'CATEGORY': 'category',\n        'PRICE': 'price',\n        'AMOUNT CALL BACK': 'amount_call_back'\n      },\n      json_data: [],\n      brands: [],\n      disable_date_from: {\n        from: new Date(),\n        ranges: []\n      },\n      disable_date_to: {\n        from: new Date(),\n        ranges: []\n      },\n      data_report_brand: null,\n      data_report_summary: null\n    };\n  },\n  methods: {\n    handle_change: function handle_change() {\n      this.data_report_brand = null;\n      this.data_report_summary = null;\n    },\n    handle_return_string_money: function handle_return_string_money(text) {\n      var length = text.length;\n\n      if (length > 6) {\n        return text.substr(0, text.length - 6);\n      } else if (length == 6) {\n        return '0.' + text.substr(0, 1);\n      }\n    },\n    handle_get_brand: function handle_get_brand() {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        HTTP_ADMIN.get('/brands').then(function (result) {\n          resolve(result);\n\n          _this.brands.push({\n            id: \"all_brand\",\n            name: \"ALL BRAND\"\n          });\n\n          result.data.data.map(function (brand) {\n            _this.brands.push(brand);\n          });\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    handle_get_all: function handle_get_all(date_from, date_to) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        HTTP_ADMIN.get(\"/reports/call-back-all/date-from=\".concat(date_from, \"&date-to=\").concat(date_to)).then(function (result) {\n          resolve(result);\n          _this2.data_report_summary = result.data.status == 200 ? result.data.data : [];\n\n          _this2.titles.push('Summary All Call Back Of Brand');\n\n          _this2.data_report_summary.map(function (item) {\n            _this2.json_data.push({\n              name_brand: item.name_brand,\n              owner: item.owner[0],\n              level: item.level,\n              category: item.category,\n              price: item.price,\n              amount_call_back: item.sum_call_back\n            });\n          });\n        }).catch(function (error) {\n          reject(error);\n          console.log('Error: ' + error);\n        });\n      });\n    },\n    handle_get_data_brand: function handle_get_data_brand(id_brand, date_from, date_to) {\n      var _this3 = this;\n\n      var current_date = new Date();\n      return new Promise(function (resolve, reject) {\n        HTTP_ADMIN.get(\"/reports/call-back-brand=\".concat(id_brand, \"&date-from=\").concat(date_from, \"&date-to=\").concat(date_to)).then(function (result) {\n          resolve(result);\n          _this3.data_report_brand = result.data.status == 200 ? result.data.data[0] : null;\n\n          if (_this3.data_report_brand) {\n            _this3.titles.push(_this3.data_report_brand.name_brand);\n\n            _this3.titles.push(_this3.data_report_brand.owner_brand.full_name);\n\n            _this3.titles.push(_this3.data_report_brand.owner_brand.email);\n\n            _this3.titles.push(_this3.data_report_brand.owner_brand.phone_number);\n\n            _this3.name_file = \"\".concat(_this3.data_report_brand.name_brand, \"_\").concat(current_date.getDate(), \"_\").concat(current_date.getMonth() + 1, \"_\").concat(current_date.getFullYear(), \".xls\");\n\n            _this3.data_report_brand.data_call_back.map(function (item) {\n              _this3.json_data.push({\n                date_created: item.created_on,\n                name: item.name,\n                email: item.email,\n                location: item.location,\n                budget: item.budget ? item.budget.from + '-' + item.budget.to : 0\n              });\n            });\n          }\n        }).catch(function (error) {\n          reject(error);\n          console.log(error);\n        });\n      });\n    },\n    handle_export: function handle_export() {\n      if (this.id_brand.length > 0 && this.date_from <= this.date_to) {\n        var current_date = new Date();\n        var date_f = new Date(this.date_from);\n        var date_t = new Date(this.date_to);\n        this.titles = [];\n\n        if (this.id_brand == 'all_brand') {\n          this.handle_get_all(date_f, date_t);\n          this.name_file = \"Summary_All_Brand_\".concat(current_date.getDate(), \"_\").concat(current_date.getMonth() + 1, \"_\").concat(current_date.getFullYear(), \".xls\");\n        } else {\n          this.handle_get_data_brand(this.id_brand, date_f, date_t);\n        }\n      } else {\n        alert('Please choose full conditions');\n      }\n    }\n  },\n  created: function created() {\n    this.handle_get_brand();\n  }\n};",{"version":3,"sources":["ReportCallBack.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"flex-box padding-full block-custom-header col-group\">\n        <div class=\"block-custom col-12 padding-fix-lr box-shadow margin-fix-right\" style=\"max-height: 600px; background: #EDEDED;\">\n            <div class=\"block-header bg-title-header padding-full header-fix\">\n                <p class=\"title-form\">Report Call Back Of Brand</p>\n            </div>\n            <div class=\"form-group row-group width-full\">\n                <div class=\"form-group col-group\">\n                    <span class=\"label-span margin-bottom-fix\">Brand</span>\n                    <select v-model=\"id_brand\" class=\"selection-brand\" @change=\"handle_change()\">\n                        <option value=null>-- Select Brand --</option>\n                        <option :value=\"brand.id\" v-for=\"(brand, index) in brands\" :key=\"index\">{{brand.name}}</option>\n                    </select>\n                </div>\n                <div class=\"form-group col-group margin-fix-right\">\n                    <span class=\"label-span margin-bottom-fix\">Date From</span>\n                    <datepicker placeholder=\"Choose Date Start\" class=\"date_picker\" style=\"justify-content: flex-start\" :disabled-dates=\"disable_date_from\"  :format=\"format\"  v-model=\"date_from\"></datepicker>\n                </div>\n                <div class=\"form-group col-group margin-fix-right\">\n                    <span class=\"label-span margin-bottom-fix\">Date To</span>\n                    <datepicker placeholder=\"Choose Date Stop\" class=\"date_picker\" style=\"justify-content: flex-start\" :disabled-dates=\"disable_date_to\" :format=\"format\" v-model=\"date_to\"></datepicker>\n                </div>\n                <div class=\"form-group row-group\" style=\"max-width:160px; margin-top: 24px; \">\n                    <span class=\"label-span margin-bottom-fix\"></span>\n                    <button class=\"btn btn-sign-up\" v-on:click=\"handle_export()\">Export</button>\n                </div>\n            </div>\n        </div>\n        <div class=\"form-group col-group width-full padding-top\" v-if=\"data_report_brand\">\n            <div class=\"form-group row-group\"><span class=\"label\" style=\"font-size: 1.2em\">Report of brand {{data_report_brand.name_brand}}</span></div>\n            <div class=\"form-group row-group\" style=\"max-width: 400px; align-items: flex-end\">\n                <span class=\"label-span\" style=\"width: 120px;\">Name Brand's</span>\n                <input type=\"text\" class=\"border-bottom-ol\" :value=\"data_report_brand.name_brand\">\n            </div>\n            <div class=\"form-group row-group\" style=\"max-width: 600px; align-items: flex-end\">\n                <span class=\"label-span\" style=\"width: 120px;\">Brand Owner</span>\n                <input type=\"text\" class=\"border-bottom-ol\" :value=\"data_report_brand.owner_brand.full_name\">\n            </div>\n            <div class=\"form-group col-group\" style=\"max-width: 600px;\">\n                <div class=\"form-group row-group\">\n                    <div class=\"form-group row-group margin-fix-right\" style=\"max-width: 400px; align-items: flex-end\">\n                        <span class=\"label-span\" style=\"width: 120px;\">Email:</span>\n                        <input type=\"text\" class=\"border-bottom-ol\" :value=\"data_report_brand.owner_brand.email\">\n                    </div>\n                    <div class=\"form-group row-group\" style=\"max-width: 400px; align-items: flex-end\">\n                        <span class=\"label-span\" style=\"width: 160px;\">Phone Number</span>\n                        <input type=\"text\" class=\"border-bottom-ol\" :value=\"data_report_brand.owner_brand.phone_number\">\n                    </div>\n                </div>\n            </div>\n            <span class=\"label-span\" style=\"font-size: 1.3em\">List Call Back</span>\n            <div class=\"form-group row-group padding-top border-bottom-ol padding-bottom\" style=\"justify-content: flex-start\">\n                <span class=\"flex-box label text-color-second \" style=\"width: 80px; min-width: 100px;\">NO.</span>\n                <span class=\"flex-box label text-color-second margin-fix-right\">DATE CREATE</span>\n                <span class=\"flex-box label text-color-second margin-fix-right\">NAME</span>\n                <span class=\"flex-box label text-color-second margin-fix-right\">EMAIL</span>\n                <span class=\"flex-box label text-color-second margin-fix-right\">LOCATION</span>\n                <span class=\"flex-box label text-color-second \">BUDGET</span>\n            </div>\n            <div class=\"form-group col-group\" style=\"max-height: 300px; height: 240px;\">\n                <div class=\"form-group row-group padding-top\"  v-for=\"(item, index) in data_report_brand.data_call_back\" :key=\"index\">\n                    <span class=\"label flex-box\" style=\"width: 80px; min-width: 100px;\">{{index + 1}}</span>\n                    <span class=\"label flex-box\">{{new Date(item.created_on).toLocaleDateString()}}</span>\n                    <span class=\"label flex-box\">{{item.name}}</span>\n                    <span class=\"label flex-box text-overflow\">{{item.email}}</span>\n                    <span class=\"label flex-box\">{{item.location}}</span>\n                    <span class=\"label flex-box\">{{item.budget ? handle_return_string_money(item.budget.from.toString()) : 0}}M -> {{item.budget ? handle_return_string_money(item.budget.to.toString()):0}}M</span>\n                </div>\n            </div>\n        </div>\n        <div class=\"form-group row-group\" v-else><span class=\"label-span\" v-if=\"id_brand != 'all_brand'\" style=\"display: flex; width: 100%; padding: 8px 0; justify-content: center; font-size: 1.6em\">NO DATA</span></div>\n        <div class=\"form-group row-group\" style=\"justify-content: center\">\n            <download-excel v-if=\"data_report_brand\"\n                :data= \"json_data\" \n                :title= \"titles\"\n                :fields = \"json_fields\"\n                :worksheet = \"id_brand\"\n                :name = \"name_file\"\n                class=\"btn-dwn-report text-color-primarry\">\n                Download Report\n                <span><i class=\"fas fa-print\"></i></span>\n            </download-excel>\n        </div>\n        <div class=\"form-group col-group width-full padding-top\" v-if=\"data_report_summary\">\n            <div class=\"form-group row-group width-full\">\n                <div class=\"form-group row-group width-full\">\n                    <div class=\"block-list-row width-full padding-full border-bottom-ol\">\n                        <div class=\"block-item-row-header margin-fix-right\" style=\"max-width: 64px; width: 64px; justify-content: center;\">\n                            <p class=\"label text-color-second \">Rank</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 160px; margin: 0 8px;\">\n                            <p class=\"label text-color-second \">Owner</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 220px;\">\n                            <p class=\"label text-color-second \">Brand Name</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"max-width: 200px;\">\n                            <p class=\"label text-color-second \">Pricing</p>\n                        </div>\n                        <div class=\"block-item-row-header\">\n                            <p class=\"label text-color-second \">Category</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"width: 200px; flex: none;\">\n                            <p class=\"label text-color-second\" style=\"text-align:left;\">Brand Type</p>\n                        </div>\n                        <div class=\"block-item-row-header\" style=\"display: flex; justify-content: center;\">\n                            <p class=\"label text-color-second\" style=\"text-align: left\">Amount Call Back</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"form-group col-group\" style=\"padding: 0 8px 16px 8px; max-height: 400px; overflow: auto;\">\n                <div class=\"form-group border-bottom-ol padding-full row-animation\" style=\"align-items: center;\" v-for=\"(item,index) in data_report_summary\" :key=\"index\">\n                    <div class=\"block-item-row logo-brand margin-fix-right\" style=\"width: 64px; border: none;\">\n                        <p class=\"label text-color-second\">{{index + 1}}</p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 160px; margin: 0 8px;\">\n                        <p class=\"label-cell\">{{item.owner[0]}}</p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 220px;\">\n                        <a class=\"label-cell width-full\" style=\"font-size: 16px;\" v-bind:href=\"`/#/brand/${item._id}`\">{{item.name_brand}}</a>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 200px;\">\n                        <p class=\"label-cell bold\">{{item.price.toLocaleString() }} <sup>đ</sup></p>\n                    </div>\n                    <div class=\"block-item-row \" style=\"max-width: 360px; margin-right: 8px;\">\n                        <p class=\"label-cell text-overflow\" >{{item.category}}</p>\n                    </div>\n                    <div class=\"block-item-row\">\n                        <p class=\"label-cell\">{{item.level}}</p>\n                    </div>\n                    <div class=\"block-item-row\" style=\"display: flex; justify-content: center;\">\n                        <p class=\"label text-color-second\">{{item.sum_call_back ? item.sum_call_back : 0}}</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"form-group row-group\" style=\"justify-content: center\">\n                <download-excel v-if=\"data_report_summary\"\n                    :data= \"json_data\" \n                    :title= \"titles\"\n                    :fields = \"json_fields\"\n                    :worksheet = \"id_brand\"\n                    :name = \"name_file\"\n                    class=\"btn-dwn-report text-color-primarry\">\n                    Download Report\n                    <span><i class=\"fas fa-print\"></i></span>\n                </download-excel>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { HTTP_ADMIN } from '../../../../http-common'\nimport datepicker from 'vuejs-datepicker';\nimport JsonExcel from 'vue-json-excel'\n\nVue.component('download-excel', JsonExcel)\nexport default {\n    components: { datepicker},\n    data() {\n        return {\n            format: 'dd/MM/yyyy',\n            id_brand: null,\n            date_from: '',\n            titles: [],\n            date_to: '',\n            name_file: '',\n            json_fields: {\n                'NAME BRAND' : 'name_brand',\n                'OWNER':'owner',\n                'BRAND TYPE' : 'level',\n                'CATEGORY': 'category',\n                'PRICE' : 'price',\n                'AMOUNT CALL BACK':'amount_call_back'\n            },\n            json_data: [],\n            brands: [],\n            disable_date_from : {\n                from: new Date(),\n                ranges: []\n            },\n            disable_date_to : {\n                from: new Date(),\n                ranges: []\n            },\n            data_report_brand: null,\n            data_report_summary:null\n        }\n    },\n    methods: {\n        handle_change() {\n            this.data_report_brand = null\n            this.data_report_summary = null\n        },\n        handle_return_string_money(text) {\n            const length = text.length\n           if(length > 6) {\n               return text.substr(0, text.length - 6) \n           } else if(length == 6) {\n               return '0.' + text.substr(0, 1)\n           }\n        },\n        handle_get_brand() {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get('/brands').then(result => {\n                    resolve(result)\n                    this.brands.push({id: \"all_brand\", name: \"ALL BRAND\"})\n                    result.data.data.map(brand => {\n                        this.brands.push(brand)\n                    })\n                    \n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        handle_get_all(date_from, date_to) {\n            return new Promise((resolve, reject) => {\n                HTTP_ADMIN.get(`/reports/call-back-all/date-from=${date_from}&date-to=${date_to}`).then(result => {\n                    resolve(result)\n                    this.data_report_summary = result.data.status == 200 ? result.data.data : []\n                    this.titles.push('Summary All Call Back Of Brand')\n                    this.data_report_summary.map(item => {\n                        this.json_data.push({\n                            name_brand: item.name_brand,\n                            owner: item.owner[0],\n                            level: item.level,\n                            category: item.category,\n                            price: item.price,\n                            amount_call_back: item.sum_call_back\n                        })\n                    })\n                }).catch(error => {\n                    reject(error)\n                    console.log('Error: ' + error);\n                })\n            })\n        },\n        handle_get_data_brand(id_brand, date_from, date_to) {\n            const current_date = new Date()\n            return new Promise((resolve, reject) => {\n                    HTTP_ADMIN.get(`/reports/call-back-brand=${id_brand}&date-from=${date_from}&date-to=${date_to}`).then(result => {\n                        resolve(result)\n                        this.data_report_brand = result.data.status == 200 ? result.data.data[0] : null\n                        if(this.data_report_brand) {\n                            this.titles.push(this.data_report_brand.name_brand)\n                            this.titles.push(this.data_report_brand.owner_brand.full_name)\n                            this.titles.push(this.data_report_brand.owner_brand.email)\n                            this.titles.push(this.data_report_brand.owner_brand.phone_number)\n                            this.name_file = `${this.data_report_brand.name_brand}_${current_date.getDate()}_${current_date.getMonth() + 1}_${current_date.getFullYear()}.xls`\n                            this.data_report_brand.data_call_back.map(item => {\n                                this.json_data.push({\n                                    date_created: item.created_on,\n                                    name: item.name,\n                                    email: item.email,\n                                    location: item.location,\n                                    budget: item.budget ? item.budget.from + '-' + item.budget.to : 0\n                                })\n                            })\n                        }\n                        \n                    }).catch(error => {\n                        reject(error)\n                        console.log(error);\n                    })\n                })\n        },\n        handle_export() {\n            if(this.id_brand.length > 0 && this.date_from <= this.date_to) {\n                const current_date = new Date()\n                const date_f = new Date(this.date_from)\n                const date_t = new Date(this.date_to)\n                this.titles = []\n                if(this.id_brand == 'all_brand') {\n                    this.handle_get_all(date_f, date_t)\n                    this.name_file = `Summary_All_Brand_${current_date.getDate()}_${current_date.getMonth() + 1}_${current_date.getFullYear()}.xls`\n                } else {\n                    this.handle_get_data_brand(this.id_brand, date_f, date_t)\n                }\n                \n            } else {\n                alert('Please choose full conditions')\n            }\n        }\n    },\n    created() {\n        this.handle_get_brand()\n    }\n}\n</script>"],"sourceRoot":"src/components/Pages/Admin/Pages"}]}