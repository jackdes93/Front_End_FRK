{"remainingRequest":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/LoginPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/src/components/Pages/LoginPage.vue","mtime":1584437283643},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jackdesy93/Documents/Project Free Landcer/Franchise King/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport block_nav from \"../Units/BlockNav\";\nimport block_footer from \"../Units/Block_Footer\";\nimport block_alert from \"../Units/Block_Alert\";\nimport { socket_bus } from \"../../main\";\nimport { router } from \"../../routers\";\nimport VueRecaptcha from 'vue-recaptcha';\nimport facebookLogin from 'facebook-login-vuejs';\nexport default {\n  components: {\n    block_nav: block_nav,\n    block_footer: block_footer,\n    block_alert: block_alert,\n    VueRecaptcha: VueRecaptcha,\n    facebookLogin: facebookLogin\n  },\n  data: function data() {\n    return {\n      email: '',\n      password: '',\n      remember: false,\n      token_recaptcha: null,\n      FB: undefined,\n      isConnected: false\n    };\n  },\n  methods: {\n    getUserData: function getUserData() {\n      this.FB.api('/me', {\n        fields: 'id,name,email'\n      }, function (user_info) {\n        console.log(user_info);\n      });\n    },\n    sdkLoaded: function sdkLoaded(payload) {\n      this.isConnected = payload.isConnected;\n      this.FB = payload.FB;\n      if (this.isConnected) this.getUserData();\n    },\n    onLogin: function onLogin() {\n      this.isConnected = true;\n      this.getUserData();\n    },\n    onLogout: function onLogout() {\n      this.isConnected = false;\n    },\n    handle_login: function handle_login() {\n      var _this = this;\n\n      // if(this.token_recaptcha != null) {\n      var info_login = {\n        email: this.email,\n        password: this.password\n      };\n      this.$store.dispatch('handle_sign_in', info_login).then(function (result) {\n        if (result.data.status == 200) {\n          socket_bus.$emit('SHOW_ALERT', {\n            is_show: true,\n            message: _this.$t('message_alert.login_success'),\n            is_redirect: true,\n            brand: {\n              name: _this.$t('success')\n            }\n          });\n        } else if (result.data.status == 403) {\n          socket_bus.$emit('SHOW_ALERT', {\n            is_show: true,\n            message: _this.$t('message_alert.login_not_active'),\n            is_redirect: false,\n            brand: {\n              name: _this.$t('fail')\n            }\n          });\n        } else if (result.data.status == 503) {\n          socket_bus.$emit('SHOW_ALERT', {\n            is_show: true,\n            message: _this.$t('message_alert.login_lock'),\n            is_redirect: false,\n            brand: {\n              name: _this.$t('message_alert.login_fail')\n            }\n          });\n        } else if (result.data.status == 401) {\n          socket_bus.$emit('SHOW_ALERT', {\n            is_show: true,\n            message: _this.$t('message_alert.login_error'),\n            is_redirect: false,\n            brand: {\n              name: _this.$t('message_alert.login_fail')\n            }\n          });\n        } else {\n          socket_bus.$emit('SHOW_ALERT', {\n            is_show: true,\n            message: _this.$t('message_alert.login_error'),\n            is_redirect: false,\n            brand: {\n              name: _this.$t('message_alert.login_fail')\n            }\n          });\n        }\n      }); // } else {\n      //     socket_bus.$emit('SHOW_ALERT', {is_show: true, message: this.$t('auth_capcha'), is_redirect: false, brand: {name: this.$t('message_alert.login_fail')}})\n      // }\n    },\n    handle_verify: function handle_verify(response) {\n      this.token_recaptcha = response;\n    },\n    handle_expired: function handle_expired() {\n      this.$refs.recaptcha.reset();\n    },\n    handle_load: function handle_load() {\n      this.$recaptchaLoaded().then(function () {});\n    }\n  },\n  created: function created() {\n    socket_bus.$on('CLOSE_BOX', function (result) {\n      if (result.is_redirect && localStorage.getItem('access_token') != undefined) {\n        window.location.reload();\n        router.push('/user/info-user');\n      } else {\n        router.push('/login');\n      }\n    });\n\n    if (localStorage.getItem('access_token') != undefined) {\n      router.push('/user/info-user');\n    }\n  }\n};",{"version":3,"sources":["LoginPage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <block_nav></block_nav>\n        <div class=\"flex-col-center login-block\" style=\"display: flex; margin: 60px 0;\">\n            <div class=\"block-form flex-col-center\">\n                <ValidationObserver v-slot=\"{ invalid }\">\n                    <form class=\"form-login\" @submit.prevent=\"handle_login\">\n                        <div class=\"form-header\">\n                            <p class=\"title-form\">{{$t('form_login.login')}}</p>\n                        </div>\n                        <div class=\"form-content\" style=\"height: auto; flex: 1; padding: 0;  margin-top: 20px;\">\n                            <div class=\"form-group margin-bottom col-group\">\n                                <div class=\"form-group\">\n                                    <ValidationProvider name=\"email\" rules=\"required|email\" v-slot=\"{ errors }\" style=\"width: 100%;\">\n                                        <input type=\"text\" name=\"email\" placeholder=\"Email\" v-model=\"email\">\n                                        <span class=\"error-text margin-fix-top\" >{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                            </div>\n                            <div class=\"form-group margin-bottom col-group\">\n                                <div class=\"form-group \">\n                                    <ValidationProvider name=\"password\" rules=\"required|min:9\" v-slot=\"{ errors }\" style=\"width: 100%;\">\n                                        <input type=\"password\" name=\"password\" v-model=\"password\" :placeholder=\"`${$t('form_login.re_password')}`\">\n                                        <span class=\"error-text margin-fix-top\" >{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                            </div>\n                            <vue-recaptcha id=\"capcah\" sitekey=\"6LeeM74UAAAAAJ71ru17H2h-hReSNO_07eNNm7Is\" :loadRecaptchaScript=\"true\" @verify=\"handle_verify\" @expired=\"handle_expired\" ref=\"recaptcha\" class=\"margin-bottom\" style=\"display: flex; justify-content: center;\"></vue-recaptcha >\n                            <div class=\"form-group col-group margin-bottom\" style=\"align-items: center;\">\n                                <span class=\"flex-row-center \" style=\"display: flex; width: 100%; justify-content: flex-start; margin-bottom: 24px;\">\n                                    <input type=\"checkbox\" name=\"remember\" v-model=\"remember\" style=\"margin-right:10px; flex: 1;\">\n                                    <p style=\"font-family: 'Quicksand Light'; font-size: 12px; flex: 2\">{{$t('form_login.remember')}}</p>\n                                </span>\n                                <span class=\"form-group row-group flex-row-center margin-bottom\" style=\"justify-content: center\">\n                                    <router-link to=\"/forgot-password\" style=\"display:flex;\">{{$t('manager.forgot_pwd')}} ?</router-link>\n                                </span>\n                                <div class=\"form-group margin-bottom\" >\n                                    <button type=\"submit\" class=\"btn btn-login bg-title-header\" :disabled=\"invalid\"  style=\"width: 100%; border: none;\">{{$t('form_login.login')}}</button>\n                                </div>\n                                <div class=\"form-group margin-bottom\">\n                                    <router-link to=\"/signup\" class=\"btn btn-sign-up\">{{$t('form_login.sign_up')}}</router-link>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"block-login-social\" style=\"display:flex; width: 100%; flex-direction: column; justify-content: flex-start; flex: 1; align-items: center;\">\n                            <div class=\"form-header\" style=\"padding: 20px 0; width: 100%;\">\n                                <p class=\"title-form\">{{$t('form_login.social')}}</p>\n                            </div>\n                            <div class=\"form-group col-group\" style=\"margin-top: 23px; height: 100%; \">\n                                <div class=\"btn btn-social margin-fix-bottom\" style=\"width: 100%; height: 45px; justify-content: flex-start; background: #00aced; border: none; margin-bottom: 8px;\" >\n                                    <span style=\"display: flex; justify-content: center; align-items: center; width: 32px; height: 32px; margin: 0 0 0 20px;\">\n                                        <img src=\"../../assets/image/zalo.png\" alt=\"\">\n                                    </span>\n                                    <p style=\"width: 100%; text-align: center; color: #FFF;\">{{$t('form_login.connect')}} Zalo</p>\n                                </div>\n                                <div class=\"btn btn-social margin-fix-bottom\" style=\"width: 100%; height: 45px; justify-content: flex-start; background: #44619d; border: none; \" >\n                                    <facebook-login class=\"\" style=\"display: flex; width: 100%; height: 40px;\"\n                                        appId=\"326022817735322\"\n                                        @login=\"getUserData\"\n                                        @logout=\"onLogout\"\n                                        @get-initial-status=\"sdkLoaded\">\n                                    </facebook-login>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </ValidationObserver>\n            </div>\n        </div>\n        <block_footer></block_footer>\n        <block_alert></block_alert>\n    </div>\n   \n</template>\n\n<style scoped>\ninput[type=\"text\"], input[type=\"password\"] { height: 42px;}\n</style>\n\n<script>\nimport block_nav from '../Units/BlockNav';\nimport block_footer from '../Units/Block_Footer';\nimport block_alert from '../Units/Block_Alert';\nimport { socket_bus } from '../../main'\nimport {router} from '../../routers';\nimport VueRecaptcha from 'vue-recaptcha'\nimport facebookLogin from 'facebook-login-vuejs';\n\nexport default {\n    components: {\n        block_nav, block_footer,block_alert, VueRecaptcha, facebookLogin, \n    },\n    data() {\n        return {\n            email: '',\n            password: '',\n            remember: false,\n            token_recaptcha: null,\n            FB: undefined,\n            isConnected: false,\n        }\n    },\n    methods: {\n        getUserData() {\n            this.FB.api('/me', {fields: 'id,name,email'}, user_info => {\n                console.log(user_info);\n            })\n        },\n        sdkLoaded(payload) {\n            this.isConnected = payload.isConnected\n            this.FB = payload.FB\n            if(this.isConnected) this.getUserData()\n        },\n        onLogin() {\n            this.isConnected = true\n            this.getUserData()\n        },\n        onLogout() {\n            this.isConnected = false\n        },\n        handle_login() {\n            // if(this.token_recaptcha != null) {\n                const info_login = {email: this.email, password: this.password}\n                this.$store.dispatch('handle_sign_in', info_login).then(result => {\n                    if(result.data.status == 200) {\n                        socket_bus.$emit('SHOW_ALERT', {is_show: true, message: this.$t('message_alert.login_success'), is_redirect: true, brand: {name: this.$t('success')}})\n                    } else if(result.data.status == 403) {\n                        socket_bus.$emit('SHOW_ALERT', {is_show: true, message: this.$t('message_alert.login_not_active'), is_redirect: false, brand: {name: this.$t('fail')}})\n                    } else if(result.data.status == 503) {\n                        socket_bus.$emit('SHOW_ALERT', {is_show: true, message: this.$t('message_alert.login_lock'), is_redirect: false, brand: {name: this.$t('message_alert.login_fail')}})\n                    } else if(result.data.status == 401) {\n                        socket_bus.$emit('SHOW_ALERT', {is_show: true, message: this.$t('message_alert.login_error'), is_redirect: false, brand: {name: this.$t('message_alert.login_fail')}})\n                    } else {\n                        socket_bus.$emit('SHOW_ALERT', {is_show: true, message: this.$t('message_alert.login_error'), is_redirect: false, brand: {name: this.$t('message_alert.login_fail')}})\n                    }\n                })\n            // } else {\n            //     socket_bus.$emit('SHOW_ALERT', {is_show: true, message: this.$t('auth_capcha'), is_redirect: false, brand: {name: this.$t('message_alert.login_fail')}})\n            // }\n        },\n        handle_verify: function(response) {\n           this.token_recaptcha = response\n        },\n        handle_expired: function () {\n            this.$refs.recaptcha.reset()\n        },\n        handle_load() {\n            this.$recaptchaLoaded().then(() => {\n\n            })\n        }\n    },\n    created() {\n        socket_bus.$on('CLOSE_BOX', result => {\n            if(result.is_redirect && localStorage.getItem('access_token') != undefined) {\n                window.location.reload()\n                router.push('/user/info-user')\n            } else {\n                router.push('/login')\n            }\n        })\n\n        if(localStorage.getItem('access_token') != undefined) {\n            router.push('/user/info-user')\n        }\n    }\n\n}\n</script>"],"sourceRoot":"src/components/Pages"}]}